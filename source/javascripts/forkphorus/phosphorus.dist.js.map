{"version":3,"file":"phosphorus.dist.js","sourceRoot":"","sources":["phosphorus/phosphorus.ts","phosphorus/config.ts","phosphorus/audio.ts","phosphorus/matrix.ts","phosphorus/renderer.ts","phosphorus/core.ts","phosphorus/fonts.ts","phosphorus/io.ts","phosphorus/runtime.ts","phosphorus/utils.ts","phosphorus/sb2.ts","phosphorus/sb3.ts","phosphorus/extensions/extension.ts","phosphorus/extensions/microphone.ts","phosphorus/extensions/speech2text.ts"],"names":[],"mappings":"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","sourcesContent":["/*!\r\nForkphorus: A JavaScript compiler for Scratch 2 and 3 projects.\r\n(A fork of phosphorus)\r\n\r\nNote: phosphorus.dist.js is automatically generated from the `phosphorus` folder.\r\nSee the README for more information.\r\n\r\nThe MIT License (MIT)\r\n\r\nCopyright (c) 2013-2017 Nathan Dinsmore\r\nCopyright (c) 2019 Thomas Weber\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy of\r\nthis software and associated documentation files (the \"Software\"), to deal in\r\nthe Software without restriction, including without limitation the rights to\r\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\r\nthe Software, and to permit persons to whom the Software is furnished to do so,\r\nsubject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\r\nFOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\r\nCOPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\r\nIN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\r\nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n*/\r\n\r\ninterface ObjectMap<V> {\r\n  [key: string]: V;\r\n}\r\n\r\nif (!('Promise' in window)) {\r\n  throw new Error('Browser does not support Promise');\r\n}\r\n","/// <reference path=\"phosphorus.ts\" />\r\n\r\nnamespace P.config {\r\n  const features = location.search.replace('?', '').split('&');\r\n  export const debug = features.indexOf('debug') > -1;\r\n  export const useWebGL = features.indexOf('webgl') > -1;\r\n  export const supportVideoSensing = features.indexOf('video') > -1;\r\n  export const experimentalOptimizations = features.indexOf('opt') > -1;\r\n\r\n  export const scale = window.devicePixelRatio || 1;\r\n  export const PROJECT_API: string = 'https://projects.scratch.mit.edu/$id';\r\n}\r\n","/// <reference path=\"phosphorus.ts\" />\r\n/// <reference path=\"config.ts\" />\r\n\r\nnamespace P.audio {\r\n  export const context = (function(): AudioContext | null {\r\n    if ((window as any).AudioContext) {\r\n      return new AudioContext();\r\n    } else if ((window as any).webkitAudioContext) {\r\n      return new (window as any).webkitAudioContext();\r\n    } else {\r\n      return null;\r\n    }\r\n  })();\r\n\r\n  if (context) {\r\n    // TODO: customizable volume\r\n    var volume = 0.5;\r\n    var globalNode = context.createGain();\r\n    globalNode.gain.value = volume;\r\n    globalNode.connect(context.destination);\r\n  }\r\n\r\n  // Most things relating to Span are old things I don't understand and don't want to touch.\r\n  interface Span {\r\n    name: string;\r\n    loop: boolean;\r\n    loopStart: number | null;\r\n    loopEnd: number | null;\r\n    baseRatio: number;\r\n    attackEnd: number;\r\n    holdEnd: number;\r\n    decayEnd: number;\r\n    decayTime?: number;\r\n    top?: number;\r\n  }\r\n\r\n  /*\r\n    copy(JSON.stringify(drums.map(function(d) {\r\n      var decayTime = d[4] || 0;\r\n      var baseRatio = Math.pow(2, (60 - d[1] - 69) / 12);\r\n      if (d[2]) {\r\n        var length = d[3] - d[2];\r\n        baseRatio = 22050 * Math.round(length * 440 * baseRatio / 22050) / length / 440;\r\n      }\r\n      return {\r\n        name: d[0],\r\n        baseRatio: baseRatio,\r\n        loop: !!d[2],\r\n        loopStart: d[2] / 22050,\r\n        loopEnd: d[3] / 22050,\r\n        attackEnd: 0,\r\n        holdEnd: 0,\r\n        decayEnd: decayTime\r\n      }\r\n    }))\r\n  */\r\n  export const drums: Span[] = [\r\n    {name:'SnareDrum',baseRatio:0.5946035575013605,loop:false,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},\r\n    {name:'Tom',baseRatio:0.5946035575013605,loop:false,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},\r\n    {name:'SideStick',baseRatio:0.5946035575013605,loop:false,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},\r\n    {name:'Crash',baseRatio:0.8908987181403393,loop:false,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},\r\n    {name:'HiHatOpen',baseRatio:0.9438743126816935,loop:false,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},\r\n    {name:'HiHatClosed',baseRatio:0.5946035575013605,loop:false,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},\r\n    {name:'Tambourine',baseRatio:0.5946035575013605,loop:false,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},\r\n    {name:'Clap',baseRatio:0.5946035575013605,loop:false,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},\r\n    {name:'Claves',baseRatio:0.5946035575013605,loop:false,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},\r\n    {name:'WoodBlock',baseRatio:0.7491535384383408,loop:false,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},\r\n    {name:'Cowbell',baseRatio:0.5946035575013605,loop:false,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},\r\n    {name:'Triangle',baseRatio:0.8514452780229479,loop:true,loopStart:0.7638548752834468,loopEnd:0.7825396825396825,attackEnd:0,holdEnd:0,decayEnd:2},\r\n    {name:'Bongo',baseRatio:0.5297315471796477,loop:false,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},\r\n    {name:'Conga',baseRatio:0.7954545454545454,loop:true,loopStart:0.1926077097505669,loopEnd:0.20403628117913833,attackEnd:0,holdEnd:0,decayEnd:2},\r\n    {name:'Cabasa',baseRatio:0.5946035575013605,loop:false,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},\r\n    {name:'GuiroLong',baseRatio:0.5946035575013605,loop:false,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},\r\n    {name:'Vibraslap',baseRatio:0.8408964152537145,loop:false,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0},\r\n    {name:'Cuica',baseRatio:0.7937005259840998,loop:false,loopStart:null,loopEnd:null,attackEnd:0,holdEnd:0,decayEnd:0}\r\n  ];\r\n\r\n  /*\r\n    copy(JSON.stringify(instruments.map(function(g) {\r\n      return g.map(function(r) {\r\n        var attackTime = r[5] ? r[5][0] * 0.001 : 0;\r\n        var holdTime = r[5] ? r[5][1] * 0.001 : 0;\r\n        var decayTime = r[5] ? r[5][2] : 0;\r\n        var baseRatio = Math.pow(2, (r[2] - 69) / 12);\r\n        if (r[3] !== -1) {\r\n          var length = r[4] - r[3];\r\n          baseRatio = 22050 * Math.round(length * 440 * baseRatio / 22050) / length / 440;\r\n        }\r\n        return {\r\n          top: r[0],\r\n          name: r[1],\r\n          baseRatio: baseRatio,\r\n          loop: r[3] !== -1,\r\n          loopStart: r[3] / 22050,\r\n          loopEnd: r[4] / 22050,\r\n          attackEnd: attackTime,\r\n          holdEnd: attackTime + holdTime,\r\n          decayEnd: attackTime + holdTime + decayTime\r\n        }\r\n      })\r\n    }))\r\n  */\r\n  export const instruments: Span[][] = [\r\n    [\r\n      {top:38,name:'AcousticPiano_As3',baseRatio:0.5316313272700484,loop:true,loopStart:0.465578231292517,loopEnd:0.7733786848072562,attackEnd:0,holdEnd:0.1,decayEnd:22.1},\r\n      {top:44,name:'AcousticPiano_C4',baseRatio:0.5905141892259927,loop:true,loopStart:0.6334693877551021,loopEnd:0.8605442176870748,attackEnd:0,holdEnd:0.1,decayEnd:20.1},\r\n      {top:51,name:'AcousticPiano_G4',baseRatio:0.8843582887700535,loop:true,loopStart:0.5532879818594104,loopEnd:0.5609977324263039,attackEnd:0,holdEnd:0.08,decayEnd:18.08},\r\n      {top:62,name:'AcousticPiano_C6',baseRatio:2.3557692307692304,loop:true,loopStart:0.5914739229024943,loopEnd:0.6020861678004535,attackEnd:0,holdEnd:0.08,decayEnd:16.08},\r\n      {top:70,name:'AcousticPiano_F5',baseRatio:1.5776515151515151,loop:true,loopStart:0.5634920634920635,loopEnd:0.5879818594104308,attackEnd:0,holdEnd:0.04,decayEnd:14.04},\r\n      {top:77,name:'AcousticPiano_Ds6',baseRatio:2.800762112139358,loop:true,loopStart:0.560907029478458,loopEnd:0.5836281179138322,attackEnd:0,holdEnd:0.02,decayEnd:10.02},\r\n      {top:85,name:'AcousticPiano_Ds6',baseRatio:2.800762112139358,loop:true,loopStart:0.560907029478458,loopEnd:0.5836281179138322,attackEnd:0,holdEnd:0,decayEnd:8},\r\n      {top:90,name:'AcousticPiano_Ds6',baseRatio:2.800762112139358,loop:true,loopStart:0.560907029478458,loopEnd:0.5836281179138322,attackEnd:0,holdEnd:0,decayEnd:6},\r\n      {top:96,name:'AcousticPiano_D7',baseRatio:5.275119617224881,loop:true,loopStart:0.3380498866213152,loopEnd:0.34494331065759637,attackEnd:0,holdEnd:0,decayEnd:3},\r\n      {top:128,name:'AcousticPiano_D7',baseRatio:5.275119617224881,loop:true,loopStart:0.3380498866213152,loopEnd:0.34494331065759637,attackEnd:0,holdEnd:0,decayEnd:2}\r\n    ], [\r\n      {top:48,name:'ElectricPiano_C2',baseRatio:0.14870515241435123,loop:true,loopStart:0.6956009070294784,loopEnd:0.7873015873015873,attackEnd:0,holdEnd:0.08,decayEnd:10.08},\r\n      {top:74,name:'ElectricPiano_C4',baseRatio:0.5945685670261941,loop:true,loopStart:0.5181859410430839,loopEnd:0.5449433106575964,attackEnd:0,holdEnd:0.04,decayEnd:8.04},\r\n      {top:128,name:'ElectricPiano_C4',baseRatio:0.5945685670261941,loop:true,loopStart:0.5181859410430839,loopEnd:0.5449433106575964,attackEnd:0,holdEnd:0,decayEnd:6}\r\n    ], [\r\n      {top:128,name:'Organ_G2',baseRatio:0.22283731584620914,loop:true,loopStart:0.05922902494331066,loopEnd:0.1510204081632653,attackEnd:0,holdEnd:0,decayEnd:0}\r\n    ],[{top:40,name:'AcousticGuitar_F3',baseRatio:0.3977272727272727,loop:true,loopStart:1.6628117913832199,loopEnd:1.6685260770975057,attackEnd:0,holdEnd:0,decayEnd:15},\r\n      {top:56,name:'AcousticGuitar_F3',baseRatio:0.3977272727272727,loop:true,loopStart:1.6628117913832199,loopEnd:1.6685260770975057,attackEnd:0,holdEnd:0,decayEnd:13.5},\r\n      {top:60,name:'AcousticGuitar_F3',baseRatio:0.3977272727272727,loop:true,loopStart:1.6628117913832199,loopEnd:1.6685260770975057,attackEnd:0,holdEnd:0,decayEnd:12},\r\n      {top:67,name:'AcousticGuitar_F3',baseRatio:0.3977272727272727,loop:true,loopStart:1.6628117913832199,loopEnd:1.6685260770975057,attackEnd:0,holdEnd:0,decayEnd:8.5},\r\n      {top:72,name:'AcousticGuitar_F3',baseRatio:0.3977272727272727,loop:true,loopStart:1.6628117913832199,loopEnd:1.6685260770975057,attackEnd:0,holdEnd:0,decayEnd:7},\r\n      {top:83,name:'AcousticGuitar_F3',baseRatio:0.3977272727272727,loop:true,loopStart:1.6628117913832199,loopEnd:1.6685260770975057,attackEnd:0,holdEnd:0,decayEnd:5.5},\r\n      {top:128,name:'AcousticGuitar_F3',baseRatio:0.3977272727272727,loop:true,loopStart:1.6628117913832199,loopEnd:1.6685260770975057,attackEnd:0,holdEnd:0,decayEnd:4.5}\r\n    ], [\r\n      {top:40,name:'ElectricGuitar_F3',baseRatio:0.39615522817103843,loop:true,loopStart:1.5733333333333333,loopEnd:1.5848072562358,attackEnd:0,holdEnd:0,decayEnd:15},\r\n      {top:56,name:'ElectricGuitar_F3',baseRatio:0.39615522817103843,loop:true,loopStart:1.5733333333333333,loopEnd:1.5848072562358277,attackEnd:0,holdEnd:0,decayEnd:13.5},\r\n      {top:60,name:'ElectricGuitar_F3',baseRatio:0.39615522817103843,loop:true,loopStart:1.5733333333333333,loopEnd:1.5848072562358277,attackEnd:0,holdEnd:0,decayEnd:12},\r\n      {top:67,name:'ElectricGuitar_F3',baseRatio:0.39615522817103843,loop:true,loopStart:1.5733333333333333,loopEnd:1.5848072562358277,attackEnd:0,holdEnd:0,decayEnd:8.5},\r\n      {top:72,name:'ElectricGuitar_F3',baseRatio:0.39615522817103843,loop:true,loopStart:1.5733333333333333,loopEnd:1.5848072562358277,attackEnd:0,holdEnd:0,decayEnd:7},\r\n      {top:83,name:'ElectricGuitar_F3',baseRatio:0.39615522817103843,loop:true,loopStart:1.5733333333333333,loopEnd:1.5848072562358277,attackEnd:0,holdEnd:0,decayEnd:5.5},\r\n      {top:128,name:'ElectricGuitar_F3',baseRatio:0.39615522817103843,loop:true,loopStart:1.5733333333333333,loopEnd:1.5848072562358277,attackEnd:0,holdEnd:0,decayEnd:4.5}\r\n    ], [\r\n      {top:34,name:'ElectricBass_G1',baseRatio:0.11111671034065712,loop:true,loopStart:1.9007709750566892,loopEnd:1.9212244897959183,attackEnd:0,holdEnd:0,decayEnd:17},\r\n      {top:48,name:'ElectricBass_G1',baseRatio:0.11111671034065712,loop:true,loopStart:1.9007709750566892,loopEnd:1.9212244897959183,attackEnd:0,holdEnd:0,decayEnd:14},\r\n      {top:64,name:'ElectricBass_G1',baseRatio:0.11111671034065712,loop:true,loopStart:1.9007709750566892,loopEnd:1.9212244897959183,attackEnd:0,holdEnd:0,decayEnd:12},\r\n      {top:128,name:'ElectricBass_G1',baseRatio:0.11111671034065712,loop:true,loopStart:1.9007709750566892,loopEnd:1.9212244897959183,attackEnd:0,holdEnd:0,decayEnd:10}\r\n    ], [\r\n      {top:38,name:'Pizz_G2',baseRatio:0.21979665071770335,loop:true,loopStart:0.3879365079365079,loopEnd:0.3982766439909297,attackEnd:0,holdEnd:0,decayEnd:5},\r\n      {top:45,name:'Pizz_G2',baseRatio:0.21979665071770335,loop:true,loopStart:0.3879365079365079,loopEnd:0.3982766439909297,attackEnd:0,holdEnd:0.012,decayEnd:4.012},\r\n      {top:56,name:'Pizz_A3',baseRatio:0.503654636820466,loop:true,loopStart:0.5197278911564626,loopEnd:0.5287528344671202,attackEnd:0,holdEnd:0,decayEnd:4},\r\n      {top:64,name:'Pizz_A3',baseRatio:0.503654636820466,loop:true,loopStart:0.5197278911564626,loopEnd:0.5287528344671202,attackEnd:0,holdEnd:0,decayEnd:3.2},\r\n      {top:72,name:'Pizz_E4',baseRatio:0.7479647218453188,loop:true,loopStart:0.7947845804988662,loopEnd:0.7978231292517007,attackEnd:0,holdEnd:0,decayEnd:2.8},\r\n      {top:80,name:'Pizz_E4',baseRatio:0.7479647218453188,loop:true,loopStart:0.7947845804988662,loopEnd:0.7978231292517007,attackEnd:0,holdEnd:0,decayEnd:2.2},\r\n      {top:128,name:'Pizz_E4',baseRatio:0.7479647218453188,loop:true,loopStart:0.7947845804988662,loopEnd:0.7978231292517007,attackEnd:0,holdEnd:0,decayEnd:1.5}\r\n    ], [\r\n      {top:41,name:'Cello_C2',baseRatio:0.14870515241435123,loop:true,loopStart:0.3876643990929705,loopEnd:0.40294784580498866,attackEnd:0,holdEnd:0,decayEnd:0},\r\n      {top:52,name:'Cello_As2',baseRatio:0.263755980861244,loop:true,loopStart:0.3385487528344671,loopEnd:0.35578231292517004,attackEnd:0,holdEnd:0,decayEnd:0},\r\n      {top:62,name:'Violin_D4',baseRatio:0.6664047388781432,loop:true,loopStart:0.48108843537414964,loopEnd:0.5151927437641723,attackEnd:0,holdEnd:0,decayEnd:0},\r\n      {top:75,name:'Violin_A4',baseRatio:0.987460815047022,loop:true,loopStart:0.14108843537414967,loopEnd:0.15029478458049886,attackEnd:0.07,holdEnd:0.07,decayEnd:0.07},\r\n      {top:128,name:'Violin_E5',baseRatio:1.4885238523852387,loop:true,loopStart:0.10807256235827664,loopEnd:0.1126530612244898,attackEnd:0,holdEnd:0,decayEnd:0}\r\n    ], [\r\n      {top:30,name:'BassTrombone_A2_3',baseRatio:0.24981872564125807,loop:true,loopStart:0.061541950113378686,loopEnd:0.10702947845804989,attackEnd:0,holdEnd:0,decayEnd:0},\r\n      {top:40,name:'BassTrombone_A2_2',baseRatio:0.24981872564125807,loop:true,loopStart:0.08585034013605441,loopEnd:0.13133786848072562,attackEnd:0,holdEnd:0,decayEnd:0},\r\n      {top:55,name:'Trombone_B3',baseRatio:0.5608240680183126,loop:true,loopStart:0.12,loopEnd:0.17673469387755103,attackEnd:0,holdEnd:0,decayEnd:0},\r\n      {top:88,name:'Trombone_B3',baseRatio:0.5608240680183126,loop:true,loopStart:0.12,loopEnd:0.17673469387755103,attackEnd:0.05,holdEnd:0.05,decayEnd:0.05},\r\n      {top:128,name:'Trumpet_E5',baseRatio:1.4959294436906376,loop:true,loopStart:0.1307936507936508,loopEnd:0.14294784580498865,attackEnd:0,holdEnd:0,decayEnd:0}\r\n    ], [\r\n      {top:128,name:'Clarinet_C4',baseRatio:0.5940193965517241,loop:true,loopStart:0.6594104308390023,loopEnd:0.7014965986394558,attackEnd:0,holdEnd:0,decayEnd:0}\r\n    ], [\r\n      {top:40,name:'TenorSax_C3',baseRatio:0.2971698113207547,loop:true,loopStart:0.4053968253968254,loopEnd:0.4895238095238095,attackEnd:0,holdEnd:0,decayEnd:0},\r\n      {top:50,name:'TenorSax_C3',baseRatio:0.2971698113207547,loop:true,loopStart:0.4053968253968254,loopEnd:0.4895238095238095,attackEnd:0.02,holdEnd:0.02,decayEnd:0.02},\r\n      {top:59,name:'TenorSax_C3',baseRatio:0.2971698113207547,loop:true,loopStart:0.4053968253968254,loopEnd:0.4895238095238095,attackEnd:0.04,holdEnd:0.04,decayEnd:0.04},\r\n      {top:67,name:'AltoSax_A3',baseRatio:0.49814747876378096,loop:true,loopStart:0.3875736961451247,loopEnd:0.4103854875283447,attackEnd:0,holdEnd:0,decayEnd:0},\r\n      {top:75,name:'AltoSax_A3',baseRatio:0.49814747876378096,loop:true,loopStart:0.3875736961451247,loopEnd:0.4103854875283447,attackEnd:0.02,holdEnd:0.02,decayEnd:0.02},\r\n      {top:80,name:'AltoSax_A3',baseRatio:0.49814747876378096,loop:true,loopStart:0.3875736961451247,loopEnd:0.4103854875283447,attackEnd:0.02,holdEnd:0.02,decayEnd:0.02},\r\n      {top:128,name:'AltoSax_C6',baseRatio:2.3782742681047764,loop:true,loopStart:0.05705215419501134,loopEnd:0.0838095238095238,attackEnd:0,holdEnd:0,decayEnd:0}\r\n    ], [\r\n      {top:61,name:'Flute_B5_2',baseRatio:2.255113636363636,loop:true,loopStart:0.08430839002267573,loopEnd:0.10244897959183673,attackEnd:0,holdEnd:0,decayEnd:0},\r\n      {top:128,name:'Flute_B5_1',baseRatio:2.255113636363636,loop:true,loopStart:0.10965986394557824,loopEnd:0.12780045351473923,attackEnd:0,holdEnd:0,decayEnd:0}\r\n    ], [\r\n      {top:128,name:'WoodenFlute_C5',baseRatio:1.1892952324548416,loop:true,loopStart:0.5181859410430839,loopEnd:0.7131065759637188,attackEnd:0,holdEnd:0,decayEnd:0}\r\n    ], [\r\n      {top:57,name:'Bassoon_C3',baseRatio:0.29700969827586204,loop:true,loopStart:0.11011337868480725,loopEnd:0.19428571428571428,attackEnd:0,holdEnd:0,decayEnd:0},\r\n      {top:67,name:'Bassoon_C3',baseRatio:0.29700969827586204,loop:true,loopStart:0.11011337868480725,loopEnd:0.19428571428571428,attackEnd:0.04,holdEnd:0.04,decayEnd:0.04},\r\n      {top:76,name:'Bassoon_C3',baseRatio:0.29700969827586204,loop:true,loopStart:0.11011337868480725,loopEnd:0.19428571428571428,attackEnd:0.08,holdEnd:0.08,decayEnd:0.08},\r\n      {top:84,name:'EnglishHorn_F3',baseRatio:0.39601293103448276,loop:true,loopStart:0.341859410430839,loopEnd:0.4049886621315193,attackEnd:0.04,holdEnd:0.04,decayEnd:0.04},\r\n      {top:128,name:'EnglishHorn_D4',baseRatio:0.6699684005833739,loop:true,loopStart:0.22027210884353743,loopEnd:0.23723356009070296,attackEnd:0,holdEnd:0,decayEnd:0}\r\n    ], [\r\n      {top:39,name:'Choir_F3',baseRatio:0.3968814788643197,loop:true,loopStart:0.6352380952380953,loopEnd:1.8721541950113378,attackEnd:0,holdEnd:0,decayEnd:0},\r\n      {top:50,name:'Choir_F3',baseRatio:0.3968814788643197,loop:true,loopStart:0.6352380952380953,loopEnd:1.8721541950113378,attackEnd:0.04,holdEnd:0.04,decayEnd:0.04},\r\n      {top:61,name:'Choir_F3',baseRatio:0.3968814788643197,loop:true,loopStart:0.6352380952380953,loopEnd:1.8721541950113378,attackEnd:0.06,holdEnd:0.06,decayEnd:0.06},\r\n      {top:72,name:'Choir_F4',baseRatio:0.7928898424161845,loop:true,loopStart:0.7415419501133786,loopEnd:2.1059410430839,attackEnd:0,holdEnd:0,decayEnd:0},\r\n      {top:128,name:'Choir_F5',baseRatio:1.5879576065654504,loop:true,loopStart:0.836281179138322,loopEnd:2.0585487528344673,attackEnd:0,holdEnd:0,decayEnd:0}\r\n    ], [\r\n      {top:38,name:'Vibraphone_C3',baseRatio:0.29829545454545453,loop:true,loopStart:0.2812698412698413,loopEnd:0.28888888888888886,attackEnd:0,holdEnd:0.1,decayEnd:8.1},\r\n      {top:48,name:'Vibraphone_C3',baseRatio:0.29829545454545453,loop:true,loopStart:0.2812698412698413,loopEnd:0.28888888888888886,attackEnd:0,holdEnd:0.1,decayEnd:7.6},\r\n      {top:59,name:'Vibraphone_C3',baseRatio:0.29829545454545453,loop:true,loopStart:0.2812698412698413,loopEnd:0.28888888888888886,attackEnd:0,holdEnd:0.06,decayEnd:7.06},\r\n      {top:70,name:'Vibraphone_C3',baseRatio:0.29829545454545453,loop:true,loopStart:0.2812698412698413,loopEnd:0.28888888888888886,attackEnd:0,holdEnd:0.04,decayEnd:6.04},\r\n      {top:78,name:'Vibraphone_C3',baseRatio:0.29829545454545453,loop:true,loopStart:0.2812698412698413,loopEnd:0.28888888888888886,attackEnd:0,holdEnd:0.02,decayEnd:5.02},\r\n      {top:86,name:'Vibraphone_C3',baseRatio:0.29829545454545453,loop:true,loopStart:0.2812698412698413,loopEnd:0.28888888888888886,attackEnd:0,holdEnd:0,decayEnd:4},\r\n      {top:128,name:'Vibraphone_C3',baseRatio:0.29829545454545453,loop:true,loopStart:0.2812698412698413,loopEnd:0.28888888888888886,attackEnd:0,holdEnd:0,decayEnd:3}\r\n    ], [\r\n      {top:128,name:'MusicBox_C4',baseRatio:0.5937634640241276,loop:true,loopStart:0.6475283446712018,loopEnd:0.6666666666666666,attackEnd:0,holdEnd:0,decayEnd:2}\r\n    ], [\r\n      {top:128,name:'SteelDrum_D5',baseRatio:1.3660402567543959,loop:false,loopStart:-0.000045351473922902495,loopEnd:-0.000045351473922902495,attackEnd:0,holdEnd:0,decayEnd:2}\r\n    ],[\r\n      {top:128,name:'Marimba_C4',baseRatio:0.5946035575013605,loop:false,loopStart:-0.000045351473922902495,loopEnd:-0.000045351473922902495,attackEnd:0,holdEnd:0,decayEnd:0}\r\n    ], [\r\n      {top:80,name:'SynthLead_C4',baseRatio:0.5942328422565577,loop:true,loopStart:0.006122448979591836,loopEnd:0.06349206349206349,attackEnd:0,holdEnd:0,decayEnd:0},\r\n      {top:128,name:'SynthLead_C6',baseRatio:2.3760775862068964,loop:true,loopStart:0.005623582766439909,loopEnd:0.01614512471655329,attackEnd:0,holdEnd:0,decayEnd:0}\r\n    ], [\r\n      {top:38,name:'SynthPad_A3',baseRatio:0.4999105065330231,loop:true,loopStart:0.1910204081632653,loopEnd:3.9917006802721087,attackEnd:0.05,holdEnd:0.05,decayEnd:0.05},\r\n      {top:50,name:'SynthPad_A3',baseRatio:0.4999105065330231,loop:true,loopStart:0.1910204081632653,loopEnd:3.9917006802721087,attackEnd:0.08,holdEnd:0.08,decayEnd:0.08},\r\n      {top:62,name:'SynthPad_A3',baseRatio:0.4999105065330231,loop:true,loopStart:0.1910204081632653,loopEnd:3.9917006802721087,attackEnd:0.11,holdEnd:0.11,decayEnd:0.11},\r\n      {top:74,name:'SynthPad_A3',baseRatio:0.4999105065330231,loop:true,loopStart:0.1910204081632653,loopEnd:3.9917006802721087,attackEnd:0.15,holdEnd:0.15,decayEnd:0.15},\r\n      {top:86,name:'SynthPad_A3',baseRatio:0.4999105065330231,loop:true,loopStart:0.1910204081632653,loopEnd:3.9917006802721087,attackEnd:0.2,holdEnd:0.2,decayEnd:0.2},\r\n      {top:128,name:'SynthPad_C6',baseRatio:2.3820424708835755,loop:true,loopStart:0.11678004535147392,loopEnd:0.41732426303854875,attackEnd:0,holdEnd:0,decayEnd:0}\r\n    ]\r\n  ];\r\n\r\n  const SOUNDBANK_URL = '/soundbank/';\r\n  const SOUNDBANK_FILES = {\r\n    'AcousticGuitar_F3': 'instruments/AcousticGuitar_F3_22k.wav',\r\n    'AcousticPiano_As3': 'instruments/AcousticPiano(5)_A%233_22k.wav',\r\n    'AcousticPiano_C4': 'instruments/AcousticPiano(5)_C4_22k.wav',\r\n    'AcousticPiano_G4': 'instruments/AcousticPiano(5)_G4_22k.wav',\r\n    'AcousticPiano_F5': 'instruments/AcousticPiano(5)_F5_22k.wav',\r\n    'AcousticPiano_C6': 'instruments/AcousticPiano(5)_C6_22k.wav',\r\n    'AcousticPiano_Ds6': 'instruments/AcousticPiano(5)_D%236_22k.wav',\r\n    'AcousticPiano_D7': 'instruments/AcousticPiano(5)_D7_22k.wav',\r\n    'AltoSax_A3': 'instruments/AltoSax_A3_22K.wav',\r\n    'AltoSax_C6': 'instruments/AltoSax(3)_C6_22k.wav',\r\n    'Bassoon_C3': 'instruments/Bassoon_C3_22k.wav',\r\n    'BassTrombone_A2_2': 'instruments/BassTrombone_A2(2)_22k.wav',\r\n    'BassTrombone_A2_3': 'instruments/BassTrombone_A2(3)_22k.wav',\r\n    'Cello_C2': 'instruments/Cello(3b)_C2_22k.wav',\r\n    'Cello_As2': 'instruments/Cello(3)_A%232_22k.wav',\r\n    'Choir_F3': 'instruments/Choir(4)_F3_22k.wav',\r\n    'Choir_F4': 'instruments/Choir(4)_F4_22k.wav',\r\n    'Choir_F5': 'instruments/Choir(4)_F5_22k.wav',\r\n    'Clarinet_C4': 'instruments/Clarinet_C4_22k.wav',\r\n    'ElectricBass_G1': 'instruments/ElectricBass(2)_G1_22k.wav',\r\n    'ElectricGuitar_F3': 'instruments/ElectricGuitar(2)_F3(1)_22k.wav',\r\n    'ElectricPiano_C2': 'instruments/ElectricPiano_C2_22k.wav',\r\n    'ElectricPiano_C4': 'instruments/ElectricPiano_C4_22k.wav',\r\n    'EnglishHorn_D4': 'instruments/EnglishHorn(1)_D4_22k.wav',\r\n    'EnglishHorn_F3': 'instruments/EnglishHorn(1)_F3_22k.wav',\r\n    'Flute_B5_1': 'instruments/Flute(3)_B5(1)_22k.wav',\r\n    'Flute_B5_2': 'instruments/Flute(3)_B5(2)_22k.wav',\r\n    'Marimba_C4': 'instruments/Marimba_C4_22k.wav',\r\n    'MusicBox_C4': 'instruments/MusicBox_C4_22k.wav',\r\n    'Organ_G2': 'instruments/Organ(2)_G2_22k.wav',\r\n    'Pizz_A3': 'instruments/Pizz(2)_A3_22k.wav',\r\n    'Pizz_E4': 'instruments/Pizz(2)_E4_22k.wav',\r\n    'Pizz_G2': 'instruments/Pizz(2)_G2_22k.wav',\r\n    'SteelDrum_D5': 'instruments/SteelDrum_D5_22k.wav',\r\n    'SynthLead_C4': 'instruments/SynthLead(6)_C4_22k.wav',\r\n    'SynthLead_C6': 'instruments/SynthLead(6)_C6_22k.wav',\r\n    'SynthPad_A3': 'instruments/SynthPad(2)_A3_22k.wav',\r\n    'SynthPad_C6': 'instruments/SynthPad(2)_C6_22k.wav',\r\n    'TenorSax_C3': 'instruments/TenorSax(1)_C3_22k.wav',\r\n    'Trombone_B3': 'instruments/Trombone_B3_22k.wav',\r\n    'Trumpet_E5': 'instruments/Trumpet_E5_22k.wav',\r\n    'Vibraphone_C3': 'instruments/Vibraphone_C3_22k.wav',\r\n    'Violin_D4': 'instruments/Violin(2)_D4_22K.wav',\r\n    'Violin_A4': 'instruments/Violin(3)_A4_22k.wav',\r\n    'Violin_E5': 'instruments/Violin(3b)_E5_22k.wav',\r\n    'WoodenFlute_C5': 'instruments/WoodenFlute_C5_22k.wav',\r\n    'BassDrum': 'drums/BassDrum(1b)_22k.wav',\r\n    'Bongo': 'drums/Bongo_22k.wav',\r\n    'Cabasa': 'drums/Cabasa(1)_22k.wav',\r\n    'Clap': 'drums/Clap(1)_22k.wav',\r\n    'Claves': 'drums/Claves(1)_22k.wav',\r\n    'Conga': 'drums/Conga(1)_22k.wav',\r\n    'Cowbell': 'drums/Cowbell(3)_22k.wav',\r\n    'Crash': 'drums/Crash(2)_22k.wav',\r\n    'Cuica': 'drums/Cuica(2)_22k.wav',\r\n    'GuiroLong': 'drums/GuiroLong(1)_22k.wav',\r\n    'GuiroShort': 'drums/GuiroShort(1)_22k.wav',\r\n    'HiHatClosed': 'drums/HiHatClosed(1)_22k.wav',\r\n    'HiHatOpen': 'drums/HiHatOpen(2)_22k.wav',\r\n    'HiHatPedal': 'drums/HiHatPedal(1)_22k.wav',\r\n    'Maracas': 'drums/Maracas(1)_22k.wav',\r\n    'SideStick': 'drums/SideStick(1)_22k.wav',\r\n    'SnareDrum': 'drums/SnareDrum(1)_22k.wav',\r\n    'Tambourine': 'drums/Tambourine(3)_22k.wav',\r\n    'Tom': 'drums/Tom(1)_22k.wav',\r\n    'Triangle': 'drums/Triangle(1)_22k.wav',\r\n    'Vibraslap': 'drums/Vibraslap(1)_22k.wav',\r\n    'WoodBlock': 'drums/WoodBlock(1)_22k.wav'\r\n  };\r\n  const soundbank: {[s: string]: AudioBuffer} = {};\r\n\r\n  /**\r\n   * Loads missing soundbank files, if any.\r\n   */\r\n  export function loadSB2Soundbank(hooks: P.sb2.Hooks): Promise<any> {\r\n    if (!context) return Promise.resolve();\r\n\r\n    const promises: any[] = [];\r\n    for (const name in SOUNDBANK_FILES) {\r\n      if (!soundbank[name]) {\r\n        hooks.newTask();\r\n        promises.push(loadSoundbankBuffer(name).then((v) => {\r\n          hooks.endTask();\r\n          return v;\r\n        }));\r\n      }\r\n    }\r\n\r\n    return Promise.all(promises);\r\n  }\r\n\r\n  /**\r\n   * Loads a soundbank file\r\n   */\r\n  function loadSoundbankBuffer(name: string): Promise<AudioBuffer> {\r\n    return new P.IO.ArrayBufferRequest(SOUNDBANK_URL + SOUNDBANK_FILES[name], {local: true}).load()\r\n      .then((buffer) => P.audio.decodeAudio(buffer))\r\n      .then((sound) => soundbank[name] = sound);\r\n  }\r\n\r\n  export function playSpan(span: Span, key: number, duration: number, connection: AudioNode): AudioNode {\r\n    if (!context) {\r\n      throw new Error('Cannot playSpawn without an AudioContext');\r\n    }\r\n\r\n    const buffer = soundbank[span.name];\r\n    if (!buffer) {\r\n      throw new Error('No soundbank entry named: ' + span.name);\r\n    }\r\n\r\n    const source = context.createBufferSource();\r\n    const note = context.createGain();\r\n\r\n    source.buffer = buffer;\r\n    if (source.loop = span.loop) {\r\n      source.loopStart = span.loopStart as number;\r\n      source.loopEnd = span.loopEnd as number;\r\n    }\r\n\r\n    source.connect(note);\r\n    note.connect(connection);\r\n\r\n    const time = context.currentTime;\r\n    source.playbackRate.value = Math.pow(2, (key - 69) / 12) / span.baseRatio;\r\n\r\n    const gain = note.gain;\r\n    gain.value = 0;\r\n    gain.setValueAtTime(0, time);\r\n    if (span.attackEnd < duration) {\r\n      gain.linearRampToValueAtTime(1, time + span.attackEnd);\r\n      if ((span.decayTime as any) > 0 && span.holdEnd < duration) {\r\n        gain.linearRampToValueAtTime(1, time + span.holdEnd);\r\n        if (span.decayEnd < duration) {\r\n          gain.linearRampToValueAtTime(0, time + span.decayEnd);\r\n        } else {\r\n          gain.linearRampToValueAtTime(1 - (duration - span.holdEnd) / span.decayTime!, time + duration);\r\n        }\r\n      } else {\r\n        gain.linearRampToValueAtTime(1, time + duration);\r\n      }\r\n    } else {\r\n      gain.linearRampToValueAtTime(1, time + duration);\r\n    }\r\n    gain.linearRampToValueAtTime(0, time + duration + 0.02267573696);\r\n\r\n    source.start(time);\r\n    source.stop(time + duration + 0.02267573696);\r\n    return source;\r\n  }\r\n\r\n  /**\r\n   * Connect an audio node\r\n   */\r\n  export function connectNode(node: AudioNode) {\r\n    node.connect(globalNode);\r\n  }\r\n\r\n  const ADPCM_STEPS = [\r\n    7, 8, 9, 10, 11, 12, 13, 14, 16, 17,\r\n    19, 21, 23, 25, 28, 31, 34, 37, 41, 45,\r\n    50, 55, 60, 66, 73, 80, 88, 97, 107, 118,\r\n    130, 143, 157, 173, 190, 209, 230, 253, 279, 307,\r\n    337, 371, 408, 449, 494, 544, 598, 658, 724, 796,\r\n    876, 963, 1060, 1166, 1282, 1411, 1552, 1707, 1878, 2066,\r\n    2272, 2499, 2749, 3024, 3327, 3660, 4026, 4428, 4871, 5358,\r\n    5894, 6484, 7132, 7845, 8630, 9493, 10442, 11487, 12635, 13899,\r\n    15289, 16818, 18500, 20350, 22385, 24623, 27086, 29794, 32767,\r\n  ];\r\n  const ADPCM_INDEX = [-1, -1, -1, -1, 2, 4, 6, 8, -1, -1, -1, -1, 2, 4, 6, 8];\r\n\r\n  function decodeADPCMAudio(ab: ArrayBuffer, cb) {\r\n    var dv = new DataView(ab);\r\n    if (dv.getUint32(0) !== 0x52494646 || dv.getUint32(8) !== 0x57415645) {\r\n      return cb(new Error('Unrecognized audio format'));\r\n    }\r\n\r\n    var blocks: ObjectMap<number> = {};\r\n    var i = 12, l = dv.byteLength - 8;\r\n    while (i < l) {\r\n      blocks[String.fromCharCode(\r\n        dv.getUint8(i),\r\n        dv.getUint8(i + 1),\r\n        dv.getUint8(i + 2),\r\n        dv.getUint8(i + 3))] = i;\r\n      i += 8 + dv.getUint32(i + 4, true);\r\n    }\r\n\r\n    var format        = dv.getUint16(20, true);\r\n    var channels      = dv.getUint16(22, true);\r\n    var sampleRate    = dv.getUint32(24, true);\r\n    var byteRate      = dv.getUint32(28, true);\r\n    var blockAlign    = dv.getUint16(32, true);\r\n    var bitsPerSample = dv.getUint16(34, true);\r\n\r\n    if (format === 17) {\r\n      var samplesPerBlock = dv.getUint16(38, true);\r\n      var blockSize = ((samplesPerBlock - 1) / 2) + 4;\r\n\r\n      var frameCount = dv.getUint32(blocks.fact + 8, true);\r\n\r\n      var buffer = context!.createBuffer(1, frameCount, sampleRate);\r\n      var channel = buffer.getChannelData(0);\r\n\r\n      var sample, index = 0;\r\n      var step, code, delta;\r\n      var lastByte = -1;\r\n\r\n      var offset = blocks.data + 8;\r\n      i = offset;\r\n      var j = 0;\r\n      while (true) {\r\n        if ((((i - offset) % blockSize) == 0) && (lastByte < 0)) {\r\n          if (i >= dv.byteLength) break;\r\n          sample = dv.getInt16(i, true); i += 2;\r\n          index = dv.getUint8(i); i += 1;\r\n          i++;\r\n          if (index > 88) index = 88;\r\n          channel[j++] = sample / 32767;\r\n        } else {\r\n          if (lastByte < 0) {\r\n            if (i >= dv.byteLength) break;\r\n            lastByte = dv.getUint8(i); i += 1;\r\n            code = lastByte & 0xf;\r\n          } else {\r\n            code = (lastByte >> 4) & 0xf;\r\n            lastByte = -1;\r\n          }\r\n          step = ADPCM_STEPS[index];\r\n          delta = 0;\r\n          if (code & 4) delta += step;\r\n          if (code & 2) delta += step >> 1;\r\n          if (code & 1) delta += step >> 2;\r\n          delta += step >> 3;\r\n          index += ADPCM_INDEX[code];\r\n          if (index > 88) index = 88;\r\n          if (index < 0) index = 0;\r\n          sample += (code & 8) ? -delta : delta;\r\n          if (sample > 32767) sample = 32767;\r\n          if (sample < -32768) sample = -32768;\r\n          channel[j++] = sample / 32768;\r\n        }\r\n      }\r\n      return cb(null, buffer);\r\n    }\r\n    cb(new Error('Unrecognized WAV format ' + format));\r\n  }\r\n\r\n  export function decodeAudio(ab: ArrayBuffer): Promise<AudioBuffer> {\r\n    if (!context) {\r\n      return Promise.reject('No audio context');\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n      decodeADPCMAudio(ab, function(err1: any, buffer: AudioBuffer) {\r\n        if (buffer) {\r\n          resolve(buffer);\r\n          return;\r\n        }\r\n\r\n        // Hope that the audio context will know what to do\r\n        audio.context!.decodeAudioData(ab, function(buffer) {\r\n          resolve(buffer);\r\n        }, function(err2) {\r\n          reject(`Could not decode audio: ${err1} | ${err2}`);\r\n        });\r\n      });\r\n    });\r\n  }\r\n}\r\n","/// <reference path=\"phosphorus.ts\" />\r\n\r\nnamespace P.m3 {\r\n  // Most of this is heavily based on:\r\n  // https://webglfundamentals.org/webgl/lessons/webgl-2d-matrices.html\r\n  // Eventually I want to move this to the shader itself.\r\n\r\n  export type Matrix3 = [\r\n    number, number, number,\r\n    number, number, number,\r\n    number, number, number\r\n  ];\r\n\r\n  /**\r\n   * Multiplies two 3x3 matrices together\r\n   * @param out The first matrix. The result will be stored here.\r\n   * @param other The second matrix.\r\n   */\r\n  export function multiply(out: Matrix3, other: Matrix3) {\r\n    const a0 = out[0];\r\n    const a1 = out[1];\r\n    const a2 = out[2];\r\n    const a3 = out[3];\r\n    const a4 = out[4];\r\n    const a5 = out[5];\r\n    const a6 = out[6];\r\n    const a7 = out[7];\r\n    const a8 = out[8];\r\n    const b0 = other[0];\r\n    const b1 = other[1];\r\n    const b2 = other[2];\r\n    const b3 = other[3];\r\n    const b4 = other[4];\r\n    const b5 = other[5];\r\n    const b6 = other[6];\r\n    const b7 = other[7];\r\n    const b8 = other[8];\r\n    out[0] = b0 * a0 + b1 * a3 + b2 * a6;\r\n    out[1] = b0 * a1 + b1 * a4 + b2 * a7;\r\n    out[2] = b0 * a2 + b1 * a5 + b2 * a8;\r\n    out[3] = b3 * a0 + b4 * a3 + b5 * a6;\r\n    out[4] = b3 * a1 + b4 * a4 + b5 * a7;\r\n    out[5] = b3 * a2 + b4 * a5 + b5 * a8;\r\n    out[6] = b6 * a0 + b7 * a3 + b8 * a6;\r\n    out[7] = b6 * a1 + b7 * a4 + b8 * a7;\r\n    out[8] = b6 * a2 + b7 * a5 + b8 * a8;\r\n  }\r\n\r\n  export function translation(x: number, y: number): Matrix3 {\r\n    return [\r\n      1, 0, 0,\r\n      0, 1, 0,\r\n      x, y, 1,\r\n    ];\r\n  }\r\n\r\n  export function rotation(degrees: number): Matrix3 {\r\n    const radians = degrees * Math.PI / 180;\r\n    const cos = Math.cos(radians);\r\n    const sin = Math.sin(radians);\r\n    return [\r\n      cos, -sin, 0,\r\n      sin, cos, 0,\r\n      0, 0, 1,\r\n    ];\r\n  }\r\n\r\n  export function scaling(x: number, y: number): Matrix3 {\r\n    return [\r\n      x, 0, 0,\r\n      0, y, 0,\r\n      0, 0, 1,\r\n    ];\r\n  }\r\n\r\n  export function projection(width: number, height: number): Matrix3 {\r\n    return [\r\n      2 / width, 0, 0,\r\n      0, -2 / height, 0,\r\n      -1, 1, 1,\r\n    ];\r\n  }\r\n}\r\n","/// <reference path=\"phosphorus.ts\" />\r\n/// <reference path=\"matrix.ts\" />\r\n\r\nnamespace P.renderer {\r\n  // Import aliases\r\n  import RotationStyle = P.core.RotationStyle;\r\n\r\n  export interface SpriteRenderer {\r\n    canvas: HTMLCanvasElement;\r\n    /**\r\n     * Draws a Sprite or Stage on this renderer\r\n     */\r\n    drawChild(child: P.core.Base): void;\r\n  }\r\n\r\n  export interface ProjectRenderer extends SpriteRenderer {\r\n    /**\r\n     * The stage that this renderer is used by.\r\n     * This renderer must only be used by this stage and with sprites within this stage.\r\n     */\r\n    stage: P.core.Stage;\r\n    /**\r\n     * Reset and draw a new frame.\r\n     */\r\n    drawFrame(): void;\r\n    /**\r\n     * Initialize this renderer and append its canvas(es) to a given root node.\r\n     */\r\n    init(root: HTMLElement): void;\r\n    /**\r\n     * Called when the filters on the stage have changed.\r\n     */\r\n    onStageFiltersChanged(): void;\r\n    /**\r\n     * Asks this renderer to resize itself.\r\n     * Renderer may choose what to resize and when.\r\n     */\r\n    resize(scale: number): void;\r\n    /**\r\n     * Draws a line on the pen canvas\r\n     * @param color Color of the line\r\n     * @param size Width of the line\r\n     * @param x Starting X coordinate in the Scratch coordinate grid\r\n     * @param y Starting Y coordinate in the Scratch coordinate grid\r\n     * @param x2 Ending X coordinate in the Scratch coordinate grid\r\n     * @param y2 Starting Y coordinate in the Scratch coordinate grid\r\n     */\r\n    penLine(color: P.core.PenColor, size: number, x: number, y: number, x2: number, y2: number): void;\r\n    /**\r\n     * Draws a circular dot on the pen layer\r\n     * @param color Color of the dot\r\n     * @param size Diameter of the circle\r\n     * @param x Central X coordinate in the Scratch coordinate grid\r\n     * @param y Central Y coordinate in the Scratch coordinate grid\r\n     */\r\n    penDot(color: P.core.PenColor, size: number, x: number, y: number): void;\r\n    /**\r\n     * Stamp a Sprite on the pen layer\r\n     */\r\n    penStamp(sprite: P.core.Base): void;\r\n    /**\r\n     * Clear the pen layer\r\n     */\r\n    penClear(): void;\r\n    /**\r\n     * Determines if a Sprite is intersecting a point\r\n     * @param sprite The sprite\r\n     * @param x X coordinate in the Scratch coordinate grid\r\n     * @param y Y coordinate in the Scratch coordinate grid\r\n     */\r\n    spriteTouchesPoint(sprite: P.core.Sprite, x: number, y: number): boolean;\r\n    /**\r\n     * Determines if a Sprite is touching another Sprite\r\n     * @param spriteA The first sprite\r\n     * @param spriteB Other sprites to test for collision\r\n     */\r\n    spritesIntersect(spriteA: P.core.Base, otherSprites: P.core.Base[]): boolean;\r\n    /**\r\n     * Determines if a Sprite is touching a color\r\n     * @param sprite The sprite\r\n     * @param color The RGB color, in number form.\r\n     */\r\n    spriteTouchesColor(sprite: P.core.Base, color: number): boolean;\r\n    /**\r\n     * Determines if a color from one object is touching a color\r\n     * @param sprite The sprite\r\n     * @param spriteColor The color on the Sprite\r\n     * @param otherColor The color on the rest of the stage\r\n     */\r\n    spriteColorTouchesColor(sprite: P.core.Base, spriteColor: number, otherColor: number): boolean;\r\n  }\r\n\r\n  // HELPERS\r\n\r\n  /**\r\n   * Create an HTML canvas with any type of context.\r\n   */\r\n  function createCanvas() {\r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = 480;\r\n    canvas.height = 360;\r\n    return canvas;\r\n  }\r\n\r\n  /**\r\n   * Create an HTML canvas with a 2d context.\r\n   * Throws an error if a context cannot be obtained.\r\n   */\r\n  function create2dCanvas(): { canvas: HTMLCanvasElement, ctx: CanvasRenderingContext2D } {\r\n    const canvas = createCanvas();\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx) {\r\n      throw new Error('Cannot get 2d rendering context in create2dCanvas');\r\n    }\r\n    ctx.imageSmoothingEnabled = false;\r\n    return { canvas, ctx };\r\n  }\r\n\r\n  /**\r\n   * Determines if a Sprite's filters will change its shape.\r\n   * @param filters The Sprite's filters\r\n   */\r\n  function filtersAffectShape(filters: P.core.Filters): boolean {\r\n    return filters.fisheye !== 0 ||\r\n      filters.mosaic !== 0 ||\r\n      filters.pixelate !== 0 ||\r\n      filters.whirl !== 0;\r\n  }\r\n\r\n  // WEBGL\r\n\r\n  // Used in the WebGL renderer for inverting sprites.\r\n  const horizontalInvertMatrix = P.m3.scaling(-1, 1);\r\n\r\n  // Extension of Costume to store the webgl textures\r\n  interface WebGLCostume extends P.core.Costume {\r\n    _glTexture: WebGLTexture;\r\n  }\r\n\r\n  class ShaderVariant {\r\n    protected uniformLocations: {[name: string]: WebGLUniformLocation} = {};\r\n    protected attributeLocations: {[name: string]: number} = {};\r\n\r\n    constructor(public gl: WebGLRenderingContext, public program: WebGLProgram) {\r\n      // When loaded we'll lookup all of our attributes and uniforms, and store\r\n      // their locations locally.\r\n      // WebGL can tell us how many there are, so we can do lookups.\r\n\r\n      const activeUniforms: number = gl.getProgramParameter(program, this.gl.ACTIVE_UNIFORMS);\r\n      for (let index = 0; index < activeUniforms; index++) {\r\n        const info = gl.getActiveUniform(program, index);\r\n        if (!info) {\r\n          throw new Error('uniform at index ' + index + ' does not exist');\r\n        }\r\n        const name = info.name;\r\n        const location = gl.getUniformLocation(program, name);\r\n        if (!location) {\r\n          throw new Error('uniform named ' + name + ' does not exist');\r\n        }\r\n        this.uniformLocations[name] = location;\r\n      }\r\n\r\n      const activeAttributes: number = gl.getProgramParameter(program, this.gl.ACTIVE_ATTRIBUTES);\r\n      for (let index = 0; index < activeAttributes; index++) {\r\n        const info = gl.getActiveAttrib(program, index);\r\n        if (!info) {\r\n          throw new Error('attribute at index ' + index + ' does not exist');\r\n        }\r\n        // Attribute index is location, I believe.\r\n        this.attributeLocations[info.name] = index;\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Sets a uniform to a float\r\n     * @param name The name of the uniform\r\n     * @param value A float\r\n     */\r\n    uniform1f(name: string, value: number) {\r\n      const location = this.getUniform(name);\r\n      this.gl.uniform1f(location, value);\r\n    }\r\n\r\n    /**\r\n     * Sets a uniform to a vec2\r\n     * @param name The name of the uniform\r\n     * @param a The first value\r\n     * @param b The second value\r\n     */\r\n    uniform2f(name: string, a: number, b: number) {\r\n      const location = this.getUniform(name);\r\n      this.gl.uniform2f(location, a, b);\r\n    }\r\n\r\n    /**\r\n     * Sets a uniform to a vec4\r\n     * @param name The name of the uniform\r\n     * @param a The first value\r\n     * @param b The second value\r\n     */\r\n    uniform4f(name: string, a: number, b: number, c: number, d: number) {\r\n      const location = this.getUniform(name);\r\n      this.gl.uniform4f(location, a, b, c, d);\r\n    }\r\n\r\n    /**\r\n     * Sets a uniform to a 3x3 matrix\r\n     * @param name The name of the uniform\r\n     * @param value The 3x3 matrix\r\n     */\r\n    uniformMatrix3(name: string, value: P.m3.Matrix3) {\r\n      const location = this.getUniform(name);\r\n      this.gl.uniformMatrix3fv(location, false, value);\r\n    }\r\n\r\n    /**\r\n     * Determines if this shader variant contains a uniform.\r\n     * @param name The name of the uniform\r\n     */\r\n    hasUniform(name: string) {\r\n      return this.uniformLocations.hasOwnProperty(name);\r\n    }\r\n\r\n    /**\r\n     * Determines the location of a uniform, or errors if it does not exist.\r\n     * @param name The name of the uniform\r\n     */\r\n    getUniform(name: string): WebGLUniformLocation {\r\n      if (!this.hasUniform(name)) {\r\n        throw new Error('uniform of name ' + name + ' does not exist');\r\n      }\r\n      return this.uniformLocations[name];\r\n    }\r\n\r\n    /**\r\n     * Binds a buffer to an attribute\r\n     * @param name The name of the attribute\r\n     * @param value The WebGL buffer to bind\r\n     */\r\n    attributeBuffer(name: string, value: WebGLBuffer) {\r\n      if (!this.hasAttribute(name)) {\r\n        throw new Error('attribute of name ' + name + ' does not exist');\r\n      }\r\n      const location = this.attributeLocations[name];\r\n      this.gl.enableVertexAttribArray(location);\r\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, value);\r\n      this.gl.vertexAttribPointer(location, 2, this.gl.FLOAT, false, 0, 0);\r\n    }\r\n\r\n    /**\r\n     * Determines if this shader contains an attribute\r\n     * @param name The name of the attribute\r\n     */\r\n    hasAttribute(name: string) {\r\n      return this.attributeLocations.hasOwnProperty(name);\r\n    }\r\n\r\n    /**\r\n     * Determines the location of an attribute, and errors if it does not exist.\r\n     * @param name The name of the attribute\r\n     */\r\n    getAttribute(name: string) {\r\n      if (!this.hasAttribute(name)) {\r\n        throw new Error('attribute of name ' + name + ' does not exist');\r\n      }\r\n      return this.attributeLocations[name];\r\n    }\r\n  }\r\n\r\n  export class WebGLSpriteRenderer implements SpriteRenderer {\r\n    public static vertexShader: string = `\r\n    attribute vec2 a_position;\r\n\r\n    uniform mat3 u_matrix;\r\n\r\n    varying vec2 v_texcoord;\r\n\r\n    void main() {\r\n      gl_Position = vec4((u_matrix * vec3(a_position, 1)).xy, 0, 1);\r\n      v_texcoord = a_position;\r\n    }\r\n    `;\r\n\r\n    public static fragmentShader: string = `\r\n    precision mediump float;\r\n\r\n    varying vec2 v_texcoord;\r\n\r\n    uniform sampler2D u_texture;\r\n    #ifndef ONLY_SHAPE_FILTERS\r\n      uniform float u_brightness;\r\n      uniform float u_color;\r\n    #endif\r\n    uniform float u_opacity;\r\n    uniform float u_mosaic;\r\n    uniform float u_whirl;\r\n    uniform float u_fisheye;\r\n    uniform float u_pixelate;\r\n    uniform vec2 u_size;\r\n\r\n    const float minimumAlpha = 1.0 / 250.0;\r\n    const vec2 vecCenter = vec2(0.5, 0.5);\r\n\r\n    // http://lolengine.net/blog/2013/07/27/rgb-to-hsv-in-glsl\r\n    vec3 rgb2hsv(vec3 c) {\r\n      vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\r\n      vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\r\n      vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\r\n      float d = q.x - min(q.w, q.y);\r\n      float e = 1.0e-10;\r\n      return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\r\n    }\r\n    vec3 hsv2rgb(vec3 c) {\r\n      vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\r\n      vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\r\n      return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\r\n    }\r\n\r\n    void main() {\r\n      // varyings cannot be modified\r\n      vec2 texcoord = v_texcoord;\r\n\r\n      // apply mosaic\r\n      {\r\n        texcoord = fract(u_mosaic * v_texcoord);\r\n      }\r\n\r\n      // apply pixelate\r\n      if (u_pixelate != 0.0) {\r\n        vec2 texelSize = u_size / u_pixelate;\r\n        texcoord = (floor(texcoord * texelSize) + vecCenter) / texelSize;\r\n      }\r\n\r\n      // apply whirl\r\n      {\r\n        const float radius = 0.5;\r\n        vec2 offset = texcoord - vecCenter;\r\n        float offsetMagnitude = length(offset);\r\n        float whirlFactor = max(1.0 - (offsetMagnitude / radius), 0.0);\r\n        float whirlActual = u_whirl * whirlFactor * whirlFactor;\r\n        float sinWhirl = sin(whirlActual);\r\n        float cosWhirl = cos(whirlActual);\r\n        mat2 rotationMatrix = mat2(\r\n          cosWhirl, -sinWhirl,\r\n          sinWhirl, cosWhirl\r\n        );\r\n        texcoord = rotationMatrix * offset + vecCenter;\r\n      }\r\n\r\n      // apply fisheye\r\n      {\r\n        vec2 vec = (texcoord - vecCenter) / vecCenter;\r\n        float vecLength = length(vec);\r\n        float r = pow(min(vecLength, 1.0), u_fisheye) * max(1.0, vecLength);\r\n        vec2 unit = vec / vecLength;\r\n        texcoord = vecCenter + r * unit * vecCenter;\r\n      }\r\n\r\n      vec4 color = texture2D(u_texture, texcoord);\r\n      if (color.a < minimumAlpha) {\r\n        discard;\r\n      }\r\n\r\n      // apply ghost effect\r\n      color.a *= u_opacity;\r\n\r\n      // apply brightness effect\r\n      #ifndef ONLY_SHAPE_FILTERS\r\n        color.rgb = clamp(color.rgb + vec3(u_brightness), 0.0, 1.0);\r\n      #endif\r\n\r\n      // The color effect is rather complicated. See:\r\n      // https://github.com/LLK/scratch-render/blob/008dc5b15b30961301e6b9a08628a063b967a001/src/shaders/sprite.frag#L175-L189\r\n      #ifndef ONLY_SHAPE_FILTERS\r\n      if (u_color != 0.0) {\r\n        vec3 hsv = rgb2hsv(color.rgb);\r\n        // hsv.x = hue\r\n        // hsv.y = saturation\r\n        // hsv.z = value\r\n\r\n        // scratch forces all colors to have some minimal amount saturation so there is a visual change\r\n        const float minValue = 0.11 / 2.0;\r\n        const float minSaturation = 0.09;\r\n        if (hsv.z < minValue) hsv = vec3(0.0, 1.0, minValue);\r\n        else if (hsv.y < minSaturation) hsv = vec3(0.0, minSaturation, hsv.z);\r\n\r\n        hsv.x = mod(hsv.x + u_color, 1.0);\r\n        if (hsv.x < 0.0) hsv.x += 1.0;\r\n        color = vec4(hsv2rgb(hsv), color.a);\r\n      }\r\n      #endif\r\n\r\n      gl_FragColor = color;\r\n    }\r\n    `;\r\n\r\n    public canvas: HTMLCanvasElement;\r\n    public gl: WebGLRenderingContext;\r\n\r\n    protected quadBuffer: WebGLBuffer;\r\n    protected globalScaleMatrix: P.m3.Matrix3 = P.m3.scaling(1, 1);\r\n    protected renderingShader: ShaderVariant;\r\n    private boundFramebuffer: WebGLFramebuffer | null = null;\r\n\r\n    constructor() {\r\n      this.canvas = createCanvas();\r\n      const gl = this.canvas.getContext('webgl', {\r\n        alpha: false,\r\n        antialias: false,\r\n      });\r\n      if (!gl) {\r\n        throw new Error('cannot get webgl rendering context');\r\n      }\r\n      this.gl = gl;\r\n\r\n      this.renderingShader = this.compileVariant([]);\r\n\r\n      // Enable blending\r\n      this.gl.enable(this.gl.BLEND);\r\n      this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n      // Create the quad buffer that we'll use for positioning and texture coordinates later.\r\n      this.quadBuffer = this.gl.createBuffer()!;\r\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.quadBuffer);\r\n      this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array([\r\n        0, 0,\r\n        0, 1,\r\n        1, 0,\r\n        1, 0,\r\n        0, 1,\r\n        1, 1,\r\n      ]), this.gl.STATIC_DRAW);\r\n    }\r\n\r\n    /**\r\n     * Compile a single shader\r\n     * @param type The type of the shader. Use this.gl.VERTEX_SHADER or FRAGMENT_SHADER\r\n     * @param source The string source of the shader.\r\n     * @param definitions Flags to define in the shader source.\r\n     */\r\n    protected compileShader(type: number, source: string, definitions?: string[]): WebGLShader {\r\n      const addDefinition = (def: string) => {\r\n        source = '#define ' + def + '\\n' + source;\r\n      }\r\n      if (definitions) {\r\n        for (const def of definitions) {\r\n          addDefinition(def);\r\n        }\r\n      }\r\n\r\n      const shader = this.gl.createShader(type);\r\n      if (!shader) {\r\n        throw new Error('Cannot create shader');\r\n      }\r\n\r\n      this.gl.shaderSource(shader, source);\r\n      this.gl.compileShader(shader);\r\n\r\n      if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {\r\n        const error = this.gl.getShaderInfoLog(shader);\r\n        this.gl.deleteShader(shader);\r\n        throw new Error('Shader compilation error: ' + error);\r\n      }\r\n\r\n      return shader;\r\n    }\r\n\r\n    /**\r\n     * Compiles a vertex shader and fragment shader into a program.\r\n     * @param vs Vertex shader source.\r\n     * @param fs Fragment shader source.\r\n     * @param definitions Things to define in the source of both shaders.\r\n     */\r\n    protected compileProgram(vs: string, fs: string, definitions?: string[]): WebGLProgram {\r\n      const vertexShader = this.compileShader(this.gl.VERTEX_SHADER, vs, definitions);\r\n      const fragmentShader = this.compileShader(this.gl.FRAGMENT_SHADER, fs, definitions);\r\n\r\n      const program = this.gl.createProgram();\r\n      if (!program) {\r\n        throw new Error('Cannot create program');\r\n      }\r\n      this.gl.attachShader(program, vertexShader);\r\n      this.gl.attachShader(program, fragmentShader);\r\n      this.gl.linkProgram(program);\r\n\r\n      if (!this.gl.getProgramParameter(program, this.gl.LINK_STATUS)) {\r\n        const error = this.gl.getProgramInfoLog(program);\r\n        this.gl.deleteProgram(program);\r\n        throw new Error('Program compilation error: ' + error);\r\n      }\r\n\r\n      return program;\r\n    }\r\n\r\n    /**\r\n     * Compiles a variant of the default shader.\r\n     * @param definitions Things to define in the shader\r\n     */\r\n    protected compileVariant(definitions: string[]): ShaderVariant {\r\n      const program = this.compileProgram(WebGLSpriteRenderer.vertexShader, WebGLSpriteRenderer.fragmentShader, definitions);\r\n      return new ShaderVariant(this.gl, program);\r\n    }\r\n\r\n    /**\r\n     * Creates a new texture without inserting data.\r\n     * Texture will be bound to TEXTURE_2D, so you can texImage2D() on it\r\n     */\r\n    protected createTexture(): WebGLTexture {\r\n      const texture = this.gl.createTexture();\r\n      if (!texture) {\r\n        throw new Error('Cannot create texture');\r\n      }\r\n      this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\r\n\r\n      this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE);\r\n      this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE);\r\n      this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR);\r\n\r\n      return texture;\r\n    }\r\n\r\n    /**\r\n     * Converts a canvas to a WebGL texture\r\n     * @param canvas The source canvas. Dimensions do not matter.\r\n     */\r\n    protected convertToTexture(canvas: HTMLImageElement | HTMLCanvasElement): WebGLTexture {\r\n      const texture = this.createTexture();\r\n      this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.gl.RGBA, this.gl.UNSIGNED_BYTE, canvas);\r\n      return texture;\r\n    }\r\n\r\n    /**\r\n     * Creates a new framebuffer\r\n     */\r\n    protected createFramebuffer(): WebGLFramebuffer {\r\n      const frameBuffer = this.gl.createFramebuffer();\r\n      if (!frameBuffer) {\r\n        throw new Error('cannot create frame buffer');\r\n      }\r\n      return frameBuffer;\r\n    }\r\n\r\n    protected bindFramebuffer(buffer: WebGLFramebuffer | null) {\r\n      if (buffer === this.boundFramebuffer) {\r\n        return;\r\n      }\r\n      this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, buffer);\r\n      this.boundFramebuffer = buffer;\r\n    }\r\n\r\n    /**\r\n     * Reset and resize this renderer.\r\n     */\r\n    reset(scale: number) {\r\n      this.canvas.width = scale * P.config.scale * 480;\r\n      this.canvas.height = scale * P.config.scale * 360;\r\n      this.resetFramebuffer(scale);\r\n    }\r\n\r\n    /**\r\n     * Resizes and resets the current framebuffer\r\n     * @param scale Zoom level\r\n     */\r\n    protected resetFramebuffer(scale: number) {\r\n      this.gl.viewport(0, 0, 480 * scale, 360 * scale);\r\n      // the first element of the matrix is the x-scale, so we can use that to only recreate the matrix when needed\r\n      if (this.globalScaleMatrix[0] !== scale) {\r\n        this.globalScaleMatrix = P.m3.scaling(scale, scale);\r\n      }\r\n\r\n      // Clear the canvas\r\n      this.gl.clearColor(255, 255, 255, 0);\r\n      this.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n    }\r\n\r\n    drawChild(child: P.core.Base) {\r\n      this._drawChild(child, this.renderingShader);\r\n    }\r\n\r\n    /**\r\n     * Real implementation of drawChild()\r\n     * @param child The child to draw\r\n     */\r\n    protected _drawChild(child: P.core.Base, shader: ShaderVariant) {\r\n      this.gl.useProgram(shader.program);\r\n\r\n      // Create the texture if it doesn't already exist.\r\n      // We'll create a texture only once for performance.\r\n      const costume = child.costumes[child.currentCostumeIndex] as WebGLCostume;\r\n      if (!costume._glTexture) {\r\n        const texture = this.convertToTexture(costume.get(1));\r\n        costume._glTexture = texture;\r\n      }\r\n      this.gl.bindTexture(this.gl.TEXTURE_2D, costume._glTexture);\r\n\r\n      shader.attributeBuffer('a_position', this.quadBuffer);\r\n\r\n      // TODO: do this in the shader if its possible/faster\r\n      const matrix = P.m3.projection(this.canvas.width, this.canvas.height);\r\n      P.m3.multiply(matrix, this.globalScaleMatrix);\r\n      P.m3.multiply(matrix, P.m3.translation(240 + child.scratchX | 0, 180 - child.scratchY | 0));\r\n      if (P.core.isSprite(child)) {\r\n        if (child.rotationStyle === RotationStyle.Normal && child.direction !== 90) {\r\n          P.m3.multiply(matrix, P.m3.rotation(90 - child.direction));\r\n        } else if (child.rotationStyle === RotationStyle.LeftRight && child.direction < 0) {\r\n          P.m3.multiply(matrix, horizontalInvertMatrix);\r\n        }\r\n        if (child.scale !== 1) {\r\n          P.m3.multiply(matrix, P.m3.scaling(child.scale, child.scale));\r\n        }\r\n      }\r\n      if (costume.scale !== 1) {\r\n        P.m3.multiply(matrix, P.m3.scaling(costume.scale, costume.scale));\r\n      }\r\n      P.m3.multiply(matrix, P.m3.translation(-costume.rotationCenterX, -costume.rotationCenterY));\r\n      P.m3.multiply(matrix, P.m3.scaling(costume.width, costume.height));\r\n\r\n      shader.uniformMatrix3('u_matrix', matrix);\r\n\r\n      // Effects\r\n      if (shader.hasUniform('u_opacity')) {\r\n        shader.uniform1f('u_opacity', 1 - child.filters.ghost / 100);\r\n      }\r\n      if (shader.hasUniform('u_brightness')) {\r\n        shader.uniform1f('u_brightness', child.filters.brightness / 100);\r\n      }\r\n      if (shader.hasUniform('u_color')) {\r\n        shader.uniform1f('u_color', child.filters.color / 200);\r\n      }\r\n      if (shader.hasUniform('u_mosaic')) {\r\n        const mosaic = Math.round((Math.abs(child.filters.mosaic) + 10) / 10);\r\n        shader.uniform1f('u_mosaic', P.utils.clamp(mosaic, 1, 512));\r\n      }\r\n      if (shader.hasUniform('u_whirl')) {\r\n        shader.uniform1f('u_whirl', child.filters.whirl * Math.PI / -180);\r\n      }\r\n      if (shader.hasUniform('u_fisheye')) {\r\n        shader.uniform1f('u_fisheye', Math.max(0, (child.filters.fisheye + 100) / 100));\r\n      }\r\n      if (shader.hasUniform('u_pixelate')) {\r\n        shader.uniform1f('u_pixelate', Math.abs(child.filters.pixelate) / 10);\r\n      }\r\n      if (shader.hasUniform('u_size')) {\r\n        shader.uniform2f('u_size', costume.width, costume.height);\r\n      }\r\n\r\n      this.gl.drawArrays(this.gl.TRIANGLES, 0, 6);\r\n    }\r\n\r\n    /**\r\n     * Draw a texture covering the entire screen\r\n     * @param texture The texture to draw. Must belong to this renderer.\r\n     */\r\n    protected drawTextureOverlay(texture: WebGLTexture) {\r\n      const shader = this.renderingShader;\r\n      this.gl.useProgram(shader.program);\r\n\r\n      this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\r\n\r\n      shader.attributeBuffer('a_position', this.quadBuffer);\r\n\r\n      const matrix = P.m3.projection(this.canvas.width, this.canvas.height);\r\n      P.m3.multiply(matrix, this.globalScaleMatrix);\r\n      P.m3.multiply(matrix, P.m3.translation(240, 180));\r\n      P.m3.multiply(matrix, P.m3.scaling(1, -1));\r\n      P.m3.multiply(matrix, P.m3.translation(-240, -180));\r\n      P.m3.multiply(matrix, P.m3.scaling(480, 360));\r\n\r\n      shader.uniformMatrix3('u_matrix', matrix);\r\n\r\n      // Apply empty effect values\r\n      if (shader.hasUniform('u_opacity')) shader.uniform1f('u_opacity', 1);\r\n      if (shader.hasUniform('u_brightness')) shader.uniform1f('u_brightness', 0);\r\n      if (shader.hasUniform('u_color')) shader.uniform1f('u_color', 0);\r\n      if (shader.hasUniform('u_mosaic')) shader.uniform1f('u_mosaic', 1);\r\n      if (shader.hasUniform('u_whirl')) shader.uniform1f('u_whirl', 0);\r\n      if (shader.hasUniform('u_fisheye')) shader.uniform1f('u_fisheye', 1);\r\n      if (shader.hasUniform('u_pixelate')) shader.uniform1f('u_pixelate', 0);\r\n      if (shader.hasUniform('u_size')) shader.uniform2f('u_size', this.canvas.width, this.canvas.height);\r\n\r\n      this.gl.drawArrays(this.gl.TRIANGLES, 0, 6);\r\n    }\r\n  }\r\n\r\n  export class WebGLProjectRenderer extends WebGLSpriteRenderer implements ProjectRenderer {\r\n    public static readonly PEN_DOT_VERTEX_SHADER = `\r\n    attribute vec2 a_position;\r\n    varying vec2 v_position;\r\n    uniform mat3 u_matrix;\r\n    void main() {\r\n      gl_Position = vec4((u_matrix * vec3(a_position, 1)).xy, 0, 1);\r\n      v_position = a_position;\r\n    }\r\n    `;\r\n    public static readonly PEN_DOT_FRAGMENT_SHADER = `\r\n    precision mediump float;\r\n    uniform vec4 u_color;\r\n    varying vec2 v_position;\r\n    void main() {\r\n      float x = (v_position.x - 0.5) * 2.0;\r\n      float y = (v_position.y - 0.5) * 2.0;\r\n      if (sqrt(x * x + y * y) >= 1.0) {\r\n        discard;\r\n      }\r\n      gl_FragColor = u_color;\r\n    }\r\n    `;\r\n    public static readonly PEN_LINE_VERTEX_SHADER = `\r\n    attribute vec2 a_position;\r\n    void main() {\r\n      gl_Position = vec4(a_position, 0, 1);\r\n    }\r\n    `\r\n    public static readonly PEN_LINE_FRAGMENT_SHADER = `\r\n    precision mediump float;\r\n    uniform vec4 u_color;\r\n    void main() {\r\n      gl_FragColor = u_color;\r\n    }\r\n    `;\r\n\r\n    public penLayer: HTMLCanvasElement;\r\n    public stageLayer: HTMLCanvasElement;\r\n    public zoom: number = 1;\r\n\r\n    protected penTexture: WebGLTexture;\r\n    protected penBuffer: WebGLFramebuffer;\r\n\r\n    protected fallbackRenderer: ProjectRenderer;\r\n    protected shaderOnlyShapeFilters = this.compileVariant(['ONLY_SHAPE_FILTERS']);\r\n    protected penDotShader: ShaderVariant;\r\n    protected penLineShader: ShaderVariant;\r\n\r\n    constructor(public stage: P.core.Stage) {\r\n      super();\r\n\r\n      this.fallbackRenderer = new ProjectRenderer2D(stage);\r\n\r\n      this.penTexture = this.createTexture();\r\n      this.penBuffer = this.createFramebuffer();\r\n      this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, 480, 360, 0, this.gl.RGBA, this.gl.UNSIGNED_BYTE, null);\r\n      this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, this.penBuffer);\r\n      this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER, this.gl.COLOR_ATTACHMENT0, this.gl.TEXTURE_2D, this.penTexture, 0);\r\n      this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, null);\r\n\r\n      this.penDotShader = new ShaderVariant(this.gl, this.compileProgram(\r\n        WebGLProjectRenderer.PEN_DOT_VERTEX_SHADER,\r\n        WebGLProjectRenderer.PEN_DOT_FRAGMENT_SHADER,\r\n      ));\r\n      this.penLineShader = new ShaderVariant(this.gl, this.compileProgram(\r\n        WebGLProjectRenderer.PEN_LINE_VERTEX_SHADER,\r\n        WebGLProjectRenderer.PEN_LINE_FRAGMENT_SHADER,\r\n      ));\r\n\r\n      this.reset(1);\r\n    }\r\n\r\n    drawFrame() {\r\n      this.bindFramebuffer(null);\r\n      this.reset(this.zoom);\r\n      this.drawChild(this.stage);\r\n      this.drawTextureOverlay(this.penTexture);\r\n      for (var i = 0; i < this.stage.children.length; i++) {\r\n        var child = this.stage.children[i];\r\n        if (!child.visible) {\r\n          continue;\r\n        }\r\n        this.drawChild(child);\r\n      }\r\n    }\r\n\r\n    init(root: HTMLElement) {\r\n      root.appendChild(this.canvas);\r\n    }\r\n\r\n    onStageFiltersChanged() {\r\n      // no-op; we always re-render the stage in full\r\n    }\r\n\r\n    penLine(color: P.core.PenColor, size: number, x: number, y: number, x2: number, y2: number): void {\r\n      this.bindFramebuffer(this.penBuffer);\r\n\r\n      const shader = this.penLineShader;\r\n      this.gl.useProgram(shader.program);\r\n\r\n      const buffer = this.gl.createBuffer();\r\n      if (buffer === null) {\r\n        throw new Error('buffer is null');\r\n      }\r\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, buffer);\r\n      this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array([\r\n        x / 240, y / 180,\r\n        x2 / 240, y2 / 180,\r\n      ]), this.gl.STATIC_DRAW);\r\n      shader.attributeBuffer('a_position', buffer);\r\n\r\n      const parts = color.toParts();\r\n      shader.uniform4f('u_color', parts[0], parts[1], parts[2], parts[3]);\r\n      this.gl.drawArrays(this.gl.LINES, 0, 2);\r\n    }\r\n\r\n    penDot(color: P.core.PenColor, size: number, x: number, y: number): void {\r\n      this.bindFramebuffer(this.penBuffer);\r\n\r\n      const shader = this.penDotShader;\r\n      this.gl.useProgram(shader.program);\r\n\r\n      shader.attributeBuffer('a_position', this.quadBuffer);\r\n      const matrix = P.m3.projection(this.canvas.width, this.canvas.height);\r\n      P.m3.multiply(matrix, P.m3.translation(240 + x - size / 2 | 0, 180 - y - size / 2 | 0));\r\n      P.m3.multiply(matrix, P.m3.scaling(size, size));\r\n      shader.uniformMatrix3('u_matrix', matrix);\r\n\r\n      const parts = color.toParts();\r\n      shader.uniform4f('u_color', parts[0], parts[1], parts[2], parts[3]);\r\n\r\n      this.gl.drawArrays(this.gl.TRIANGLES, 0, 6);\r\n    }\r\n\r\n    penStamp(sprite: P.core.Sprite): void {\r\n      this.bindFramebuffer(this.penBuffer);\r\n      this.drawChild(sprite);\r\n    }\r\n\r\n    penClear(): void {\r\n      this.bindFramebuffer(this.penBuffer);\r\n      this.gl.clearColor(255, 255, 255, 0);\r\n      this.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n    }\r\n\r\n    resize(scale: number): void {\r\n      this.zoom = scale;\r\n      // TODO: resize pen layer\r\n    }\r\n\r\n    spriteTouchesPoint(sprite: core.Sprite, x: number, y: number): boolean {\r\n      // If filters will not change the shape of the sprite, it would be faster\r\n      // to avoid going to the GPU\r\n      if (!filtersAffectShape(sprite.filters)) {\r\n        return this.fallbackRenderer.spriteTouchesPoint(sprite, x, y);\r\n      }\r\n\r\n      const texture = this.createTexture();\r\n      const framebuffer = this.createFramebuffer();\r\n      this.bindFramebuffer(framebuffer);\r\n      this.resetFramebuffer(1);\r\n\r\n      this._drawChild(sprite, this.shaderOnlyShapeFilters);\r\n\r\n      // Allocate 4 bytes to store 1 RGBA pixel\r\n      const result = new Uint8Array(4);\r\n      // Coordinates are in pixels from the lower left corner\r\n      // We only care about 1 pixel, the pixel at the mouse cursor.\r\n      this.gl.readPixels(240 + x | 0, 180 + y | 0, 1, 1, this.gl.RGBA, this.gl.UNSIGNED_BYTE, result);\r\n\r\n      // I don't know if it's necessary to delete these\r\n      this.gl.deleteTexture(texture);\r\n      this.gl.deleteFramebuffer(framebuffer);\r\n\r\n      // Just look for a non-zero alpha channel\r\n      return result[3] !== 0;\r\n    }\r\n\r\n    spritesIntersect(spriteA: core.Sprite, otherSprites: core.Base[]): boolean {\r\n      return this.fallbackRenderer.spritesIntersect(spriteA, otherSprites);\r\n    }\r\n\r\n    spriteTouchesColor(sprite: core.Base, color: number): boolean {\r\n      return this.fallbackRenderer.spriteTouchesColor(sprite, color);\r\n    }\r\n\r\n    spriteColorTouchesColor(sprite: core.Base, spriteColor: number, otherColor: number): boolean {\r\n      return this.fallbackRenderer.spriteColorTouchesColor(sprite, spriteColor, otherColor);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Creates the CSS filter for a Filter object.\r\n   * The filter is generally an estimation of the actual effect.\r\n   * Includes brightness and color. (does not include ghost)\r\n   */\r\n  function getCSSFilter(filters: P.core.Filters) {\r\n    let filter = '';\r\n    if (filters.brightness) {\r\n      filter += 'brightness(' + (100 + filters.brightness) + '%) ';\r\n    }\r\n    if (filters.color) {\r\n      filter += 'hue-rotate(' + (filters.color / 200 * 360) + 'deg) ';\r\n    }\r\n    // ghost could be supported through opacity(), however that effect is applied with the opacity property because more browsers support it\r\n    return filter;\r\n  }\r\n\r\n  export class SpriteRenderer2D implements SpriteRenderer {\r\n    public ctx: CanvasRenderingContext2D;\r\n    public canvas: HTMLCanvasElement;\r\n    /**\r\n     * Disables rendering filters on the \r\n     */\r\n    public noEffects: boolean = false;\r\n\r\n    constructor() {\r\n      const { canvas, ctx } = create2dCanvas();\r\n      this.canvas = canvas;\r\n      this.ctx = ctx;\r\n    }\r\n\r\n    reset(scale: number) {\r\n      this._reset(this.ctx, scale);\r\n    }\r\n\r\n    drawChild(c: P.core.Base) {\r\n      this._drawChild(c, this.ctx);\r\n    }\r\n\r\n    drawObjects(children: P.core.Base[]) {\r\n      for (var i = 0; i < children.length; i++) {\r\n        var child = children[i];\r\n        if (!child.visible) {\r\n          continue;\r\n        }\r\n        this.drawChild(child);\r\n      }\r\n    }\r\n\r\n    protected _reset(ctx: CanvasRenderingContext2D, scale: number) {\r\n      const effectiveScale = scale * P.config.scale;\r\n      const width = 480 * effectiveScale;\r\n      const height = 360 * effectiveScale;\r\n      if (ctx.canvas.width !== width || ctx.canvas.height !== height) {\r\n        ctx.canvas.width = width;\r\n        ctx.canvas.height = height;\r\n        ctx.scale(effectiveScale, effectiveScale);\r\n      } else {\r\n        ctx.clearRect(0, 0, 480, 360);\r\n      }\r\n    }\r\n\r\n    protected _drawChild(c: P.core.Base, ctx: CanvasRenderingContext2D) {\r\n      const costume = c.costumes[c.currentCostumeIndex];\r\n      if (!costume) {\r\n        return;\r\n      }\r\n\r\n      ctx.save();\r\n\r\n      const globalScale = c.stage.zoom * P.config.scale;\r\n      ctx.translate(((c.scratchX + 240) * globalScale | 0) / globalScale, ((180 - c.scratchY) * globalScale | 0) / globalScale);\r\n\r\n      let objectScale = costume.scale;\r\n      // Direction transforms are only applied to Sprites because Stages cannot be rotated.\r\n      if (P.core.isSprite(c)) {\r\n        if (c.rotationStyle === RotationStyle.Normal) {\r\n          ctx.rotate((c.direction - 90) * Math.PI / 180);\r\n        } else if (c.rotationStyle === RotationStyle.LeftRight && c.direction < 0) {\r\n          ctx.scale(-1, 1);\r\n        }\r\n        objectScale *= c.scale;\r\n      }\r\n\r\n      const image = costume.get(objectScale * c.stage.zoom);\r\n      const x = -costume.rotationCenterX * objectScale;\r\n      const y = -costume.rotationCenterY * objectScale;\r\n      const w = costume.width * objectScale;\r\n      const h = costume.height * objectScale;\r\n      if (w < 1 || h < 1) {\r\n        ctx.restore();\r\n        return;\r\n      }\r\n      ctx.imageSmoothingEnabled = false;\r\n\r\n      if (!this.noEffects) {\r\n        if (c.filters.brightness === 100) {\r\n          workingRenderer.canvas.width = w;\r\n          workingRenderer.canvas.height = h;\r\n          workingRenderer.ctx.save();\r\n\r\n          workingRenderer.ctx.translate(0, 0);\r\n          workingRenderer.ctx.drawImage(image, 0, 0, w, h);\r\n          workingRenderer.ctx.globalCompositeOperation = 'source-in';\r\n          workingRenderer.ctx.fillStyle = 'white';\r\n          workingRenderer.ctx.fillRect(0, 0, 480, 360);\r\n          ctx.drawImage(workingRenderer.canvas, x, y);\r\n\r\n          workingRenderer.ctx.restore();\r\n        } else {\r\n          ctx.globalAlpha = Math.max(0, Math.min(1, 1 - c.filters.ghost / 100));\r\n          const filter = getCSSFilter(c.filters);\r\n          // Only apply a filter when needed because of a Firefox performance bug\r\n          if (filter !== '') {\r\n            ctx.filter = filter;\r\n          }\r\n          ctx.drawImage(image, x, y, w, h);\r\n        }\r\n      } else {\r\n        ctx.drawImage(image, x, y, w, h);\r\n      }\r\n\r\n      ctx.restore();\r\n    }\r\n  }\r\n\r\n  // Renderers used for some features such as collision detection\r\n  const workingRenderer = new SpriteRenderer2D();\r\n  const workingRenderer2 = new SpriteRenderer2D();\r\n\r\n  export class ProjectRenderer2D extends SpriteRenderer2D implements ProjectRenderer {\r\n    public stageLayer: HTMLCanvasElement;\r\n    public stageContext: CanvasRenderingContext2D;\r\n    public penLayer: HTMLCanvasElement;\r\n    public penContext: CanvasRenderingContext2D;\r\n    public zoom: number = 1;\r\n\r\n    private penModified: boolean = false;\r\n    private penTargetZoom: number = -1;\r\n    private penZoom: number = 1;\r\n\r\n    private stageCostumeIndex: number = -1;\r\n\r\n    constructor(public stage: P.core.Stage) {\r\n      super();\r\n      const { ctx: stageContext, canvas: stageLayer } = create2dCanvas();\r\n      this.stageContext = stageContext;\r\n      this.stageLayer = stageLayer;\r\n\r\n      const { ctx: penContext, canvas: penLayer } = create2dCanvas();\r\n      this.penContext = penContext;\r\n      this.penLayer = penLayer;\r\n    }\r\n\r\n    onStageFiltersChanged() {\r\n      const filter = getCSSFilter(this.stage.filters);\r\n      // Only reapply a CSS filter if it has changed for performance, specifically in firefox.\r\n      // Might not be necessary here.\r\n      if (this.stageLayer.style.filter !== filter) {\r\n        this.stageLayer.style.filter = filter;\r\n      }\r\n\r\n      // cssFilter does not include ghost\r\n      this.stageLayer.style.opacity = '' + Math.max(0, Math.min(1, 1 - this.stage.filters.ghost / 100));\r\n    }\r\n\r\n    renderStageCostume(scale: number) {\r\n      this._reset(this.stageContext, scale);\r\n      this.noEffects = true;\r\n      this._drawChild(this.stage, this.stageContext);\r\n      this.noEffects = false;\r\n    }\r\n\r\n    init(root: HTMLCanvasElement) {\r\n      root.appendChild(this.stageLayer);\r\n      root.appendChild(this.penLayer);\r\n      root.appendChild(this.canvas);\r\n    }\r\n\r\n    drawFrame() {\r\n      this.reset(this.zoom);\r\n      this.drawObjects(this.stage.children);\r\n      if (this.stage.currentCostumeIndex !== this.stageCostumeIndex) {\r\n        this.stageCostumeIndex = this.stage.currentCostumeIndex;\r\n        this.renderStageCostume(this.zoom);\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Draw everything from this renderer onto another 2d renderer, skipping a single item.\r\n     * \"Everything\" includes stage, pen, and all visible children.\r\n     */\r\n    drawAllExcept(renderer: SpriteRenderer2D, skip: P.core.Base) {\r\n      renderer.drawChild(this.stage);\r\n      renderer.ctx.drawImage(this.penLayer, 0, 0, this.canvas.width, this.canvas.height);\r\n      for (var i = 0; i < this.stage.children.length; i++) {\r\n        var child = this.stage.children[i];\r\n        if (!child.visible || child === skip) {\r\n          continue;\r\n        }\r\n        renderer.drawChild(child);\r\n      }\r\n    }\r\n\r\n    resize(zoom: number) {\r\n      this.zoom = zoom;\r\n      this.resizePen(zoom);\r\n      this.renderStageCostume(this.zoom);\r\n    }\r\n\r\n    resizePen(zoom: number) {\r\n      if (zoom > this.penZoom) {\r\n        this.penZoom = zoom;\r\n        const cachedCanvas = document.createElement('canvas');\r\n        cachedCanvas.width = this.penLayer.width;\r\n        cachedCanvas.height = this.penLayer.height;\r\n        const cachedCanvasCtx = cachedCanvas.getContext('2d');\r\n        if (!cachedCanvasCtx) {\r\n          throw new Error('cannot get 2d rendering context while resizing pen layer');\r\n        }\r\n        cachedCanvasCtx.drawImage(this.penLayer, 0, 0);\r\n        this._reset(this.penContext, zoom);\r\n        this.penContext.drawImage(cachedCanvas, 0, 0, 480, 360);\r\n      } else if (!this.penModified) {\r\n        // Immediately scale down if no changes have been made\r\n        this.penZoom = zoom;\r\n        this._reset(this.penContext, zoom);\r\n      } else {\r\n        // We'll resize on the next clear, as resizing now would result in a loss of detail.\r\n        this.penTargetZoom = zoom;\r\n      }\r\n    }\r\n\r\n    penClear() {\r\n      this.penModified = false;\r\n      if (this.penTargetZoom !== -1) {\r\n        this._reset(this.penContext, this.penTargetZoom);\r\n        this.penZoom = this.penTargetZoom;\r\n        this.penTargetZoom = -1;\r\n      }\r\n      this.penContext.clearRect(0, 0, 480, 360);\r\n    }\r\n\r\n    penDot(color: P.core.PenColor, size: number, x: number, y: number) {\r\n      this.penModified = true;\r\n      this.penContext.fillStyle = color.toCSS();\r\n      this.penContext.beginPath();\r\n      this.penContext.arc(240 + x, 180 - y, size / 2, 0, 2 * Math.PI, false);\r\n      this.penContext.fill();\r\n    }\r\n\r\n    penLine(color: P.core.PenColor, size: number, x1: number, y1: number, x2: number, y2: number) {\r\n      this.penModified = true;\r\n      this.penContext.lineCap = 'round';\r\n      if (this.penZoom === 1) {\r\n        if (size % 2 > .5 && size % 2 < 1.5) {\r\n          x1 -= .5;\r\n          y1 -= .5;\r\n          x2 -= .5;\r\n          y2 -= .5;\r\n        }\r\n      }\r\n      this.penContext.strokeStyle = color.toCSS();\r\n      this.penContext.lineWidth = size;\r\n      this.penContext.beginPath();\r\n      this.penContext.moveTo(240 + x1, 180 - y1);\r\n      this.penContext.lineTo(240 + x2, 180 - y2);\r\n      this.penContext.stroke();\r\n    }\r\n\r\n    penStamp(sprite: P.core.Sprite) {\r\n      this.penModified = true;\r\n      this._drawChild(sprite, this.penContext);\r\n    }\r\n\r\n    spriteTouchesPoint(sprite: P.core.Sprite, x: number, y: number) {\r\n      const bounds = sprite.rotatedBounds();\r\n      if (x < bounds.left || y < bounds.bottom || x > bounds.right || y > bounds.top) {\r\n        return false;\r\n      }\r\n\r\n      const costume = sprite.costumes[sprite.currentCostumeIndex];\r\n      var cx = (x - sprite.scratchX) / sprite.scale;\r\n      var cy = (sprite.scratchY - y) / sprite.scale;\r\n      if (sprite.rotationStyle === RotationStyle.Normal && sprite.direction !== 90) {\r\n        const d = (90 - sprite.direction) * Math.PI / 180;\r\n        const ox = cx;\r\n        const s = Math.sin(d), c = Math.cos(d);\r\n        cx = c * ox - s * cy;\r\n        cy = s * ox + c * cy;\r\n      } else if (sprite.rotationStyle === RotationStyle.LeftRight && sprite.direction < 0) {\r\n        cx = -cx;\r\n      }\r\n\r\n      const positionX = Math.round(cx * costume.bitmapResolution + costume.rotationCenterX);\r\n      const positionY = Math.round(cy * costume.bitmapResolution + costume.rotationCenterY);\r\n      const data = costume.getContext().getImageData(positionX, positionY, 1, 1).data;\r\n      return data[3] !== 0;\r\n    }\r\n\r\n    spritesIntersect(spriteA: core.Base, otherSprites: core.Base[]) {\r\n      const mb = spriteA.rotatedBounds();\r\n\r\n      for (var i = 0; i < otherSprites.length; i++) {\r\n        const spriteB = otherSprites[i];\r\n        if (!spriteB.visible) {\r\n          continue;\r\n        }\r\n\r\n        const ob = spriteB.rotatedBounds();\r\n\r\n        if (mb.bottom >= ob.top || ob.bottom >= mb.top || mb.left >= ob.right || ob.left >= mb.right) {\r\n          continue;\r\n        }\r\n\r\n        const left = Math.max(mb.left, ob.left);\r\n        const top = Math.min(mb.top, ob.top);\r\n        const right = Math.min(mb.right, ob.right);\r\n        const bottom = Math.max(mb.bottom, ob.bottom);\r\n\r\n        const width = right - left;\r\n        const height = top - bottom;\r\n\r\n        // dimensions that are less than 1 or are NaN will throw when we try to get image data\r\n        if (width < 1 || height < 1 || width !== width || height !== height) {\r\n          continue;\r\n        }\r\n\r\n        workingRenderer.canvas.width = width;\r\n        workingRenderer.canvas.height = height;\r\n\r\n        workingRenderer.ctx.save();\r\n        workingRenderer.noEffects = true;\r\n\r\n        workingRenderer.ctx.translate(-(left + 240), -(180 - top));\r\n        workingRenderer.drawChild(spriteA);\r\n        workingRenderer.ctx.globalCompositeOperation = 'source-in';\r\n        workingRenderer.drawChild(spriteB);\r\n\r\n        workingRenderer.noEffects = false;\r\n        workingRenderer.ctx.restore();\r\n\r\n        const data = workingRenderer.ctx.getImageData(0, 0, width, height).data;\r\n        const length = data.length;\r\n\r\n        for (var j = 0; j < length; j += 4) {\r\n          // check for the opacity byte being a non-zero number\r\n          if (data[j + 3]) {\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n\r\n    spriteTouchesColor(sprite: P.core.Base, color: number) {\r\n      const b = sprite.rotatedBounds();\r\n\r\n      const width = b.right - b.left;\r\n      const height = b.top - b.bottom;\r\n      if (width < 1 || height < 1 || width !== width || height !== height) {\r\n        return false;\r\n      }\r\n\r\n      workingRenderer.canvas.width = width;\r\n      workingRenderer.canvas.height = height;\r\n\r\n      workingRenderer.ctx.save();\r\n      workingRenderer.ctx.translate(-(240 + b.left), -(180 - b.top));\r\n\r\n      this.drawAllExcept(workingRenderer, sprite);\r\n      workingRenderer.ctx.globalCompositeOperation = 'destination-in';\r\n      workingRenderer.noEffects = true;\r\n      workingRenderer.drawChild(sprite);\r\n      workingRenderer.noEffects = false;\r\n\r\n      workingRenderer.ctx.restore();\r\n\r\n      const data = workingRenderer.ctx.getImageData(0, 0, b.right - b.left, b.top - b.bottom).data;\r\n\r\n      color = color & 0xffffff;\r\n      const length = (b.right - b.left) * (b.top - b.bottom) * 4;\r\n      for (var i = 0; i < length; i += 4) {\r\n        if ((data[i] << 16 | data[i + 1] << 8 | data[i + 2]) === color && data[i + 3]) {\r\n          return true;\r\n        }\r\n      }\r\n\r\n      return false;\r\n    }\r\n\r\n    spriteColorTouchesColor(sprite: P.core.Base, spriteColor: number, otherColor: number) {\r\n      var rb = sprite.rotatedBounds();\r\n\r\n      const width = rb.right - rb.left;\r\n      const height = rb.top - rb.bottom;\r\n      if (width < 1 || height < 1 || width !== width || height !== height) {\r\n        return false;\r\n      }\r\n\r\n      workingRenderer.canvas.width = workingRenderer2.canvas.width = width;\r\n      workingRenderer.canvas.height = workingRenderer2.canvas.height = height;\r\n\r\n      workingRenderer.ctx.save();\r\n      workingRenderer2.ctx.save();\r\n      workingRenderer.ctx.translate(-(240 + rb.left), -(180 - rb.top));\r\n      workingRenderer2.ctx.translate(-(240 + rb.left), -(180 - rb.top));\r\n\r\n      this.drawAllExcept(workingRenderer, sprite);\r\n      workingRenderer2.drawChild(sprite);\r\n\r\n      workingRenderer.ctx.restore();\r\n      workingRenderer2.ctx.restore();\r\n\r\n      var dataA = workingRenderer.ctx.getImageData(0, 0, width, height).data;\r\n      var dataB = workingRenderer2.ctx.getImageData(0, 0, width, height).data;\r\n\r\n      spriteColor = spriteColor & 0xffffff;\r\n      otherColor = otherColor & 0xffffff;\r\n\r\n      var length = dataA.length;\r\n      for (var i = 0; i < length; i += 4) {\r\n        var touchesSource = (dataB[i] << 16 | dataB[i + 1] << 8 | dataB[i + 2]) === spriteColor && dataB[i + 3];\r\n        var touchesOther = (dataA[i] << 16 | dataA[i + 1] << 8 | dataA[i + 2]) === otherColor && dataA[i + 3];\r\n        if (touchesSource && touchesOther) {\r\n          return true;\r\n        }\r\n      }\r\n\r\n      return false;\r\n    }\r\n  }\r\n}\r\n","/// <reference path=\"phosphorus.ts\" />\r\n/// <reference path=\"config.ts\" />\r\n/// <reference path=\"renderer.ts\" />\r\n\r\n// Phosphorus base classes\r\n// Implements most functionality while leaving some specifics to implementations (P.sb2, P.sb3)\r\nnamespace P.core {\r\n  interface RotatedBounds {\r\n    // A----------+\r\n    // |          |\r\n    // |          |\r\n    // +----------B\r\n    // Where top is the scratchY of A,\r\n    // bottom is the scratchY of B,\r\n    // left is the scratchX of A,\r\n    // and right is the scratchX of B\r\n\r\n    top: number;\r\n    bottom: number;\r\n    left: number;\r\n    right: number;\r\n  }\r\n\r\n  interface Listeners {\r\n    whenClicked: P.runtime.Fn[];\r\n    whenCloned: P.runtime.Fn[];\r\n    whenGreenFlag: P.runtime.Fn[];\r\n    whenIReceive: ObjectMap<P.runtime.Fn[]>;\r\n    whenKeyPressed: P.runtime.Fn[][];\r\n    whenBackdropChanges: ObjectMap<P.runtime.Fn[]>;\r\n    whenSceneStarts: ObjectMap<P.runtime.Fn[]>;\r\n    // whenSensorGreaterThan: P.runtime.Fn[]\r\n  }\r\n\r\n  export interface ActiveSound {\r\n    stopped: boolean;\r\n    node: AudioNode;\r\n    base: P.runtime.Fn;\r\n  }\r\n\r\n  export interface Filters {\r\n    color: number;\r\n    fisheye: number;\r\n    whirl: number;\r\n    pixelate: number;\r\n    mosaic: number;\r\n    brightness: number;\r\n    ghost: number;\r\n  }\r\n\r\n  export interface SoundFilters {\r\n    pitch: number;\r\n  }\r\n\r\n  export const enum RotationStyle {\r\n    /**\r\n     * Indicates this sprite may rotate in any direction.\r\n     */\r\n    Normal,\r\n    /**\r\n     * Indicates this sprite can only rotate left or right.\r\n     */\r\n    LeftRight,\r\n    /**\r\n     * Indicates this sprite cannot rotate.\r\n     */\r\n    None,\r\n  }\r\n\r\n  export const enum SpecialObjects {\r\n    Mouse = '_mouse_',\r\n    Stage = '_stage_',\r\n    Random = '_random_',\r\n    Edge = '_edge_',\r\n  }\r\n\r\n  const enum PenMode { RGBA, HSLA, HSVA };\r\n\r\n  export class PenColor {\r\n    private x: number = 0;\r\n    private y: number = 0;\r\n    private z: number = 255;\r\n    private a: number = 1;\r\n    private mode: PenMode = PenMode.RGBA;\r\n    private css: string = 'rgba(0, 0, 255, 1)';\r\n\r\n    /**\r\n     * Set this color to an RGB(A) color, encoded in a single number.\r\n     */\r\n    setRGBA(rgba: number) {\r\n      this.x = rgba >> 16 & 0xff;\r\n      this.y = rgba >> 8 & 0xff;\r\n      this.z = rgba & 0xff;\r\n      this.a = (rgba >> 24 & 0xff) / 0xff || 1;\r\n      this.css = 'rgba(' + this.x + ', ' + this.y + ', ' + this.z + ', ' + this.a + ')';\r\n      this.mode = PenMode.RGBA;\r\n    }\r\n\r\n    toHSLA() {\r\n      switch (this.mode) {\r\n        case PenMode.RGBA: {\r\n          this.mode = PenMode.HSLA;\r\n          const hsl = P.utils.rgbToHSL(this.x, this.y, this.z);\r\n          this.x = hsl[0];\r\n          this.y = hsl[1] * 100;\r\n          this.z = hsl[2] * 100;\r\n          break;\r\n        }\r\n        case PenMode.HSVA: {\r\n          this.mode = PenMode.HSLA;\r\n          const hsl = P.utils.hsvToHSL(this.x, this.y / 100, this.z / 100);\r\n          this.x = hsl[0];\r\n          this.y = hsl[1] * 100;\r\n          this.z = hsl[2] * 100;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    toHSVA() {\r\n      switch (this.mode) {\r\n        case PenMode.RGBA: {\r\n          this.mode = PenMode.HSVA;\r\n          const hsv = P.utils.rgbToHSV(this.x, this.y, this.z);\r\n          this.x = hsv[0];\r\n          this.y = hsv[1] * 100;\r\n          this.z = hsv[2] * 100;\r\n          break;\r\n        }\r\n        case PenMode.HSLA: {\r\n          this.mode = PenMode.HSVA;\r\n          const hsv = P.utils.hslToHSV(this.x, this.y / 100, this.z / 100);\r\n          this.x = hsv[0];\r\n          this.y = hsv[1] * 100;\r\n          this.z = hsv[2] * 100;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Convert this color to its RGBA parts, each from 0-1\r\n     */\r\n    toParts(): [number, number, number, number] {\r\n      // TODO, not important for now\r\n      return [1, 0, 0, 1];\r\n    }\r\n\r\n    /**\r\n     * Convert this color to a CSS color code of some sort.\r\n     */\r\n    toCSS(): string {\r\n      switch (this.mode) {\r\n        case PenMode.RGBA:\r\n          return this.css;\r\n        case PenMode.HSLA:\r\n          return 'hsla(' + this.x + ',' + this.y + '%,' + (this.z > 100 ? 200 - this.z : this.z) + '%,' + this.a + ')';\r\n        case PenMode.HSVA: {\r\n          const rgb = P.utils.hsvToRGB(this.x / 360, this.y / 100, this.z / 100);\r\n          return 'rgba(' + rgb[0] + ', ' + rgb[1] + ', ' + rgb[2] + ', ' + this.a + ')';\r\n        }\r\n      }\r\n      throw new Error('Unknown pen color mode: ' + this.mode);\r\n    }\r\n\r\n    setParam(param: string, value: number) {\r\n      this.toHSVA();\r\n      switch (param) {\r\n        case 'color':\r\n          this.x = value * 360 / 100;\r\n          break;\r\n        case 'saturation':\r\n          this.y = P.utils.clamp(value, 0, 100);\r\n          break;\r\n        case 'brightness':\r\n          this.z = P.utils.clamp(value, 0, 100);\r\n          break;\r\n        case 'transparency':\r\n          this.a = 1 - (value / 100);\r\n          if (this.a > 1) this.a = 1;\r\n          if (this.a < 0) this.a = 0;\r\n          break;\r\n      }\r\n    }\r\n\r\n    changeParam(param: string, value: number) {\r\n      this.toHSVA();\r\n      switch (param) {\r\n        case 'color':\r\n          this.x += value * 360 / 100;\r\n          break;\r\n        case 'saturation':\r\n          this.y = P.utils.clamp(this.y + value, 0, 100);\r\n          break;\r\n        case 'brightness':\r\n          this.z = P.utils.clamp(this.z + value, 0, 100);\r\n          break;\r\n        case 'transparency':\r\n          this.a = Math.max(0, Math.min(1, this.a - value / 100));\r\n          break;\r\n      }\r\n    }\r\n\r\n    copy(other: PenColor) {\r\n      this.x = other.x;\r\n      this.y = other.y;\r\n      this.z = other.z;\r\n      this.a = other.a;\r\n      this.css = other.css;\r\n      this.mode = other.mode;\r\n    }\r\n  }\r\n\r\n  export abstract class Base {\r\n    /**\r\n     * The stage this object belongs to.\r\n     */\r\n    public stage: Stage;\r\n    /**\r\n     * Is this a stage?\r\n     */\r\n    public isStage: boolean = false;\r\n    /**\r\n     * Is this a sprite?\r\n     */\r\n    public isSprite: boolean = false;\r\n    /**\r\n     * Was this Sprite created as a clone of another?\r\n     */\r\n    public isClone: boolean = false;\r\n    /**\r\n     * Is this object visible?\r\n     */\r\n    public visible: boolean = true;\r\n    /**\r\n     * The sprite's X coordinate on the Scratch grid.\r\n     */\r\n    public scratchX: number = 0;\r\n    /**\r\n     * The sprite's Y coordinate on the Scratch grid.\r\n     */\r\n    public scratchY: number = 0;\r\n    /**\r\n     * The name of this object.\r\n     */\r\n    public name: string = '';\r\n    /**\r\n     * Costumes that belong to this object.\r\n     */\r\n    public costumes: Costume[] = [];\r\n    /**\r\n     * The index of the currently selected costume in its costume list.\r\n     */\r\n    public currentCostumeIndex: number = 0;\r\n    /**\r\n     * Sounds that belong to this object.\r\n     */\r\n    public sounds: Sound[] = [];\r\n    /**\r\n     * Maps the names of sounds to the corresponding Sound\r\n     */\r\n    public soundRefs: ObjectMap<Sound> = {};\r\n    /**\r\n     * Currently selected instrument\r\n     */\r\n    public instrument: number = 0;\r\n    /**\r\n     * The volume of this object, where 1.0 === 100% volume\r\n     */\r\n    public volume: number = 1;\r\n    /**\r\n     * The audio node that this object outputs to.\r\n     */\r\n    public node: GainNode | null = null;\r\n    /**\r\n     * Actively playing sounds started with \"play until done\"\r\n     */\r\n    public activeSounds: Set<ActiveSound> = new Set();\r\n    /**\r\n     * Variable watchers that this object owns.\r\n     */\r\n    public watchers: ObjectMap<Watcher> = Object.create(null);\r\n    /**\r\n     * List watchers that this object owns.\r\n     */\r\n    public listWatchers: ObjectMap<Watcher> = Object.create(null);\r\n    /**\r\n     * Variables of this object.\r\n     * Maps variable names (or ids) to their value.\r\n     * Values can be of any type and should likely be converted first.\r\n     */\r\n    public vars: ObjectMap<any> = Object.create(null);\r\n    /**\r\n     * Lists of this object.\r\n     * Maps list names (or ids) to their list.\r\n     * Each list can contain objects of any type, and should be converted first.\r\n     */\r\n    public lists: ObjectMap<Array<any>> = Object.create(null);\r\n    /**\r\n     * Is this object saying something?\r\n     */\r\n    public saying: boolean = false;\r\n    /**\r\n     * Should this object's speech bubble be a thinking bubble instead?\r\n     */\r\n    public thinking: boolean = false;\r\n    /**\r\n     * The ID of the last thing said.\r\n     */\r\n    public sayId: number = 0;\r\n    public bubbleContainer: HTMLElement;\r\n    public bubblePointer: HTMLElement;\r\n    public bubbleText: Text;\r\n    /**\r\n     * Maps procedure names (usually includes parameters) to the Procedure object\r\n     */\r\n    public procedures: ObjectMap<Procedure> = Object.create(null);\r\n    public listeners: Listeners = {\r\n      whenClicked: [],\r\n      whenCloned: [],\r\n      whenGreenFlag: [],\r\n      whenIReceive: Object.create(null),\r\n      whenKeyPressed: [],\r\n      whenBackdropChanges: Object.create(null),\r\n      whenSceneStarts: Object.create(null),\r\n    };\r\n    public fns: P.runtime.Fn[] = [];\r\n    public filters: Filters = {\r\n      color: 0,\r\n      fisheye: 0,\r\n      whirl: 0,\r\n      pixelate: 0,\r\n      mosaic: 0,\r\n      brightness: 0,\r\n      ghost: 0,\r\n    };\r\n    public soundFilters: SoundFilters = {\r\n      pitch: 0,\r\n    };\r\n\r\n    // Pen data\r\n    public penSize: number = 1;\r\n    public penColor: PenColor = new PenColor();\r\n    public isPenDown: boolean = false;\r\n\r\n    constructor() {\r\n      for (var i = 0; i < 128; i++) {\r\n        this.listeners.whenKeyPressed.push([]);\r\n      }\r\n    }\r\n\r\n    // Data/Loading methods\r\n\r\n    addSound(sound: Sound) {\r\n      this.soundRefs[sound.name] = sound;\r\n      this.sounds.push(sound);\r\n    }\r\n\r\n    // Implementations of Scratch blocks\r\n\r\n    showVariable(name: string, visible: boolean) {\r\n      let watcher = this.watchers[name];\r\n      // Create watchers that might not exist\r\n      if (!watcher) {\r\n        const newWatcher = this.createVariableWatcher(this, name);\r\n        if (!newWatcher) {\r\n          return;\r\n        }\r\n        newWatcher.init();\r\n        this.watchers[name] = watcher = newWatcher;\r\n        this.stage.allWatchers.push(watcher);\r\n      }\r\n      watcher.setVisible(visible);\r\n    }\r\n\r\n    showList(name: string, visible: boolean) {\r\n      let watcher = this.listWatchers[name];\r\n      if (!watcher) {\r\n        const newWatcher = this.createListWatcher(this, name);\r\n        if (!newWatcher) {\r\n          return;\r\n        }\r\n        newWatcher.init();\r\n        this.listWatchers[name] = watcher = newWatcher;\r\n        this.stage.allWatchers.push(watcher);\r\n      }\r\n      watcher.setVisible(visible);\r\n    }\r\n\r\n    showNextCostume() {\r\n      this.currentCostumeIndex = (this.currentCostumeIndex + 1) % this.costumes.length;\r\n      if (this.saying && isSprite(this)) this.updateBubble();\r\n    }\r\n\r\n    showPreviousCostume() {\r\n      var length = this.costumes.length;\r\n      this.currentCostumeIndex = (this.currentCostumeIndex + length - 1) % length;\r\n      if (this.saying && isSprite(this)) this.updateBubble();\r\n    }\r\n\r\n    getCostumeName() {\r\n      return this.costumes[this.currentCostumeIndex] ? this.costumes[this.currentCostumeIndex].name : '';\r\n    }\r\n\r\n    setCostume(costume: any) {\r\n      if (typeof costume !== 'number') {\r\n        costume = '' + costume;\r\n        for (var i = 0; i < this.costumes.length; i++) {\r\n          if (this.costumes[i].name === costume) {\r\n            this.currentCostumeIndex = i;\r\n            if (this.saying && isSprite(this)) this.updateBubble();\r\n            return;\r\n          }\r\n        }\r\n        if (costume === (this.isSprite ? 'next costume' : 'next backdrop')) {\r\n          this.showNextCostume();\r\n          return;\r\n        }\r\n        if (costume === (this.isSprite ? 'previous costume' : 'previous backdrop')) {\r\n          this.showPreviousCostume();\r\n          return;\r\n        }\r\n        if (!isFinite(costume) || !/\\d/.test(costume)) {\r\n          return;\r\n        }\r\n      }\r\n      var i = (Math.floor(costume) - 1 || 0) % this.costumes.length;\r\n      if (i < 0) i += this.costumes.length;\r\n      this.currentCostumeIndex = i;\r\n      if (isSprite(this) && this.saying) this.updateBubble();\r\n    }\r\n\r\n    setFilter(name: string, value: number) {\r\n      switch (name) {\r\n        case 'ghost':\r\n          if (value < 0) value = 0;\r\n          if (value > 100) value = 100;\r\n          break;\r\n        case 'brightness':\r\n          if (value < -100) value = -100;\r\n          if (value > 100) value = 100;\r\n          break;\r\n        case 'color':\r\n          value = value % 200;\r\n          if (value < 0) value += 200;\r\n          break;\r\n      }\r\n      this.filters[name] = value;\r\n    }\r\n\r\n    changeFilter(name: string, value: number) {\r\n      this.setFilter(name, this.filters[name] + value);\r\n    }\r\n\r\n    resetFilters() {\r\n      this.filters = {\r\n        color: 0,\r\n        fisheye: 0,\r\n        whirl: 0,\r\n        pixelate: 0,\r\n        mosaic: 0,\r\n        brightness: 0,\r\n        ghost: 0\r\n      };\r\n    }\r\n\r\n    setSoundFilter(name: string, value: number) {\r\n      switch (name.toLowerCase()) {\r\n        case 'pitch':\r\n          this.soundFilters.pitch = value;\r\n          break;\r\n      }\r\n    }\r\n\r\n    changeSoundFilter(name: string, value: number) {\r\n      switch (name.toLowerCase()) {\r\n        case 'pitch':\r\n          this.soundFilters.pitch += value;\r\n          break;\r\n      }\r\n    }\r\n\r\n    resetSoundFilters() {\r\n      this.soundFilters = {\r\n        pitch: 0,\r\n      };\r\n    }\r\n\r\n    getSound(name) {\r\n      if (typeof name === 'string') {\r\n        var s = this.soundRefs[name];\r\n        if (s) return s;\r\n        name = +name;\r\n      }\r\n      var l = this.sounds.length;\r\n      if (l && typeof name === 'number' && name === name) {\r\n        var i = Math.round(name - 1) % l;\r\n        if (i < 0) i += l;\r\n        return this.sounds[i];\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Stops all sounds in this object.\r\n     */\r\n    stopSounds() {\r\n      if (this.node) {\r\n        for (const sound of this.activeSounds) {\r\n          sound.stopped = true;\r\n          sound.node.disconnect();\r\n        }\r\n        this.activeSounds.clear();\r\n        this.node.disconnect();\r\n        this.node = null;\r\n      }\r\n    }\r\n\r\n    stopSoundsExcept(originBase: P.runtime.Fn) {\r\n      if (this.node) {\r\n        for (const sound of this.activeSounds) {\r\n          if (sound.base !== originBase) {\r\n            sound.node.disconnect();\r\n            sound.stopped = true;\r\n            this.activeSounds.delete(sound);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    ask(question: string) {\r\n      var stage = this.stage;\r\n      if (question) {\r\n        if (this.visible && isSprite(this)) {\r\n          this.say(question);\r\n          stage.promptTitle.style.display = 'none';\r\n        } else {\r\n          stage.promptTitle.style.display = 'block';\r\n          stage.promptTitle.textContent = question;\r\n        }\r\n      } else {\r\n        stage.promptTitle.style.display = 'none';\r\n      }\r\n      stage.hidePrompt = false;\r\n      stage.prompter.style.display = 'block';\r\n      stage.prompt.value = '';\r\n      stage.prompt.focus();\r\n    }\r\n\r\n    /**\r\n     * Makes this object say some text.\r\n     * @param text The text to say\r\n     * @param thinking If the text box should be in the thinking style or just speaking\r\n     * @returns A unique ID for this bubble\r\n     */\r\n    say(text: string, thinking: boolean = false): number {\r\n      text = text.toString();\r\n\r\n      // Empty strings disable saying anything.\r\n      if (text.length === 0) {\r\n        this.saying = false;\r\n        if (this.bubbleContainer) this.bubbleContainer.style.display = 'none';\r\n        return ++this.sayId;\r\n      }\r\n\r\n      this.saying = true;\r\n      this.thinking = thinking;\r\n      if (!this.bubbleContainer) {\r\n        this.bubbleContainer = document.createElement('div');\r\n        this.bubbleContainer.style.maxWidth = (127/14)+'em';\r\n        this.bubbleContainer.style.minWidth = (48/14)+'em';\r\n        this.bubbleContainer.style.padding = (8/14)+'em '+(10/14)+'em';\r\n        this.bubbleContainer.style.border = (3/14)+'em solid rgb(160, 160, 160)';\r\n        this.bubbleContainer.style.borderRadius = (10/14)+'em';\r\n        this.bubbleContainer.style.background = '#fff';\r\n        this.bubbleContainer.style.position = 'absolute';\r\n        this.bubbleContainer.style.font = 'bold 1.4em sans-serif';\r\n        this.bubbleContainer.style.whiteSpace = 'pre-wrap';\r\n        this.bubbleContainer.style.wordWrap = 'break-word';\r\n        this.bubbleContainer.style.textAlign = 'center';\r\n        this.bubbleContainer.style.cursor = 'default';\r\n        this.bubbleContainer.style.pointerEvents = 'auto';\r\n        this.bubbleContainer.appendChild(this.bubbleText = document.createTextNode(''));\r\n        this.bubbleContainer.appendChild(this.bubblePointer = document.createElement('div'));\r\n        this.bubblePointer.style.position = 'absolute';\r\n        this.bubblePointer.style.height = (21 / 14) + 'em';\r\n        this.bubblePointer.style.width = (44 / 14) + 'em';\r\n        this.bubblePointer.style.background = 'url(\"icons.svg\")';\r\n        this.bubblePointer.style.backgroundSize = (384/14) + 'em ' + (64/14) + 'em';\r\n        this.bubblePointer.style.backgroundPositionY = (-4/14) + 'em';\r\n        this.stage.ui.appendChild(this.bubbleContainer);\r\n      }\r\n      this.bubblePointer.style.backgroundPositionX = (thinking ? -323 : -259) / 14 + 'em';\r\n      this.bubbleContainer.style.display = 'block';\r\n      this.bubbleText.nodeValue = text;\r\n      this.updateBubble();\r\n      return ++this.sayId;\r\n    }\r\n\r\n    /**\r\n     * Updates the position of the speech bubble, or hides it.\r\n     */\r\n    updateBubble() {\r\n      if (!this.visible || !this.saying) {\r\n        this.bubbleContainer.style.display = 'none';\r\n        return;\r\n      }\r\n\r\n      const b = this.rotatedBounds();\r\n      const left = 240 + b.right;\r\n      var bottom = 180 + b.top;\r\n      const width = this.bubbleContainer.offsetWidth / this.stage.zoom;\r\n      const height = this.bubbleContainer.offsetHeight / this.stage.zoom;\r\n      this.bubblePointer.style.top = ((height - 6) / 14) + 'em';\r\n      if (left + width + 2 > 480) {\r\n        this.bubbleContainer.style.right = ((240 - b.left) / 14) + 'em';\r\n        this.bubbleContainer.style.left = 'auto';\r\n        this.bubblePointer.style.right = (3/14)+'em';\r\n        this.bubblePointer.style.left = 'auto';\r\n        this.bubblePointer.style.backgroundPositionY = (-36/14)+'em';\r\n      } else {\r\n        this.bubbleContainer.style.left = (left / 14) + 'em';\r\n        this.bubbleContainer.style.right = 'auto';\r\n        this.bubblePointer.style.left = (3/14)+'em';\r\n        this.bubblePointer.style.right = 'auto';\r\n        this.bubblePointer.style.backgroundPositionY = (-4/14)+'em';\r\n      }\r\n      if (bottom + height + 2 > 360) {\r\n        bottom = 360 - height - 2;\r\n      }\r\n      if (bottom < 19) {\r\n        bottom = 19;\r\n      }\r\n      this.bubbleContainer.style.bottom = (bottom / 14) + 'em';\r\n    }\r\n\r\n    remove() {\r\n      if (this.bubbleContainer) {\r\n        this.stage.ui.removeChild(this.bubbleContainer);\r\n        // I don't think doing this is necessary.\r\n        delete this.bubbleContainer;\r\n      }\r\n      if (this.node && this.isClone && !this.isStage) {\r\n        // Continue playing sounds started with \"start sound\" after this sprite has been removed.\r\n        for (const sound of this.activeSounds) {\r\n          sound.node.disconnect();\r\n          sound.stopped = true;\r\n        }\r\n        this.activeSounds.clear();\r\n        this.node.disconnect();\r\n        this.node.connect(this.stage.getAudioNode());\r\n        this.node = null;\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Gets this object's AudioNode, or creates it if it doesn't exist.\r\n     * @throws Error if there is no audio context.\r\n     */\r\n    getAudioNode(): AudioNode {\r\n      if (this.node) {\r\n        return this.node;\r\n      }\r\n      if (!P.audio.context) {\r\n        throw new Error('No audio context');\r\n      }\r\n      this.node = P.audio.context.createGain();\r\n      this.node.gain.value = this.volume;\r\n      P.audio.connectNode(this.node);\r\n      return this.node;\r\n    }\r\n\r\n    /**\r\n     * Gets the rectangular bounds that contain this sprite in its entirety.\r\n     */\r\n    abstract rotatedBounds(): RotatedBounds;\r\n\r\n    abstract forward(steps: number): void;\r\n\r\n    abstract moveTo(x: number, y: number): void;\r\n\r\n    /**\r\n     * Create a Watcher for a variable.\r\n     * @param target The sprite that will own the watcher\r\n     * @param variableName The name (or id) of the variable to monitor\r\n     */\r\n    createVariableWatcher(target: Base, variableName: string): Watcher | null {\r\n      return null;\r\n    }\r\n\r\n    /**\r\n     * Create a Watcher for a list.\r\n     * @param target The sprite that will own the watcher\r\n     * @param listName The name (or id) of the variable to monitor\r\n     */\r\n    createListWatcher(target: Base, listName: string): Watcher | null {\r\n      return null;\r\n    }\r\n\r\n    /**\r\n     * Create a dot on the pen layer at this object's location\r\n     */\r\n    dotPen() {\r\n      this.stage.renderer.penDot(this.penColor, this.penSize, this.scratchX, this.scratchY);\r\n    }\r\n\r\n    /**\r\n     * Create a stamp of this object, as it currently appears, on the pen layer.\r\n     */\r\n    stamp() {\r\n      this.stage.renderer.penStamp(this);\r\n    }\r\n\r\n    /**\r\n     * Set the color of the pen.\r\n     */\r\n    setPenColor(color: number | string) {\r\n      if (typeof color === 'string') {\r\n        if (color.startsWith('#')) {\r\n          color = parseInt(color.substr(1), 16);\r\n        } else if (color.startsWith('0x')) {\r\n          color = parseInt(color.substr(2), 16);\r\n        } else {\r\n          color = +color;\r\n        }\r\n      }\r\n      this.penColor.setRGBA(color);\r\n    }\r\n  }\r\n\r\n  type KeyList = Array<boolean | undefined> & { any: number; };\r\n\r\n  // A stage object\r\n  export abstract class Stage extends Base {\r\n    public stage = this;\r\n    public isStage = true;\r\n\r\n    /**\r\n     * Sprites inside of this stage.\r\n     */\r\n    public children: Sprite[] = [];\r\n\r\n    /**\r\n     * All variable watchers in this stage.\r\n     */\r\n    public allWatchers: Watcher[] = [];\r\n\r\n    public answer: string = '';\r\n    public promptId: number = 0;\r\n    public nextPromptId: number = 0;\r\n    public hidePrompt: boolean = false;\r\n    \r\n    public zoom: number = 1;\r\n    \r\n    public rawMouseX: number = 0;\r\n    public rawMouseY: number = 0;\r\n    public mouseX: number = 0;\r\n    public mouseY: number = 0;\r\n    public mousePressed: boolean = false;\r\n    \r\n    public tempoBPM: number = 60;\r\n    public keys: KeyList;\r\n    public username: string = '';\r\n    public counter: number = 0;\r\n\r\n    public runtime: P.runtime.Runtime;\r\n\r\n    public canvas: HTMLCanvasElement;\r\n    public renderer: P.renderer.ProjectRenderer;\r\n\r\n    public root: HTMLElement;\r\n    public ui: HTMLElement;\r\n\r\n    public prompt: HTMLInputElement;\r\n    public prompter: HTMLElement;\r\n    public promptTitle: HTMLElement;\r\n    public promptButton: HTMLElement;\r\n    public mouseSprite: Sprite | undefined;\r\n\r\n    private videoElement: HTMLVideoElement;\r\n    public speech2text: P.ext.speech2text.SpeechToTextExtension | null = null;\r\n    public microphone: P.ext.microphone.MicrophoneExtension | null = null;\r\n    private extensions: P.ext.Extension[] = [];\r\n\r\n    constructor() {\r\n      super();\r\n\r\n      this.runtime = new P.runtime.Runtime(this);\r\n\r\n      this.keys = [] as any;\r\n      this.keys.any = 0;\r\n\r\n      this.root = document.createElement('div');\r\n      this.root.classList.add('forkphorus-root');\r\n\r\n      if (P.config.useWebGL) {\r\n        this.renderer = new P.renderer.WebGLProjectRenderer(this);\r\n      } else {\r\n        this.renderer = new P.renderer.ProjectRenderer2D(this);\r\n      }\r\n      this.renderer.resize(1);\r\n      this.renderer.init(this.root);\r\n      this.canvas = this.renderer.canvas;\r\n\r\n      this.ui = document.createElement('div');\r\n      this.root.appendChild(this.ui);\r\n      this.ui.style.pointerEvents = 'none';\r\n\r\n      this.canvas.tabIndex = 0;\r\n      this.canvas.style.outline = 'none';\r\n\r\n      this.prompter = document.createElement('div');\r\n      this.ui.appendChild(this.prompter);\r\n      this.prompter.style.zIndex = '1';\r\n      this.prompter.style.pointerEvents = 'auto';\r\n      this.prompter.style.position = 'absolute';\r\n      this.prompter.style.left =\r\n      this.prompter.style.right = '1.4em';\r\n      this.prompter.style.bottom = '.6em';\r\n      this.prompter.style.padding = '.5em 3.0em .5em .5em';\r\n      this.prompter.style.border = '.3em solid rgb(46, 174, 223)';\r\n      this.prompter.style.borderRadius = '.8em';\r\n      this.prompter.style.background = '#fff';\r\n      this.prompter.style.display = 'none';\r\n\r\n      this.promptTitle = document.createElement('div');\r\n      this.prompter.appendChild(this.promptTitle);\r\n      this.promptTitle.textContent = '';\r\n      this.promptTitle.style.cursor = 'default';\r\n      this.promptTitle.style.font = 'bold 1.3em sans-serif';\r\n      this.promptTitle.style.margin = '0 '+(-25/13)+'em '+(5/13)+'em 0';\r\n      this.promptTitle.style.whiteSpace = 'pre';\r\n      this.promptTitle.style.overflow = 'hidden';\r\n      this.promptTitle.style.textOverflow = 'ellipsis';\r\n\r\n      this.prompt = document.createElement('input');\r\n      this.prompter.appendChild(this.prompt);\r\n      this.prompt.style.border = '0';\r\n      this.prompt.style.background = '#eee';\r\n      this.prompt.style.boxSizing = 'border-box';\r\n      this.prompt.style.font = '1.3em sans-serif';\r\n      this.prompt.style.padding = '0 '+(3/13)+'em';\r\n      this.prompt.style.outline = '0';\r\n      this.prompt.style.margin = '0';\r\n      this.prompt.style.width = '100%';\r\n      this.prompt.style.height = ''+(20/13)+'em';\r\n      this.prompt.style.display = 'block';\r\n      this.prompt.style.borderRadius = '0';\r\n      this.prompt.style.boxShadow = 'inset '+(1/13)+'em '+(1/13)+'em '+(2/13)+'em rgba(0, 0, 0, .2), inset '+(-1/13)+'em '+(-1/13)+'em '+(1/13)+'em rgba(255, 255, 255, .2)';\r\n      this.prompt.style.webkitAppearance = 'none';\r\n\r\n      this.promptButton = document.createElement('div');\r\n      this.prompter.appendChild(this.promptButton);\r\n      this.promptButton.style.width = '2.2em';\r\n      this.promptButton.style.height = '2.2em';\r\n      this.promptButton.style.position = 'absolute';\r\n      this.promptButton.style.right = '.4em';\r\n      this.promptButton.style.bottom = '.4em';\r\n      this.promptButton.style.background = 'url(icons.svg) -22.8em -0.4em';\r\n      this.promptButton.style.backgroundSize = '38.4em 6.4em';\r\n\r\n      this.addEventListeners();\r\n    }\r\n\r\n    private addEventListeners() {\r\n      // Global listeners need to have their methods redefined like this so that we can removeEventListener() later\r\n      this._onmousedown = this._onmousedown.bind(this);\r\n      this._onmouseup = this._onmouseup.bind(this);\r\n      this._onmousemove = this._onmousemove.bind(this);\r\n      this._ontouchstart = this._ontouchstart.bind(this);\r\n      this._ontouchend = this._ontouchend.bind(this);\r\n      this._ontouchmove = this._ontouchmove.bind(this);\r\n\r\n      document.addEventListener('mousedown', this._onmousedown);\r\n      document.addEventListener('mouseup', this._onmouseup);\r\n      document.addEventListener('mousemove', this._onmousemove);\r\n\r\n      document.addEventListener('touchstart', this._ontouchstart, { passive: false });\r\n      document.addEventListener('touchend', this._ontouchend);\r\n      document.addEventListener('touchmove', this._ontouchmove);\r\n\r\n      this.root.addEventListener('wheel', this._onwheel.bind(this));\r\n      this.root.addEventListener('keyup', this._onkeyup.bind(this));\r\n      this.root.addEventListener('keydown', this._onkeydown.bind(this));\r\n\r\n      this.promptButton.addEventListener('touchstart', this.submitPrompt.bind(this));\r\n      this.promptButton.addEventListener('mousedown', this.submitPrompt.bind(this));\r\n      this.prompt.addEventListener('keydown', (e) => {\r\n        if (e.keyCode === 13) this.submitPrompt();\r\n      });\r\n    }\r\n\r\n    private removeEventListeners() {\r\n      // We only need to remove the global handlers that were attached to document\r\n      document.removeEventListener('mousedown', this._onmousedown);\r\n      document.removeEventListener('mouseup', this._onmouseup);\r\n      document.removeEventListener('mousemove', this._onmousemove);\r\n      document.removeEventListener('touchstart', this._ontouchstart);\r\n      document.removeEventListener('touchend', this._ontouchend);\r\n      document.removeEventListener('touchmove', this._ontouchmove);\r\n    }\r\n\r\n    private _onwheel(e: WheelEvent) {\r\n      // Scroll up/down triggers key listeners for up/down arrows, but without affecting \"is key pressed?\" blocks\r\n      if (e.deltaY > 0) {\r\n        // 40 = down arrow\r\n        this.runtime.trigger('whenKeyPressed', 40);\r\n      } else if (e.deltaY < 0) {\r\n        // 38 = up arrow\r\n        this.runtime.trigger('whenKeyPressed', 38);\r\n      }\r\n    }\r\n\r\n    private _onkeyup(e: KeyboardEvent) {\r\n      var c = e.keyCode;\r\n      if (c >= 128) c = P.runtime.getKeyCode(e.key) as number;\r\n      if (this.keys[c]) this.keys.any--;\r\n      this.keys[c] = false;\r\n      e.stopPropagation();\r\n      if (e.target === this.canvas) {\r\n        e.preventDefault();\r\n      }\r\n    }\r\n\r\n    private _onkeydown(e: KeyboardEvent) {\r\n      var c = e.keyCode;\r\n      if (c >= 128 && e.key.length === 1) c = P.runtime.getKeyCode(e.key) as number;\r\n      if (!this.keys[c]) this.keys.any++;\r\n      this.keys[c] = true;\r\n      if (e.ctrlKey || e.altKey || e.metaKey || c === 27) return;\r\n      e.stopPropagation();\r\n      if (e.target === this.canvas) {\r\n        e.preventDefault();\r\n        this.runtime.trigger('whenKeyPressed', c);\r\n      }\r\n    }\r\n\r\n    private _onmousedown(e: MouseEvent) {\r\n      if (!this.runtime.isRunning) return;\r\n\r\n      this.updateMousePosition(e);\r\n      this.mousePressed = true;\r\n\r\n      if (e.target === this.canvas) {\r\n        this.clickMouse();\r\n        e.preventDefault();\r\n        this.canvas.focus();\r\n      }\r\n\r\n      this.onmousedown(e);\r\n    }\r\n\r\n    private _onmouseup(e: MouseEvent) {\r\n      if (!this.runtime.isRunning) return;\r\n\r\n      this.updateMousePosition(e);\r\n      this.releaseMouse();\r\n      this.onmouseup(e);\r\n    }\r\n\r\n    private _onmousemove(e: MouseEvent) {\r\n      if (!this.runtime.isRunning) return;\r\n\r\n      this.updateMousePosition(e);\r\n      this.onmousemove(e);\r\n    }\r\n\r\n    private _ontouchend(e: TouchEvent) {\r\n      if (!this.runtime.isRunning) return;\r\n\r\n      this.releaseMouse();\r\n      for (var i = 0; i < e.changedTouches.length; i++) {\r\n        const t = e.changedTouches[i];\r\n        this.ontouch(e, t);\r\n      }\r\n    }\r\n\r\n    private _ontouchstart(e: TouchEvent) {\r\n      if (!this.runtime.isRunning) return;\r\n\r\n      this.mousePressed = true;\r\n\r\n      for (var i = 0; i < e.changedTouches.length; i++) {\r\n        const t = e.changedTouches[i];\r\n        this.updateMousePosition(t);\r\n        if (e.target === this.canvas) {\r\n          this.clickMouse();\r\n        }\r\n        this.ontouch(e, t);\r\n      }\r\n\r\n      if (e.target === this.canvas) e.preventDefault();\r\n    }\r\n\r\n    private _ontouchmove(e: TouchEvent) {\r\n      if (!this.runtime.isRunning) return;\r\n\r\n      this.updateMousePosition(e.changedTouches[0]);\r\n      for (var i = 0; i < e.changedTouches.length; i++) {\r\n        const t = e.changedTouches[i];\r\n        this.ontouch(e, t);\r\n      }\r\n    }\r\n\r\n    // Event hooks for responding to user actions\r\n    // These are designed to be used by implementors\r\n    ontouch(e: TouchEvent, t: Touch) {}\r\n    onmousedown(e: MouseEvent) {}\r\n    onmouseup(e: MouseEvent) {}\r\n    onmousemove(e: MouseEvent) {}\r\n\r\n    /**\r\n     * Delete the stage.\r\n     */\r\n    destroy() {\r\n      this.runtime.stopAll();\r\n      this.runtime.pause();\r\n      this.stopAllSounds();\r\n      for (const extension of this.extensions) {\r\n        extension.destroy();\r\n      }\r\n      this.removeEventListeners();\r\n    }\r\n\r\n    pause() {\r\n      for (const extension of this.extensions) {\r\n        extension.onpause();\r\n      }\r\n    }\r\n\r\n    start() {\r\n      for (const extension of this.extensions) {\r\n        extension.onstart();\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Give browser focus to the Stage.\r\n     */\r\n    focus() {\r\n      if (this.promptId < this.nextPromptId) {\r\n        this.prompt.focus();\r\n      } else {\r\n        this.canvas.focus();\r\n      }\r\n    }\r\n\r\n    updateMousePosition(e) {\r\n      var rect = this.canvas.getBoundingClientRect();\r\n      var x = (e.clientX - rect.left) / this.zoom - 240;\r\n      var y = 180 - (e.clientY - rect.top) / this.zoom;\r\n      this.rawMouseX = x;\r\n      this.rawMouseY = y;\r\n      if (x < -240) x = -240;\r\n      if (x > 240) x = 240;\r\n      if (y < -180) y = -180;\r\n      if (y > 180) y = 180;\r\n      this.mouseX = x;\r\n      this.mouseY = y;\r\n    }\r\n\r\n    /**\r\n     * Changes the zoom level and resizes DOM elements.\r\n     */\r\n    setZoom(zoom: number) {\r\n      if (this.zoom === zoom) return;\r\n      this.renderer.resize(zoom);\r\n      this.root.style.width = (480 * zoom | 0) + 'px';\r\n      this.root.style.height = (360 * zoom | 0) + 'px';\r\n      this.root.style.fontSize = (zoom*10) + 'px';\r\n      this.zoom = zoom;\r\n      // Temporary fix to make Scratch 3 list watchers properly resize when paused\r\n      if (!this.runtime.isRunning) {\r\n        for (const watcher of this.allWatchers) {\r\n          if (watcher instanceof P.sb3.Scratch3ListWatcher) {\r\n            watcher.updateList();\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    clickMouse() {\r\n      this.mouseSprite = undefined;\r\n      for (var i = this.children.length; i--;) {\r\n        var c = this.children[i];\r\n        if (c.visible && c.filters.ghost < 100 && c.touching(SpecialObjects.Mouse)) {\r\n          if (c.isDraggable) {\r\n            this.mouseSprite = c;\r\n            c.mouseDown();\r\n          } else {\r\n            this.runtime.triggerFor(c, 'whenClicked');\r\n          }\r\n          return;\r\n        }\r\n      }\r\n      this.runtime.triggerFor(this, 'whenClicked');\r\n    }\r\n\r\n    releaseMouse() {\r\n      this.mousePressed = false;\r\n      if (this.mouseSprite) {\r\n        this.mouseSprite.mouseUp();\r\n        this.mouseSprite = undefined;\r\n      }\r\n    }\r\n\r\n    setFilter(name: string, value: number) {\r\n      // Override setFilter() to update the filters on the real stage.\r\n      super.setFilter(name, value);\r\n      this.renderer.onStageFiltersChanged();\r\n    }\r\n\r\n    resetFilters() {\r\n      super.resetFilters();\r\n      this.renderer.onStageFiltersChanged();\r\n    }\r\n\r\n    /**\r\n     * Gets an object with its name, ignoring clones.\r\n     * SpecialObjects.Stage will point to the stage.\r\n     */\r\n    getObject(name: string): Base | null {\r\n      for (var i = 0; i < this.children.length; i++) {\r\n        var c = this.children[i];\r\n        if (c.name === name && !c.isClone) {\r\n          return c;\r\n        }\r\n      }\r\n      if (name === SpecialObjects.Stage || name === this.name) {\r\n        return this;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    /**\r\n     * Gets all the objects with a name, including clones.\r\n     * Special values are not supported.\r\n     */\r\n    getObjects(name: string): P.core.Base[] {\r\n      const result: P.core.Base[] = [];\r\n      for (var i = 0; i < this.children.length; i++) {\r\n        if (this.children[i].name === name) {\r\n          result.push(this.children[i]);\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n\r\n    /**\r\n     * Determines the position of an object, with support for special values.\r\n     */\r\n    getPosition(name: string): {x: number, y: number} | null {\r\n      switch (name) {\r\n        case SpecialObjects.Mouse: return {\r\n          x: this.mouseX,\r\n          y: this.mouseY,\r\n        };\r\n        case SpecialObjects.Random: return {\r\n          x: Math.round(480 * Math.random() - 240),\r\n          y: Math.round(360 * Math.random() - 180),\r\n        };\r\n      }\r\n\r\n      const sprite = this.getObject(name);\r\n      if (!sprite) return null;\r\n      return {\r\n        x: sprite.scratchX,\r\n        y: sprite.scratchY,\r\n      };\r\n    }\r\n\r\n    /**\r\n     * Draws this stage on it's renderer.\r\n     */\r\n    draw() {\r\n      this.renderer.drawFrame();\r\n\r\n      for (var i = this.allWatchers.length; i--;) {\r\n        var w = this.allWatchers[i];\r\n        if (w.visible) {\r\n          w.update();\r\n        }\r\n      }\r\n\r\n      if (this.hidePrompt) {\r\n        this.hidePrompt = false;\r\n        this.prompter.style.display = 'none';\r\n        this.canvas.focus();\r\n      }\r\n    }\r\n\r\n    showVideo(visible: boolean) {\r\n      if (P.config.supportVideoSensing) {\r\n        if (visible) {\r\n          if (!this.videoElement) {\r\n            this.videoElement = document.createElement('video');\r\n            this.videoElement.onloadedmetadata = () => {\r\n              this.videoElement.play();\r\n            };\r\n            this.videoElement.style.opacity = '0.5';\r\n            this.root.insertBefore(this.videoElement, this.canvas);\r\n            navigator.mediaDevices.getUserMedia({video: true, audio: false})\r\n              .then((stream) => this.videoElement.srcObject = stream);\r\n          }\r\n          this.videoElement.style.display = 'block';\r\n        } else {\r\n          if (this.videoElement) {\r\n            this.videoElement.style.display = 'none';\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    addExtension(extension: P.ext.Extension) {\r\n      this.extensions.push(extension);\r\n    }\r\n\r\n    initSpeech2Text() {\r\n      if (!this.speech2text && P.ext.speech2text.isSupported()) {\r\n        this.speech2text = new P.ext.speech2text.SpeechToTextExtension(this);\r\n        this.addExtension(this.speech2text);\r\n      }\r\n    }\r\n\r\n    initLoudness() {\r\n      if (!this.microphone) {\r\n        this.microphone = new P.ext.microphone.MicrophoneExtension(this);\r\n        this.addExtension(this.microphone);\r\n      }\r\n    }\r\n\r\n    stopAllSounds() {\r\n      for (var children = this.children, i = children.length; i--;) {\r\n        children[i].stopSounds();\r\n      }\r\n      this.stopSounds();\r\n    }\r\n\r\n    removeAllClones() {\r\n      var i = this.children.length;\r\n      while (i--) {\r\n        if (this.children[i].isClone) {\r\n          this.children[i].remove();\r\n          this.children.splice(i, 1);\r\n        }\r\n      }\r\n    }\r\n\r\n    moveTo() {\r\n      // do nothing -- stage cannot be moved\r\n    }\r\n\r\n    forward() {\r\n      // do nothing -- stage cannot be moved\r\n    }\r\n\r\n    rotatedBounds() {\r\n      return {\r\n        top: 0,\r\n        bottom: 0,\r\n        left: 0,\r\n        right: 0,\r\n      };\r\n    }    \r\n\r\n    submitPrompt() {\r\n      if (this.promptId < this.nextPromptId) {\r\n        this.answer = this.prompt.value;\r\n        this.promptId += 1;\r\n        if (this.promptId >= this.nextPromptId) {\r\n          this.hidePrompt = true;\r\n        }\r\n      }\r\n    }\r\n\r\n    clearPen() {\r\n      this.renderer.penClear();\r\n    }\r\n  }\r\n\r\n  // A sprite object\r\n  export abstract class Sprite extends Base {\r\n    public isSprite = true;\r\n    /**\r\n     * Is this Sprite a clone of another Sprite?\r\n     */\r\n    public isClone = false;\r\n    /**\r\n     * The direction this Sprite is facing.\r\n     * 0 is directly up, and 90 is directly right.\r\n     */\r\n    public direction: number = 90;\r\n    /**\r\n     * How this object rotates.\r\n     */\r\n    public rotationStyle: RotationStyle = RotationStyle.Normal;\r\n    /**\r\n     * Can this Sprite be dragged?\r\n     */\r\n    public isDraggable: boolean = false;\r\n    /**\r\n     * Is this Sprite currently being dragged?\r\n     */\r\n    public isDragging: boolean = false;\r\n    /**\r\n     * This sprite's size, with 1 being 100% (normal size)\r\n     * Sprites are scaled from their costume's center\r\n     */\r\n    public scale: number = 1;\r\n\r\n    // It's related to dragging sprites.\r\n    public dragStartX: number = 0;\r\n    public dragStartY: number = 0;\r\n    public dragOffsetX: number = 0;\r\n    public dragOffsetY: number = 0;\r\n\r\n    constructor(stage: Stage) {\r\n      super();\r\n      this.stage = stage;\r\n    }\r\n\r\n    mouseDown() {\r\n      this.dragStartX = this.scratchX;\r\n      this.dragStartY = this.scratchY;\r\n      this.dragOffsetX = this.scratchX - this.stage.mouseX;\r\n      this.dragOffsetY = this.scratchY - this.stage.mouseY;\r\n      this.isDragging = true;\r\n    }\r\n\r\n    mouseUp() {\r\n      // We consider a sprite to be clicked if it has been dragged to the same start & end points\r\n      if (this.isDragging && this.scratchX === this.dragStartX && this.scratchY === this.dragStartY) {\r\n        this.stage.runtime.triggerFor(this, 'whenClicked');\r\n      }\r\n      this.isDragging = false;\r\n    }\r\n\r\n    // Determines the rotated bounds of the sprite.\r\n    rotatedBounds() {\r\n      const costume = this.costumes[this.currentCostumeIndex];\r\n\r\n      const scale = costume.scale * this.scale;\r\n      var left = -costume.rotationCenterX * scale;\r\n      var top = costume.rotationCenterY * scale;\r\n      var right = left + costume.width * scale;\r\n      var bottom = top - costume.height * scale;\r\n\r\n      if (this.rotationStyle !== RotationStyle.Normal) {\r\n        if (this.rotationStyle === RotationStyle.LeftRight && this.direction < 0) {\r\n          right = -left;\r\n          left = right - costume.width * costume.scale * this.scale;\r\n        }\r\n        return {\r\n          left: this.scratchX + left,\r\n          right: this.scratchX + right,\r\n          top: this.scratchY + top,\r\n          bottom: this.scratchY + bottom\r\n        };\r\n      }\r\n\r\n      const mSin = Math.sin(this.direction * Math.PI / 180);\r\n      const mCos = Math.cos(this.direction * Math.PI / 180);\r\n\r\n      // Top left\r\n      const tlX = mSin * left - mCos * top;\r\n      const tlY = mCos * left + mSin * top;\r\n\r\n      // Top right\r\n      const trX = mSin * right - mCos * top;\r\n      const trY = mCos * right + mSin * top;\r\n\r\n      // Bottom left\r\n      const blX = mSin * left - mCos * bottom;\r\n      const blY = mCos * left + mSin * bottom;\r\n\r\n      // Bottom right\r\n      const brX = mSin * right - mCos * bottom;\r\n      const brY = mCos * right + mSin * bottom;\r\n\r\n      return {\r\n        left: this.scratchX + Math.min(tlX, trX, blX, brX),\r\n        right: this.scratchX + Math.max(tlX, trX, blX, brX),\r\n        top: this.scratchY + Math.max(tlY, trY, blY, brY),\r\n        bottom: this.scratchY + Math.min(tlY, trY, blY, brY)\r\n      };\r\n    }\r\n\r\n    // Shows the rotated bounds of the sprite. For debugging.\r\n    showRotatedBounds() {\r\n      var bounds = this.rotatedBounds();\r\n      var div = document.createElement('div');\r\n      div.style.outline = '1px solid red';\r\n      div.style.position = 'absolute';\r\n      div.style.left = (240 + bounds.left) + 'px';\r\n      div.style.top = (180 - bounds.top) + 'px';\r\n      div.style.width = (bounds.right - bounds.left) + 'px';\r\n      div.style.height = (bounds.top - bounds.bottom) + 'px';\r\n      this.stage.canvas.parentNode!.appendChild(div);\r\n    }\r\n\r\n    // Implementing Scratch blocks\r\n\r\n    createVariableWatcher(target: P.core.Base, variableName: string) {\r\n      // Asking our parent to handle it is easier.\r\n      return this.stage.createVariableWatcher(target, variableName);\r\n    }\r\n\r\n    // Moves forward some number of steps in the current direction.\r\n    forward(steps: number) {\r\n      const d = (90 - this.direction) * Math.PI / 180;\r\n      this.moveTo(this.scratchX + steps * Math.cos(d), this.scratchY + steps * Math.sin(d));\r\n    }\r\n\r\n    // Moves the sprite to a coordinate\r\n    // Draws a line if the pen is currently down.\r\n    moveTo(x: number, y: number) {\r\n      var ox = this.scratchX;\r\n      var oy = this.scratchY;\r\n      if (ox === x && oy === y && !this.isPenDown) {\r\n        return;\r\n      }\r\n      this.scratchX = x;\r\n      this.scratchY = y;\r\n\r\n      if (this.isPenDown && !this.isDragging) {\r\n        this.stage.renderer.penLine(this.penColor, this.penSize, ox, oy, x, y);\r\n      }\r\n\r\n      if (this.saying) {\r\n        this.updateBubble();\r\n      }\r\n    }\r\n\r\n    // Faces in a direction.\r\n    setDirection(degrees: number) {\r\n      var d = degrees % 360;\r\n      if (d > 180) d -= 360;\r\n      if (d <= -180) d += 360;\r\n      this.direction = d;\r\n      if (this.saying) this.updateBubble();\r\n    }\r\n\r\n    // Clones this sprite.\r\n    clone() {\r\n      const clone = this._clone();\r\n      clone.isClone = true;\r\n\r\n      // Copy variables and lists without passing reference\r\n      for (const key of Object.keys(this.vars)) {\r\n        clone.vars[key] = this.vars[key];\r\n      }\r\n      for (const key of Object.keys(this.lists)) {\r\n        clone.lists[key] = this.lists[key].slice(0);\r\n      }\r\n\r\n      clone.filters = {\r\n        color: this.filters.color,\r\n        fisheye: this.filters.fisheye,\r\n        whirl: this.filters.whirl,\r\n        pixelate: this.filters.pixelate,\r\n        mosaic: this.filters.mosaic,\r\n        brightness: this.filters.brightness,\r\n        ghost: this.filters.ghost\r\n      };\r\n\r\n      // Copy scripts\r\n      clone.procedures = this.procedures;\r\n      clone.listeners = this.listeners;\r\n      clone.fns = this.fns;\r\n\r\n      // Copy Data\r\n      clone.name = this.name;\r\n      clone.costumes = this.costumes;\r\n      clone.currentCostumeIndex = this.currentCostumeIndex;\r\n      clone.sounds = this.sounds;\r\n      clone.soundRefs = this.soundRefs;\r\n      clone.direction = this.direction;\r\n      clone.instrument = this.instrument;\r\n      clone.isDraggable = this.isDraggable;\r\n      clone.rotationStyle = this.rotationStyle;\r\n      clone.scale = this.scale;\r\n      clone.volume = this.volume;\r\n      clone.scratchX = this.scratchX;\r\n      clone.scratchY = this.scratchY;\r\n      clone.visible = this.visible;\r\n      clone.penSize = this.penSize;\r\n      clone.penColor.copy(this.penColor);\r\n      clone.isPenDown = this.isPenDown;\r\n      clone.watchers = this.watchers;\r\n      clone.listWatchers = this.listWatchers;\r\n\r\n      return clone;\r\n    }\r\n\r\n    // Must return a new instance of this Sprite's constructor. Data copying will be handled in clone()\r\n    protected abstract _clone(): P.core.Sprite;\r\n\r\n    /**\r\n     * Determines if this sprite is touching another object.\r\n     * @param thing The name of the other object(s)\r\n     */\r\n    touching(thing: string) {\r\n      if (thing === SpecialObjects.Mouse) {\r\n        const x = this.stage.rawMouseX;\r\n        const y = this.stage.rawMouseY;\r\n        return this.stage.renderer.spriteTouchesPoint(this, x, y);\r\n      } else if (thing === SpecialObjects.Edge) {\r\n        const bounds = this.rotatedBounds();\r\n        return bounds.left <= -240 || bounds.right >= 240 || bounds.top >= 180 || bounds.bottom <= -180;\r\n      } else {\r\n        if (!this.visible) return false;\r\n        const sprites = this.stage.getObjects(thing);\r\n        return this.stage.renderer.spritesIntersect(this, sprites);\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Determines if this Sprite is touching a color.\r\n     * @param color RGB color, as a single number.\r\n     */\r\n    touchingColor(color: number) {\r\n      return this.stage.renderer.spriteTouchesColor(this, color);\r\n    }\r\n\r\n    /**\r\n     * Determines if one of this Sprite's colors are touching another color.\r\n     * @param sourceColor This sprite's color, as an RGB color.\r\n     * @param touchingColor The other color, as an RGB color.\r\n     */\r\n    colorTouchingColor(sourceColor: number, touchingColor: number) {\r\n      return this.stage.renderer.spriteColorTouchesColor(this, sourceColor, touchingColor);\r\n    }\r\n\r\n    /**\r\n     * Bounces this Sprite off of an edge of the Stage, if this Sprite is touching one.\r\n     */\r\n    bounceOffEdge() {\r\n      var b = this.rotatedBounds();\r\n      var dl = 240 + b.left;\r\n      var dt = 180 - b.top;\r\n      var dr = 240 - b.right;\r\n      var db = 180 + b.bottom;\r\n\r\n      var d = Math.min(dl, dt, dr, db);\r\n      if (d > 0) return;\r\n\r\n      var dir = this.direction * Math.PI / 180;\r\n      var dx = Math.sin(dir);\r\n      var dy = -Math.cos(dir);\r\n\r\n      switch (d) {\r\n        case dl: dx = Math.max(0.2, Math.abs(dx)); break;\r\n        case dt: dy = Math.max(0.2, Math.abs(dy)); break;\r\n        case dr: dx = -Math.max(0.2, Math.abs(dx)); break;\r\n        case db: dy = -Math.max(0.2, Math.abs(dy)); break;\r\n      }\r\n\r\n      this.direction = Math.atan2(dy, dx) * 180 / Math.PI + 90;\r\n      if (this.saying) this.updateBubble();\r\n    }\r\n\r\n    /**\r\n     * Determines the distance from this Sprite's center to another position.\r\n     * @param thing The name of any position or Sprite, as accepted by getPosition()\r\n     */\r\n    distanceTo(thing: string) {\r\n      const p = this.stage.getPosition(thing);\r\n      if (!p) {\r\n        return 10000;\r\n      }\r\n      const x = p.x;\r\n      const y = p.y;\r\n      return Math.sqrt((this.scratchX - x) * (this.scratchX - x) + (this.scratchY - y) * (this.scratchY - y));\r\n    }\r\n\r\n    /**\r\n     * Makes this Sprite go to another Sprite\r\n     * @param thing The name of any position or Sprite, as accepted by getPosition()\r\n     */\r\n    gotoObject(thing: string) {\r\n      const position = this.stage.getPosition(thing);\r\n      if (!position) {\r\n        return 0;\r\n      }\r\n      this.moveTo(position.x, position.y);\r\n    }\r\n\r\n    /**\r\n     * Makes this Sprite point towards another object.\r\n     * @param thing The name of any position or Sprite, as accepted by getPosition()\r\n     */\r\n    pointTowards(thing: string) {\r\n      const position = this.stage.getPosition(thing);\r\n      if (!position) {\r\n        return 0;\r\n      }\r\n      const dx = position.x - this.scratchX;\r\n      const dy = position.y - this.scratchY;\r\n      this.direction = dx === 0 && dy === 0 ? 90 : Math.atan2(dx, dy) * 180 / Math.PI;\r\n      if (this.saying) this.updateBubble();\r\n    }\r\n  }\r\n\r\n  interface CostumeOptions {\r\n    name: string;\r\n    bitmapResolution: number;\r\n    rotationCenterX: number;\r\n    rotationCenterY: number;\r\n  }\r\n\r\n  // A costume\r\n  export abstract class Costume {\r\n    public name: string;\r\n    public rotationCenterX: number;\r\n    public rotationCenterY: number;\r\n    public bitmapResolution: number;\r\n    public scale: number;\r\n\r\n    public width: number;\r\n    public height: number;\r\n\r\n    constructor(costumeData: CostumeOptions) {\r\n      this.bitmapResolution = costumeData.bitmapResolution;\r\n      this.scale = 1 / this.bitmapResolution;\r\n      this.name = costumeData.name;\r\n      this.rotationCenterX = costumeData.rotationCenterX;\r\n      this.rotationCenterY = costumeData.rotationCenterY;\r\n    }\r\n\r\n    /**\r\n     * Gets a 2D context representation of the costume's source (1x zoom)\r\n     */\r\n    abstract getContext(): CanvasRenderingContext2D;\r\n\r\n    /**\r\n     * Gets a zoom level of the costume. The costume may provide a different zoom level than requested.\r\n     */\r\n    abstract get(scale: number): HTMLImageElement | HTMLCanvasElement;\r\n  }\r\n\r\n  export class BitmapCostume extends Costume {\r\n    private _context: CanvasRenderingContext2D | null;\r\n    private source: HTMLCanvasElement | HTMLImageElement;\r\n\r\n    constructor(source: HTMLCanvasElement | HTMLImageElement, options: CostumeOptions) {\r\n      super(options);\r\n      this.source = source;\r\n      if (source.tagName === 'CANVAS') {\r\n        const ctx = (source as HTMLCanvasElement).getContext('2d');\r\n        if (!ctx) {\r\n          throw new Error('Cannot get 2d rendering context of costume source');\r\n        }\r\n        this._context = ctx;\r\n      } else {\r\n        this._context = null;\r\n      }\r\n      this.width = source.width;\r\n      this.height = source.height;\r\n    }\r\n\r\n    get(scale: number) {\r\n      // Bitmap costumes do not have different resolutions\r\n      return this.source;\r\n    }\r\n\r\n    getContext() {\r\n      if (this._context) return this._context;\r\n\r\n      const canvas = document.createElement('canvas');\r\n      const ctx = canvas.getContext('2d');\r\n      if (!ctx) {\r\n        throw new Error('cannot get 2d rendering context for BitmapCustome ' + this.name);\r\n      }\r\n      canvas.width = this.width;\r\n      canvas.height = this.height;\r\n      ctx.drawImage(this.source, 0, 0);\r\n      this._context = ctx;\r\n      return ctx;\r\n    }\r\n  }\r\n\r\n  export class VectorCostume extends Costume {\r\n    public static MAX_ZOOM: number = 6;\r\n\r\n    private source: HTMLImageElement;\r\n    private _context: CanvasRenderingContext2D;\r\n    private scales: Array<HTMLCanvasElement> = [];\r\n\r\n    constructor(svg: HTMLImageElement, options: CostumeOptions) {\r\n      super(options);\r\n      if (svg.height < 1 || svg.width < 1) {\r\n        svg = new Image(1, 1);\r\n      }\r\n      this.width = svg.width;\r\n      this.height = svg.height;\r\n      this.source = svg;\r\n      // calculate the 1x zoom before load because it'll most likely be used.\r\n      // TODO: maybe don't do this?\r\n      this.scales[0] = this.getScale(1);\r\n    }\r\n\r\n    private getScale(scale: number) {\r\n      const canvas = document.createElement('canvas');\r\n      canvas.width = Math.max(1, this.width * scale);\r\n      canvas.height = Math.max(1, this.height * scale);\r\n      const ctx = canvas.getContext('2d');\r\n      if (!ctx) {\r\n        // If we already have a 1x zoom calculated, it would be best to return that instead of throwing an error.\r\n        if (this.scales[0]) {\r\n          return this.scales[0];\r\n        }\r\n        throw new Error('cannot get 2d rendering context while rendering VectorCostume ' + this.name + ' at scale ' + scale);\r\n      }\r\n      ctx.drawImage(this.source, 0, 0, canvas.width, canvas.height);\r\n      return canvas;\r\n    }\r\n\r\n    get(scale: number) {\r\n      scale = Math.min(VectorCostume.MAX_ZOOM, Math.ceil(scale));\r\n      const index = scale - 1;\r\n      if (!this.scales[index]) {\r\n        this.scales[index] = this.getScale(scale);\r\n      }\r\n      return this.scales[index];\r\n    }\r\n\r\n    getContext() {\r\n      if (this._context) return this._context;\r\n\r\n      const canvas = document.createElement('canvas');\r\n      const ctx = canvas.getContext('2d');\r\n      if (!ctx) {\r\n        throw new Error('cannot get 2d rendering context for VectorCostume ' + this.name);\r\n      }\r\n      canvas.width = this.width;\r\n      canvas.height = this.height;\r\n      ctx.drawImage(this.source, 0, 0);\r\n      this._context = ctx;\r\n      return ctx;\r\n    }\r\n  }\r\n\r\n  interface SoundOptions {\r\n    buffer: AudioBuffer;\r\n    name: string;\r\n  }\r\n  // A sound\r\n  export class Sound {\r\n    // TODO: Sound doesn't truly need name\r\n    public name: string;\r\n    public buffer: AudioBuffer;\r\n    public duration: number;\r\n    public source: AudioBufferSourceNode | null = null;\r\n\r\n    constructor(data: SoundOptions) {\r\n      if (!data.buffer) throw new Error('no AudioBuffer');\r\n      this.name = data.name;\r\n      this.buffer = data.buffer;\r\n      this.duration = this.buffer.duration;\r\n    }\r\n\r\n    createSourceNode() {\r\n      if (this.source) {\r\n        this.source.disconnect();\r\n      }\r\n      this.source = P.audio.context!.createBufferSource();\r\n      this.source.buffer = this.buffer;\r\n      this.source.start();\r\n      return this.source;\r\n    }\r\n  }\r\n\r\n  export abstract class Watcher {\r\n    public stage: Stage;\r\n    public targetName: string;\r\n    public target: Base;\r\n    public valid: boolean = true;\r\n    public visible: boolean = true;\r\n    public x: number = 0;\r\n    public y: number = 0;\r\n\r\n    constructor(stage: Stage, targetName: string) {\r\n      // The stage this variable watcher belongs to.\r\n      this.stage = stage;\r\n\r\n      // The name of the owner of this watcher, if any.\r\n      this.targetName = targetName;\r\n    }\r\n\r\n    // Initializes the Watcher. Called once.\r\n    // Expected to be overridden.\r\n    init() {\r\n      this.target = this.stage.getObject(this.targetName) || this.stage;\r\n    }\r\n\r\n    // The intended way to change visibility\r\n    setVisible(visible: boolean) {\r\n      this.visible = visible;\r\n    }\r\n\r\n    // Updates the VariableWatcher. Called every frame.\r\n    abstract update(): void;\r\n  }\r\n\r\n  // An abstract callable procedure\r\n  export abstract class Procedure {\r\n    public fn: P.runtime.Fn;\r\n    public warp: boolean;\r\n    public inputs: any[];\r\n\r\n    constructor(fn: runtime.Fn, warp: boolean, inputs: any[]) {\r\n      this.fn = fn;\r\n      this.warp = warp;\r\n      this.inputs = inputs;\r\n    }\r\n\r\n    // Call takes a list of inputs and must return the proper arguments to set C.args to in the runtime.\r\n    // Result can be anything as long as the compiler knows how to interpret it.\r\n    abstract call(inputs: any[]): any;\r\n  }\r\n\r\n  /**\r\n   * Determines if an object is a sprite\r\n   * Can be used to ease type assertions.\r\n   */\r\n  export function isSprite(base: P.core.Base): base is P.core.Sprite {\r\n    return base.isSprite;\r\n  }\r\n}\r\n","/// <reference path=\"phosphorus.ts\" />\r\n\r\ninterface FontFaceObserver {\r\n  new(font: string): FontFaceObserver;\r\n  load(text?: string, timeout?: number): Promise<void>;\r\n}\r\ndeclare var FontFaceObserver: FontFaceObserver;\r\n\r\n/**\r\n * Font helpers\r\n */\r\nnamespace P.fonts {\r\n  const fontFamilyCache: ObjectMap<string> = {};\r\n\r\n  export const scratch3 = {\r\n    'Marker': 'fonts/Knewave-Regular.woff',\r\n    'Handwriting': 'fonts/Handlee-Regular.woff',\r\n    'Pixel': 'fonts/Grand9K-Pixel.ttf',\r\n    'Curly': 'fonts/Griffy-Regular.woff',\r\n    'Serif': 'fonts/SourceSerifPro-Regular.woff',\r\n    'Sans Serif': 'fonts/NotoSans-Regular.woff',\r\n    'Scratch': 'fonts/Scratch.ttf',\r\n  };\r\n\r\n  /**\r\n   * Asynchronously load and cache a font\r\n   */\r\n  export function loadLocalFont(fontFamily: string, src: string): Promise<string> {\r\n    if (fontFamilyCache[fontFamily]) {\r\n      return Promise.resolve(fontFamilyCache[fontFamily]);\r\n    }\r\n    return new P.IO.BlobRequest(src, {local: true}).load()\r\n      .then((blob) => P.IO.readers.toDataURL(blob))\r\n      .then((url) => {\r\n        fontFamilyCache[fontFamily] = url;\r\n        return url;\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Gets an already loaded and cached font\r\n   */\r\n  function getFont(fontFamily: string): string | null {\r\n    if (!(fontFamily in fontFamilyCache)) {\r\n      return null;\r\n    }\r\n    return fontFamilyCache[fontFamily];\r\n  }\r\n\r\n  function getCSSFontFace(fontFamily: string, src: string) {\r\n    return `@font-face { font-family: \"${fontFamily}\"; src: url(\"${src}\"); }`;\r\n  }\r\n\r\n  /**\r\n   * Add an inline <style> element to an SVG containing fonts loaded through loadFontSet\r\n   */\r\n  export function addFontRules(svg: SVGElement, fonts: string[]) {\r\n    const cssRules: string[] = [];\r\n    for (const fontName of fonts) {\r\n      const font = getFont(fontName);\r\n      if (!font) {\r\n        console.warn('unknown font from cache', fontName);\r\n        continue;\r\n      }\r\n      cssRules.push(getCSSFontFace(fontName, font));\r\n    }\r\n\r\n    const doc = svg.ownerDocument!;\r\n    const defs = doc.createElementNS('http://www.w3.org/2000/svg', 'defs');\r\n    const style = doc.createElementNS('http://www.w3.org/2000/svg', 'style');\r\n    style.innerHTML = cssRules.join('\\n');\r\n    defs.appendChild(style);\r\n    svg.appendChild(style);\r\n  }\r\n\r\n  /**\r\n   * Load a CSS @font-face font.\r\n   */\r\n  export function loadWebFont(name: string): Promise<void> {\r\n    const observer = new FontFaceObserver(name);\r\n    return observer.load();\r\n  }\r\n}\r\n","/// <reference path=\"phosphorus.ts\" />\r\n\r\n// IO helpers and hooks\r\n\r\nnamespace P.IO {\r\n  /**\r\n   * Configuration of IO behavior\r\n   */\r\n  export var config = {\r\n    /**\r\n     * A relative or absolute path to a full installation of forkphorus, from which \"local\" files can be fetched.\r\n     * Do not including a trailing slash.\r\n     */\r\n    localPath: '',\r\n  };\r\n\r\n  // non-http/https protocols cannot xhr request local files, so utilize forkphorus.github.io instead\r\n  if (['http:', 'https:'].indexOf(location.protocol) === -1) {\r\n    config.localPath = 'https://forkphorus.github.io';\r\n  }\r\n\r\n  interface RequestOptions {\r\n    local?: boolean;\r\n    rejectOnError?: boolean;\r\n  }\r\n\r\n  export abstract class Request<T> {\r\n    public readonly url: string;\r\n    protected readonly rejectOnError: boolean;\r\n\r\n    constructor(url: string, options: RequestOptions = {}) {\r\n      if (options.local) {\r\n        if (url.indexOf('data:') !== 0) {\r\n          url = config.localPath + url;\r\n        }\r\n      }\r\n      this.rejectOnError = options.rejectOnError !== false;\r\n      this.url = url;\r\n    }\r\n\r\n    /**\r\n     * Attempts to load this request.\r\n     */\r\n    load(): Promise<T> {\r\n      return new Promise((resolve, reject) => {\r\n        const attempt = (errorCallback: (err: any) => void) => {\r\n          this._load()\r\n            .then((response) => {\r\n              resolve(response);\r\n            })\r\n            .catch((err) => {\r\n              errorCallback(err);\r\n            });\r\n        };\r\n        attempt((err) => {\r\n          if (!(err + '').includes('abort')) {\r\n            // do not retry after abort\r\n            return;\r\n          }\r\n          // try once more after a short delay\r\n          console.warn(`First attempt to download ${this.url} failed, trying again (${err})`);\r\n          setTimeout(function() {\r\n            attempt((err) => {\r\n              reject(err);\r\n            });\r\n          }, 250);\r\n        });\r\n      });\r\n    }\r\n\r\n    protected abstract _load(): Promise<T>;\r\n  }\r\n\r\n  export abstract class XHRRequest<T> extends Request<T> {\r\n    public xhr: XMLHttpRequest;\r\n    public static acceptableResponseCodes = [0, 200];\r\n\r\n    protected _load(): Promise<T> {\r\n      return new Promise((resolve, reject) => {\r\n        const xhr = new XMLHttpRequest();\r\n        this.xhr = xhr;\r\n        xhr.addEventListener('load', () => {\r\n          if (XHRRequest.acceptableResponseCodes.indexOf(xhr.status) !== -1 || !this.rejectOnError) {\r\n            resolve(xhr.response);\r\n          } else {\r\n            reject(new Error(`HTTP Error ${xhr.status} while downloading ${this.url}`));\r\n          }\r\n        });\r\n        xhr.addEventListener('error', (err) => {\r\n          reject(`Error while downloading ${this.url} (error) (${xhr.status})`);\r\n        });\r\n        xhr.addEventListener('abort', (err) => {\r\n          reject(`Error while downloading ${this.url} (abort) (${xhr.status})`);\r\n        });\r\n        xhr.open('GET', this.url);\r\n        xhr.responseType = this.type as XMLHttpRequestResponseType;\r\n        setTimeout(xhr.send.bind(xhr));\r\n      });\r\n    }\r\n\r\n    protected abstract get type(): string;\r\n  }\r\n\r\n  export class ArrayBufferRequest extends XHRRequest<ArrayBuffer> {\r\n    protected get type() { return 'arraybuffer'; }\r\n  }\r\n  export class BlobRequest extends XHRRequest<Blob> {\r\n    protected get type() { return 'blob'; }\r\n  }\r\n  export class TextRequest extends XHRRequest<string> {\r\n    protected get type() { return 'text'; }\r\n  }\r\n  export class JSONRequest extends XHRRequest<any> {\r\n    protected get type() { return 'json'; }\r\n  }\r\n\r\n  /**\r\n   * Utilities for asynchronously reading Blobs or Files\r\n   */\r\n  export namespace readers {\r\n    type Readable = Blob | File;\r\n\r\n    export function toArrayBuffer(object: Readable): Promise<ArrayBuffer> {\r\n      return new Promise((resolve, reject) => {\r\n        const fileReader = new FileReader();\r\n        fileReader.onloadend = function() {\r\n          resolve(fileReader.result as ArrayBuffer);\r\n        };\r\n        fileReader.onerror = function(err) {\r\n          reject('Could not read object');\r\n        };\r\n        fileReader.onprogress = function(progress) {\r\n\r\n        };\r\n        fileReader.readAsArrayBuffer(object);\r\n      });\r\n    }\r\n\r\n    export function toDataURL(object: Readable): Promise<string> {\r\n      return new Promise((resolve, reject) => {\r\n        const fileReader = new FileReader();\r\n        fileReader.onloadend = function() {\r\n          resolve(fileReader.result as string);\r\n        };\r\n        fileReader.onerror = function(err) {\r\n          reject('Could not read object');\r\n        };\r\n        fileReader.onprogress = function(progress) {\r\n\r\n        };\r\n        fileReader.readAsDataURL(object);\r\n      });\r\n    }\r\n\r\n    export function toText(object: Readable): Promise<string> {\r\n      return new Promise((resolve, reject) => {\r\n        const fileReader = new FileReader();\r\n        fileReader.onloadend = function() {\r\n          resolve(fileReader.result as string);\r\n        };\r\n        fileReader.onerror = function(err) {\r\n          reject('Could not read object');\r\n        };\r\n        fileReader.onprogress = function(progress) {\r\n\r\n        };\r\n        fileReader.readAsText(object);\r\n      });\r\n    }\r\n  }\r\n}\r\n","/// <reference path=\"phosphorus.ts\" />\r\n/// <reference path=\"core.ts\" />\r\n/// <reference path=\"audio.ts\" />\r\n\r\n// The phosphorus runtime for Scratch\r\n// Provides methods expected at runtime by scripts created by the compiler and an environment for Scratch scripts to run\r\nnamespace P.runtime {\r\n  export type Fn = () => void;\r\n\r\n  // Global variables expected by scripts at runtime:\r\n  // Current runtime\r\n  var runtime: Runtime;\r\n  // Current stage\r\n  var self: P.core.Stage;\r\n  // Current sprite or stage\r\n  var S: P.core.Base;\r\n  // Current thread state.\r\n  var R;\r\n  // Stack of states (R) for this thread\r\n  var STACK;\r\n  // Current procedure call, if any. Contains arguments.\r\n  var C: ThreadCall;\r\n  // This thread's call (C) stack\r\n  var CALLS;\r\n  // If level of layers of \"Run without screen refresh\" we are in\r\n  // Each level (usually procedures) of depth will increment and decrement as they start and stop.\r\n  // As long as this is greater than 0, functions will run without waiting for the screen.\r\n  var WARP: number;\r\n  // ??\r\n  var BASE;\r\n  // The ID of the active thread in the Runtime's queue\r\n  var THREAD: number;\r\n  // The next function to run immediately after this one.\r\n  var IMMEDIATE: Fn | null | undefined;\r\n  // Has a \"visual change\" been made in this frame?\r\n  var VISUAL: boolean;\r\n\r\n  // Note:\r\n  // Your editor might warn you about \"unused variables\" or things like that.\r\n  // Due to the nature of the runtime you should ignore these warnings.\r\n\r\n  const epoch = Date.UTC(2000, 0, 1);\r\n  const INSTRUMENTS = P.audio.instruments;\r\n  const DRUMS = P.audio.drums;\r\n  const DIGIT = /\\d/;\r\n\r\n  var bool = function(v) {\r\n    return +v !== 0 && v !== '' && v !== 'false' && v !== false;\r\n  };\r\n\r\n  var compare = function(x, y) {\r\n    if ((typeof x === 'number' || DIGIT.test(x)) && (typeof y === 'number' || DIGIT.test(y))) {\r\n      var nx = +x;\r\n      var ny = +y;\r\n      if (nx === nx && ny === ny) {\r\n        return nx < ny ? -1 : nx === ny ? 0 : 1;\r\n      }\r\n    }\r\n    var xs = ('' + x).toLowerCase();\r\n    var ys = ('' + y).toLowerCase();\r\n    return xs < ys ? -1 : xs === ys ? 0 : 1;\r\n  };\r\n\r\n  var numLess = function(nx, y) {\r\n    if (typeof y === 'number' || DIGIT.test(y)) {\r\n      var ny = +y;\r\n      if (ny === ny) {\r\n        return nx < ny;\r\n      }\r\n    }\r\n    var ys = ('' + y).toLowerCase();\r\n    return '' + nx < ys;\r\n  };\r\n\r\n  var numGreater = function(nx, y) {\r\n    if (typeof y === 'number' || DIGIT.test(y)) {\r\n      var ny = +y;\r\n      if (ny === ny) {\r\n        return nx > ny;\r\n      }\r\n    }\r\n    var ys = ('' + y).toLowerCase();\r\n    return '' + nx > ys;\r\n  };\r\n\r\n  var equal = function(x: any, y: any) {\r\n    if ((typeof x === 'number' || typeof x === 'boolean' || DIGIT.test(x)) && (typeof y === 'number' || typeof x === 'boolean' || DIGIT.test(y))) {\r\n      var nx = +x;\r\n      var ny = +y;\r\n      if (nx === nx && ny === ny) {\r\n        return nx === ny;\r\n      }\r\n    }\r\n    var xs = ('' + x).toLowerCase();\r\n    var ys = ('' + y).toLowerCase();\r\n    return xs === ys;\r\n  };\r\n\r\n  // Equality testing optimized for the first argument always being a number.\r\n  var numEqual = function(nx: number, y: any) {\r\n    if (typeof y === 'number' || DIGIT.test(y)) {\r\n      var ny = +y;\r\n      return ny === ny && nx === ny;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  // Equality testing optimized for either argument never being number-like.\r\n  var strEqual = function(a: any, b: any) {\r\n    return (a + '').toLowerCase() === (b + '').toLowerCase();\r\n  };\r\n\r\n  var stringContains = function(baseString: string, needle: string) {\r\n    return baseString.toLowerCase().indexOf(needle.toLowerCase()) > -1;\r\n  };\r\n\r\n  var mod = function(x, y) {\r\n    var r = x % y;\r\n    // need special behavior for handling negatives\r\n    if (r / y < 0) {\r\n      r += y;\r\n    }\r\n    return r;\r\n  };\r\n\r\n  var random = function(x, y) {\r\n    var fractional =\r\n      (typeof x === 'string' && !isNaN(+x) && x.indexOf('.') > -1) ||\r\n      (typeof y === 'string' && !isNaN(+y) && y.indexOf('.') > -1);\r\n    x = +x || 0;\r\n    y = +y || 0;\r\n    if (x > y) {\r\n      var tmp = y;\r\n      y = x;\r\n      x = tmp;\r\n    }\r\n    if (!fractional && (x % 1 === 0 && y % 1 === 0)) {\r\n      return Math.floor(Math.random() * (y - x + 1)) + x;\r\n    }\r\n    return Math.random() * (y - x) + x;\r\n  };\r\n\r\n  // Clone a sprite\r\n  var clone = function(name) {\r\n    const parent = name === '_myself_' ? S : self.getObject(name);\r\n    if (!parent || !P.core.isSprite(parent)) {\r\n      // sprites that do not exist and stages cannot be cloned\r\n      return;\r\n    }\r\n    const c = parent.clone();\r\n    self.children.splice(self.children.indexOf(parent), 0, c);\r\n    runtime.triggerFor(c, 'whenCloned');\r\n  };\r\n\r\n  var getVars = function(name) {\r\n    return self.vars[name] !== undefined ? self.vars : S.vars;\r\n  };\r\n\r\n  var getLists = function(name) {\r\n    if (self.lists[name] !== undefined) return self.lists;\r\n    if (S.lists[name] === undefined) {\r\n      S.lists[name] = [];\r\n    }\r\n    return S.lists;\r\n  };\r\n\r\n  var listIndex = function(list, index, length) {\r\n    var i = index | 0;\r\n    if (i === index) return i > 0 && i <= length ? i - 1 : -1;\r\n    if (index === 'random' || index === 'any') {\r\n      return Math.random() * length | 0;\r\n    }\r\n    if (index === 'last') {\r\n      return length - 1;\r\n    }\r\n    return i > 0 && i <= length ? i - 1 : -1;\r\n  };\r\n\r\n  var contentsOfList = function(list) {\r\n    var isSingle = true;\r\n    for (var i = list.length; i--;) {\r\n      if (list[i].length !== 1) {\r\n        isSingle = false;\r\n        break;\r\n      }\r\n    }\r\n    return list.join(isSingle ? '' : ' ');\r\n  };\r\n  var getLineOfList = function(list, index) {\r\n    var i = listIndex(list, index, list.length);\r\n    return i !== -1 ? list[i] : '';\r\n  };\r\n  var listContains = function(list, value) {\r\n    for (var i = list.length; i--;) {\r\n      if (equal(list[i], value)) return true;\r\n    }\r\n    return false;\r\n  };\r\n  var listIndexOf = function(list, value) {\r\n    for (var i = 0; i < list.length; i++) {\r\n      if (equal(list[i], value)) return i + 1;\r\n    }\r\n    return 0;\r\n  };\r\n  var appendToList = function(list, value) {\r\n    list.push(value);\r\n  };\r\n  var deleteLineOfList = function(list, index) {\r\n    if (index === 'all') {\r\n      list.length = 0;\r\n    } else {\r\n      var i = listIndex(list, index, list.length);\r\n      if (i === list.length - 1) {\r\n        list.pop();\r\n      } else if (i !== -1) {\r\n        list.splice(i, 1);\r\n      }\r\n    }\r\n  };\r\n  var insertInList = function(list, index, value) {\r\n    var i = listIndex(list, index, list.length + 1);\r\n    if (i === list.length) {\r\n      list.push(value);\r\n    } else if (i !== -1) {\r\n      list.splice(i, 0, value);\r\n    }\r\n  };\r\n  var setLineOfList = function(list, index, value) {\r\n    var i = listIndex(list, index, list.length);\r\n    if (i !== -1) {\r\n      list[i] = value;\r\n    }\r\n  };\r\n\r\n  // \"Watched\" variants of the above that set modified=true\r\n  var watchedAppendToList = function(list, value) {\r\n    appendToList(list, value);\r\n    if (!list.modified) list.modified = true;\r\n  };\r\n  var watchedDeleteLineOfList = function(list, index) {\r\n    deleteLineOfList(list, index);\r\n    if (!list.modified) list.modified = true;\r\n  };\r\n  var watchedInsertInList = function(list, index, value) {\r\n    insertInList(list, index, value);\r\n    if (!list.modified) list.modified = true;\r\n  };\r\n  var watchedSetLineOfList = function(list, index, value) {\r\n    setLineOfList(list, index, value);\r\n    if (!list.modified) list.modified = true;\r\n  };\r\n\r\n  var mathFunc = function(f, x) {\r\n    switch (f) {\r\n      case 'abs':\r\n        return Math.abs(x);\r\n      case 'floor':\r\n        return Math.floor(x);\r\n      case 'sqrt':\r\n        return Math.sqrt(x);\r\n      case 'ceiling':\r\n        return Math.ceil(x);\r\n      case 'cos':\r\n        return Math.cos(x * Math.PI / 180);\r\n      case 'sin':\r\n        return Math.sin(x * Math.PI / 180);\r\n      case 'tan':\r\n        return Math.tan(x * Math.PI / 180);\r\n      case 'asin':\r\n        return Math.asin(x) * 180 / Math.PI;\r\n      case 'acos':\r\n        return Math.acos(x) * 180 / Math.PI;\r\n      case 'atan':\r\n        return Math.atan(x) * 180 / Math.PI;\r\n      case 'ln':\r\n        return Math.log(x);\r\n      case 'log':\r\n        return Math.log(x) / Math.LN10;\r\n      case 'e ^':\r\n        return Math.exp(x);\r\n      case '10 ^':\r\n        return Math.exp(x * Math.LN10);\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  var attribute = function(attr, objName) {\r\n    // https://github.com/LLK/scratch-vm/blob/e236d29ff5e03f7c4d77a614751da860521771fd/src/blocks/scratch3_sensing.js#L280\r\n    const o = self.getObject(objName);\r\n    if (!o) return 0;\r\n    if (P.core.isSprite(o)) {\r\n      switch (attr) {\r\n        case 'x position': return o.scratchX;\r\n        case 'y position': return o.scratchY;\r\n        case 'direction': return o.direction;\r\n        case 'costume #': return o.currentCostumeIndex + 1;\r\n        case 'costume name': return o.costumes[o.currentCostumeIndex].name;\r\n        case 'size': return o.scale * 100;\r\n        case 'volume': return o.volume * 100;\r\n      }\r\n    } else {\r\n      switch (attr) {\r\n        case 'background #':\r\n        case 'backdrop #': return o.currentCostumeIndex + 1;\r\n        case 'backdrop name': return o.costumes[o.currentCostumeIndex].name;\r\n        case 'volume': return o.volume * 100;\r\n      }\r\n    }\r\n    const value = o.vars[attr];\r\n    if (value !== undefined) {\r\n      return value;\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  var timeAndDate = function(format: any): number {\r\n    switch (format) {\r\n      case 'year':\r\n        return new Date().getFullYear();\r\n      case 'month':\r\n        return new Date().getMonth() + 1;\r\n      case 'date':\r\n        return new Date().getDate();\r\n      case 'day of week':\r\n        return new Date().getDay() + 1;\r\n      case 'hour':\r\n        return new Date().getHours();\r\n      case 'minute':\r\n        return new Date().getMinutes();\r\n      case 'second':\r\n        return new Date().getSeconds();\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  /**\r\n   * Converts the name of a key to its code\r\n   */\r\n  export function getKeyCode(keyName: string): number | 'any' {\r\n    switch (keyName.toLowerCase()) {\r\n      case 'space': return 32;\r\n      case 'left arrow': return 37;\r\n      case 'up arrow': return 38;\r\n      case 'right arrow': return 39;\r\n      case 'down arrow': return 40;\r\n      case 'any': return 'any';\r\n    }\r\n\r\n    return keyName.toUpperCase().charCodeAt(0);\r\n  }\r\n\r\n  // Load audio methods if audio is supported\r\n  const audioContext = P.audio.context;\r\n  if (audioContext) {\r\n    var playNote = function(key, duration) {\r\n      var span;\r\n      var spans = INSTRUMENTS[S.instrument];\r\n      for (var i = 0, l = spans.length; i < l; i++) {\r\n        span = spans[i];\r\n        if (span.top >= key || span.top === 128) break;\r\n      }\r\n      return playSpan(span, key, duration);\r\n    };\r\n\r\n    var playSpan = function(span, key, duration) {\r\n      const node = P.audio.playSpan(span, key, duration, S.getAudioNode());\r\n      return {\r\n        stopped: false,\r\n        node,\r\n        base: BASE,\r\n      };\r\n    };\r\n\r\n    var applySoundEffects = function(node: AudioBufferSourceNode) {\r\n      node.playbackRate.value = Math.pow(2, (S.soundFilters.pitch / 10 / 12));\r\n    };\r\n\r\n    var playSound = function(sound: P.core.Sound): P.core.ActiveSound {\r\n      const node = sound.createSourceNode();\r\n      applySoundEffects(node);\r\n      node.connect(S.getAudioNode());\r\n      return {\r\n        stopped: false,\r\n        node,\r\n        base: BASE,\r\n      };\r\n    };\r\n\r\n    var startSound = function(sound: P.core.Sound) {\r\n      const node = sound.createSourceNode();\r\n      applySoundEffects(node);\r\n      node.connect(S.getAudioNode());\r\n    };\r\n  }\r\n\r\n  var save = function() {\r\n    STACK.push(R);\r\n    R = {};\r\n  };\r\n\r\n  var restore = function() {\r\n    R = STACK.pop();\r\n  };\r\n\r\n  var call = function(procedure: P.core.Procedure, id, values) {\r\n    if (procedure) {\r\n      STACK.push(R);\r\n      CALLS.push(C);\r\n      C = {\r\n        base: procedure.fn,\r\n        fn: S.fns[id],\r\n        args: procedure.call(values),\r\n        numargs: [],\r\n        boolargs: [],\r\n        stack: STACK = [],\r\n        warp: procedure.warp,\r\n      };\r\n      R = {};\r\n      if (C.warp || WARP) {\r\n        WARP++;\r\n        IMMEDIATE = procedure.fn;\r\n      } else {\r\n        if (VISUAL) {\r\n          // Look through the call stack and determine if this procedure has already been called once.\r\n          // If so, we'll delay this thread until the next iteration instead of setting IMMEDIATE\r\n          // See https://scratch.mit.edu/projects/337681947/ for an example\r\n          // 5 is an arbirtary number that works good enough and limits the possible performance impact\r\n          for (var i = CALLS.length, j = 5; i-- && j--;) {\r\n            if (CALLS[i].base === procedure.fn) {\r\n              runtime.queue[THREAD] = new Thread(S, BASE, procedure.fn, CALLS);\r\n              return;\r\n            }\r\n          }\r\n        }\r\n        IMMEDIATE = procedure.fn;\r\n      }\r\n    } else {\r\n      IMMEDIATE = S.fns[id];\r\n    }\r\n  };\r\n\r\n  var endCall = function() {\r\n    if (CALLS.length) {\r\n      if (WARP) WARP--;\r\n      IMMEDIATE = C.fn;\r\n      C = CALLS.pop();\r\n      STACK = C.stack;\r\n      R = STACK.pop();\r\n    }\r\n  };\r\n\r\n  var sceneChange = function() {\r\n    return runtime.trigger('whenSceneStarts', self.getCostumeName());\r\n  };\r\n\r\n  var backdropChange = function() {\r\n    return runtime.trigger('whenBackdropChanges', self.getCostumeName());\r\n  };\r\n\r\n  var broadcast = function(name) {\r\n    return runtime.trigger('whenIReceive', name);\r\n  };\r\n\r\n  var running = function(bases) {\r\n    for (var j = 0; j < runtime.queue.length; j++) {\r\n      if (runtime.queue[j] && bases.indexOf(runtime.queue[j]!.base) !== -1) return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  var queue = function(id) {\r\n    if (WARP) {\r\n      IMMEDIATE = S.fns[id];\r\n    } else {\r\n      forceQueue(id);\r\n    }\r\n  };\r\n\r\n  var forceQueue = function(id) {\r\n    runtime.queue[THREAD] = new Thread(S, BASE, S.fns[id], CALLS);\r\n  };\r\n\r\n  type ThreadResume = any;\r\n\r\n  interface ThreadCall {\r\n    fn?: Fn;\r\n    stack: ThreadResume[];\r\n    [s: string]: any;\r\n  }\r\n\r\n  class Thread {\r\n    constructor(\r\n      public sprite: P.core.Base,\r\n      public base: Fn,\r\n      public fn: Fn,\r\n      public calls: ThreadCall[],\r\n    ) {\r\n\r\n    }\r\n  }\r\n\r\n  export class Runtime {\r\n    public queue: Array<Thread | undefined> = [];\r\n    public isRunning: boolean = false;\r\n    public timerStart: number = 0;\r\n    public baseTime: number = 0;\r\n    public baseNow: number = 0;\r\n    public interval: number;\r\n    public isTurbo: boolean = false;\r\n    public framerate: number = 30;\r\n\r\n    constructor(public stage: P.core.Stage) {\r\n      // Fix scoping\r\n      this.onError = this.onError.bind(this);\r\n      this.step = this.step.bind(this);\r\n    }\r\n\r\n    startThread(sprite: core.Base, base: Fn) {\r\n      const thread = new Thread(sprite, base, base, [{\r\n        args: [],\r\n        stack: [{}],\r\n      }]);\r\n\r\n      // Replace an existing thread instead of adding a new one when possible.\r\n      for (let i = 0; i < this.queue.length; i++) {\r\n        const q = this.queue[i];\r\n        if (q && q.sprite === sprite && q.base === base) {\r\n          this.queue[i] = thread;\r\n          return;\r\n        }\r\n      }\r\n\r\n      this.queue.push(thread);\r\n    }\r\n\r\n    /**\r\n     * Triggers an event for a single sprite.\r\n     */\r\n    triggerFor(sprite: P.core.Base, event: string, arg?: any): Fn[] {\r\n      let threads: Fn[];\r\n      switch (event) {\r\n        case 'whenClicked': threads = sprite.listeners.whenClicked; break;\r\n        case 'whenCloned': threads = sprite.listeners.whenCloned; break;\r\n        case 'whenGreenFlag': threads = sprite.listeners.whenGreenFlag; break;\r\n        case 'whenKeyPressed': threads = sprite.listeners.whenKeyPressed[arg]; break;\r\n        case 'whenSceneStarts': threads = sprite.listeners.whenSceneStarts[('' + arg).toLowerCase()]; break;\r\n        case 'whenBackdropChanges': threads = sprite.listeners.whenBackdropChanges['' + arg]; break;\r\n        case 'whenIReceive':\r\n          arg = '' + arg;\r\n          // TODO: remove toLowerCase() check?\r\n          threads = sprite.listeners.whenIReceive[arg] || sprite.listeners.whenIReceive[arg.toLowerCase()];\r\n          break;\r\n        default: throw new Error('Unknown trigger event: ' + event);\r\n      }\r\n      if (threads) {\r\n        for (let i = 0; i < threads.length; i++) {\r\n          this.startThread(sprite, threads[i]);\r\n        }\r\n      }\r\n      return threads || [];\r\n    }\r\n\r\n    /**\r\n     * Triggers an event on all sprites.\r\n     */\r\n    trigger(event: string, arg?: any) {\r\n      let threads: Fn[] = [];\r\n      for (let i = this.stage.children.length; i--;) {\r\n        threads = threads.concat(this.triggerFor(this.stage.children[i], event, arg));\r\n      }\r\n      return threads.concat(this.triggerFor(this.stage, event, arg));\r\n    }\r\n\r\n    /**\r\n     * Trigger's the project's green flag.\r\n     */\r\n    triggerGreenFlag() {\r\n      this.timerStart = this.now();\r\n      this.trigger('whenGreenFlag');\r\n    }\r\n\r\n    /**\r\n     * Begins the runtime's event loop.\r\n     * Does not start any scripts.\r\n     */\r\n    start() {\r\n      this.isRunning = true;\r\n      if (this.interval) return;\r\n      window.addEventListener('error', this.onError);\r\n      this.baseTime = Date.now();\r\n      this.interval = setInterval(this.step, 1000 / this.framerate);\r\n      if (audioContext) audioContext.resume();\r\n      this.stage.start();\r\n    }\r\n\r\n    /**\r\n     * Pauses the event loop\r\n     */\r\n    pause() {\r\n      if (this.interval) {\r\n        this.baseNow = this.now();\r\n        clearInterval(this.interval);\r\n        this.interval = 0;\r\n        window.removeEventListener('error', this.onError);\r\n        if (audioContext) audioContext.suspend();\r\n        this.stage.pause();\r\n      }\r\n      this.isRunning = false;\r\n    }\r\n\r\n    /**\r\n     * Resets the interval loop without the effects of pausing/starting\r\n     */\r\n    resetInterval() {\r\n      if (!this.isRunning) {\r\n        throw new Error('Cannot restart interval when paused');\r\n      }\r\n      if (this.interval) {\r\n        clearInterval(this.interval);\r\n      }\r\n      this.interval = setInterval(this.step, 1000 / this.framerate);\r\n    }\r\n\r\n    stopAll() {\r\n      this.stage.hidePrompt = false;\r\n      this.stage.prompter.style.display = 'none';\r\n      this.stage.promptId = this.stage.nextPromptId = 0;\r\n      this.queue.length = 0;\r\n      this.stage.resetFilters();\r\n      this.stage.stopSounds();\r\n      for (var i = 0; i < this.stage.children.length; i++) {\r\n        const c = this.stage.children[i];\r\n        if (c.isClone) {\r\n          c.remove();\r\n          this.stage.children.splice(i, 1);\r\n          i -= 1;\r\n        } else {\r\n          c.resetFilters();\r\n          if (c.saying && P.core.isSprite(c)) c.say('');\r\n          c.stopSounds();\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * The current time in the project\r\n     */\r\n    now(): number {\r\n      return this.baseNow + Date.now() - this.baseTime;\r\n    }\r\n\r\n    evaluateExpression(sprite: P.core.Base, fn: () => any) {\r\n      // We will load a few runtime values for this.\r\n      // These are the values that are most commonly used in expressions, in addition the runtime methods.\r\n      self = this.stage;\r\n      runtime = this;\r\n      S = sprite;\r\n      try {\r\n        return fn();\r\n      } catch (e) {\r\n        return undefined;\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Advances one frame into the future.\r\n     */\r\n    step() {\r\n      // Reset runtime variables\r\n      self = this.stage;\r\n      runtime = this;\r\n      VISUAL = false;\r\n\r\n      // TODO: instead of looping through all sprites, maintain a separate list of draggable sprites?\r\n      for (var i = 0; i < this.stage.children.length; i++) {\r\n        const c = this.stage.children[i];\r\n        if (c.isDragging) {\r\n          c.moveTo(c.dragOffsetX + c.stage.mouseX, c.dragOffsetY + c.stage.mouseY);\r\n        }\r\n      }\r\n\r\n      if (audioContext && audioContext.state === 'suspended') {\r\n        audioContext.resume();\r\n      }\r\n\r\n      const start = Date.now();\r\n      const queue = this.queue;\r\n      do {\r\n        for (THREAD = 0; THREAD < queue.length; THREAD++) {\r\n          const thread = queue[THREAD];\r\n          if (thread) {\r\n            // Load thread data\r\n            S = thread.sprite;\r\n            IMMEDIATE = thread.fn;\r\n            BASE = thread.base;\r\n            CALLS = thread.calls;\r\n            C = CALLS.pop();\r\n            STACK = C.stack;\r\n            R = STACK.pop();\r\n            queue[THREAD] = undefined;\r\n            WARP = 0;\r\n\r\n            while (IMMEDIATE) {\r\n              const fn = IMMEDIATE;\r\n              IMMEDIATE = null;\r\n              fn();\r\n            }\r\n\r\n            STACK.push(R);\r\n            CALLS.push(C);\r\n          }\r\n        }\r\n\r\n        // Remove empty elements in the queue list\r\n        for (let i = queue.length; i--;) {\r\n          if (!queue[i]) {\r\n            queue.splice(i, 1);\r\n          }\r\n        }\r\n      } while ((this.isTurbo || !VISUAL) && Date.now() - start < 1000 / this.framerate && queue.length);\r\n\r\n      this.stage.draw();\r\n    }\r\n\r\n    onError(e) {\r\n      clearInterval(this.interval);\r\n      this.handleError(e.error);\r\n    }\r\n\r\n    handleError(e) {\r\n      // Default error handler\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  export function createContinuation(source: string): P.runtime.Fn {\r\n    // TODO: make understandable\r\n    var result = '(function() {\\n';\r\n    var brackets = 0;\r\n    var delBrackets = 0;\r\n    var shouldDelete = false;\r\n    var here = 0;\r\n    var length = source.length;\r\n    while (here < length) {\r\n      var i = source.indexOf('{', here);\r\n      var j = source.indexOf('}', here);\r\n      var k = source.indexOf('return;', here);\r\n      if (k === -1) k = length;\r\n      if (i === -1 && j === -1) {\r\n        if (!shouldDelete) {\r\n          result += source.slice(here, k);\r\n        }\r\n        break;\r\n      }\r\n      if (i === -1) i = length;\r\n      if (j === -1) j = length;\r\n      if (shouldDelete) {\r\n        if (i < j) {\r\n          delBrackets++;\r\n          here = i + 1;\r\n        } else {\r\n          delBrackets--;\r\n          if (!delBrackets) {\r\n            shouldDelete = false;\r\n          }\r\n          here = j + 1;\r\n        }\r\n      } else {\r\n        if (brackets === 0 && k < i && k < j) {\r\n          result += source.slice(here, k);\r\n          break;\r\n        }\r\n        if (i < j) {\r\n          result += source.slice(here, i + 1);\r\n          brackets++;\r\n          here = i + 1;\r\n        } else {\r\n          result += source.slice(here, j);\r\n          here = j + 1;\r\n          if (source.substr(j, 8) === '} else {') {\r\n            if (brackets > 0) {\r\n              result += '} else {';\r\n              here = j + 8;\r\n            } else {\r\n              shouldDelete = true;\r\n              delBrackets = 0;\r\n            }\r\n          } else {\r\n            if (brackets > 0) {\r\n              result += '}';\r\n              brackets--;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    result += '})';\r\n    return scopedEval(result);\r\n  }\r\n\r\n  // Evaluate JavaScript within the scope of the runtime.\r\n  export function scopedEval(source: string): any {\r\n    return eval(source);\r\n  }\r\n}\r\n","/// <reference path=\"phosphorus.ts\" />\r\n\r\nnamespace P.utils {\r\n  import RotationStyle = P.core.RotationStyle;\r\n  /**\r\n   * Parses a Scratch rotation style string to a RotationStyle enum\r\n   */\r\n  export function parseRotationStyle(style: string): RotationStyle {\r\n    switch (style) {\r\n      case 'leftRight':\r\n      case 'left-right':\r\n        return RotationStyle.LeftRight;\r\n      case 'none':\r\n      case 'don\\'t rotate':\r\n        return RotationStyle.None;\r\n      case 'normal':\r\n      case 'all around':\r\n        return RotationStyle.Normal;\r\n    }\r\n    console.warn('unknown rotation style', style);\r\n    return RotationStyle.Normal;\r\n  }\r\n\r\n  /**\r\n   * @param r Red in the range 0-255\r\n   * @param g Green in the range 0-255\r\n   * @param b Blue in the range 0-255\r\n   * @returns HSL, hue in 0-360, saturation and lightness in 0-1\r\n   */\r\n  export function rgbToHSL(r: number, g: number, b: number): [number, number, number] {\r\n    // https://en.wikipedia.org/wiki/HSL_and_HSV\r\n\r\n    r /= 255;\r\n    g /= 255;\r\n    b /= 255;\r\n\r\n    var min = Math.min(r, g, b);\r\n    var max = Math.max(r, g, b);\r\n\r\n    if (min === max) {\r\n      return [0, 0, r];\r\n    }\r\n\r\n    var c = max - min;\r\n    var l = (min + max) / 2;\r\n    var s = c / (1 - Math.abs(2 * l - 1));\r\n\r\n    var h: number;\r\n    switch (max) {\r\n      case r: h = ((g - b) / c + 6) % 6; break;\r\n      case g: h = (b - r) / c + 2; break;\r\n      case b: h = (r - g) / c + 4; break;\r\n    }\r\n    h! *= 60;\r\n\r\n    return [h!, s, l];\r\n  }\r\n\r\n  /**\r\n   * @param r Red in the range 0-255\r\n   * @param g Green in the range 0-255\r\n   * @param b Blue in the range 0-255\r\n   * @returns HSV, hue in 0-360, saturation and value in 0-1\r\n   */\r\n  export function rgbToHSV(r: number, g: number, b: number): [number, number, number] {\r\n    // https://en.wikipedia.org/wiki/HSL_and_HSV\r\n\r\n    r /= 255;\r\n    g /= 255;\r\n    b /= 255;\r\n\r\n    var max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n    var h: number, s: number, v = max;\r\n\r\n    var d = max - min;\r\n    s = max == 0 ? 0 : d / max;\r\n\r\n    if (max == min) {\r\n      h = 0;\r\n    } else {\r\n      switch (max) {\r\n        case r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n        case g: h = (b - r) / d + 2; break;\r\n        case b: h = (r - g) / d + 4; break;\r\n      }\r\n      h! /= 6;\r\n    }\r\n\r\n    return [h! * 360, s, v];\r\n  }\r\n\r\n  /**\r\n   * @param h Hue in the range 0-1 (wrapping)\r\n   * @param s Saturation in the range 0-1\r\n   * @param v Value in the range 0-1\r\n   * @returns RGB, each value in the range 0-255\r\n   */\r\n  export function hsvToRGB(h: number, s: number, v: number): [number, number, number] {\r\n    // https://en.wikipedia.org/wiki/HSL_and_HSV\r\n\r\n    var r: number, g: number, b: number;\r\n  \r\n    var i = Math.floor(h * 6);\r\n    var f = h * 6 - i;\r\n    var p = v * (1 - s);\r\n    var q = v * (1 - f * s);\r\n    var t = v * (1 - (1 - f) * s);\r\n  \r\n    switch (i % 6) {\r\n      case 0: r = v, g = t, b = p; break;\r\n      case 1: r = q, g = v, b = p; break;\r\n      case 2: r = p, g = v, b = t; break;\r\n      case 3: r = p, g = q, b = v; break;\r\n      case 4: r = t, g = p, b = v; break;\r\n      case 5: r = v, g = p, b = q; break;\r\n    }\r\n  \r\n    return [r! * 255, g! * 255, b! * 255];\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param h Hue in the range 0-360\r\n   * @param s Saturation in the range 0-1\r\n   * @param v Lightness in the range 0-1\r\n   * @returns HSV, hue in 0-360, saturation and value in 0-1\r\n   */\r\n  export function hslToHSV(h: number, s: number, l: number): [number, number, number] {\r\n    var v = l + s * Math.min(l, 1 - l);\r\n    var s = v === 0 ? 0 : 2 - 2 * l / v;\r\n    return [h, s, v];\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param h Hue in the range 0-360\r\n   * @param s Saturation in the range 0-1\r\n   * @param v Value in the range 0-1\r\n   * @returns HSL, hue in 0-360, saturation and lightness in 0-1\r\n   */\r\n  export function hsvToHSL(h: number, s: number, v: number): [number, number, number] {\r\n    var l = v - v * s / 2;\r\n    var s = l === 0 ? 0 : (v - l) / Math.min(2 - 2 * l / v);\r\n    return [h, s, l];\r\n  }\r\n\r\n  /**\r\n   * Clamps a number within a range\r\n   * @param number The number\r\n   * @param min Minimum, inclusive\r\n   * @param max Maximum, inclusive\r\n   */\r\n  export function clamp(number: number, min: number, max: number) {\r\n    return Math.min(max, Math.max(min, number));\r\n  }\r\n\r\n  /*\r\n   * Creates a promise that resolves when the original promise resolves or fails.\r\n   */\r\n  export function settled(promise: Promise<any>): Promise<void> {\r\n    return new Promise((resolve, _reject) => {\r\n      promise\r\n        .then(() => resolve())\r\n        .catch(() => resolve());\r\n    });\r\n  }\r\n\r\n  type SlotFn<T> = (t: T) => void;\r\n\r\n  export class Slot<T> {\r\n    private _listeners: SlotFn<T>[] = [];\r\n\r\n    subscribe(fn: SlotFn<T>) {\r\n      this._listeners.push(fn);\r\n    }\r\n\r\n    emit(value: T) {\r\n      for (const listener of this._listeners) {\r\n        listener(value);\r\n      }\r\n    }\r\n  }\r\n}\r\n","/// <reference path=\"phosphorus.ts\" />\r\n/// <reference path=\"utils.ts\" />\r\n/// <reference path=\"core.ts\" />\r\n/// <reference path=\"fonts.ts\" />\r\n/// <reference path=\"config.ts\" />\r\n\r\nnamespace P.sb2 {\r\n  const ASSET_URL = 'https://cdn.assets.scratch.mit.edu/internalapi/asset/';\r\n  let zipArchive: JSZip.Zip;\r\n\r\n  export interface Hooks {\r\n    newTask(): void;\r\n    endTask(): void;\r\n  }\r\n\r\n  export const hooks: Hooks = {\r\n    newTask() {},\r\n    endTask() {},\r\n  };\r\n\r\n  function promiseTask<T>(pr: Promise<T>): Promise<T> {\r\n    hooks.newTask();\r\n    return pr.then((v) => {\r\n      hooks.endTask();\r\n      return v;\r\n    });\r\n  }\r\n\r\n  export class Scratch2VariableWatcher extends P.core.Watcher {\r\n    private cmd: string;\r\n    private type: string;\r\n    private color: string;\r\n    public isDiscrete: boolean;\r\n    private label: string;\r\n    private mode: number;\r\n    public param: string;\r\n    public sliderMax: number;\r\n    public sliderMin: number;\r\n\r\n    private el: HTMLElement;\r\n    private labelEl: HTMLElement;\r\n    private readout: HTMLElement;\r\n    public slider: HTMLElement;\r\n    public button: HTMLElement;\r\n    private buttonWrap: HTMLElement;\r\n\r\n    constructor(stage, targetName, data) {\r\n      super(stage, targetName);\r\n\r\n      this.cmd = data.cmd;\r\n      this.type = data.type || 'var';\r\n      if (data.color) {\r\n        var c = (data.color < 0 ? data.color + 0x1000000 : data.color).toString(16);\r\n        this.color = '#000000'.slice(0, -c.length) + c;\r\n      } else {\r\n        this.color = '#ee7d16';\r\n      }\r\n\r\n      this.isDiscrete = data.isDiscrete == null ? true : data.isDiscrete;\r\n      this.label = data.label || '';\r\n      this.mode = data.mode || 1;\r\n      this.param = data.param;\r\n      this.sliderMax = data.sliderMax == null ? 100 : data.sliderMax;\r\n      this.sliderMin = data.sliderMin || 0;\r\n      this.targetName = data.target;\r\n      this.visible = data.visible == null ? false : data.visible;\r\n      this.x = data.x || 0;\r\n      this.y = data.y || 0;\r\n    }\r\n\r\n    init() {\r\n      super.init();\r\n      if (this.target && this.cmd === 'getVar:') {\r\n        this.target.watchers[this.param] = this;\r\n      }\r\n      if (!this.label) {\r\n        this.label = this.getLabel();\r\n        if (this.target.isSprite) this.label = this.target.name + ': ' + this.label;\r\n      }\r\n      this.layout();\r\n    }\r\n\r\n    getLabel(): string {\r\n      var WATCHER_LABELS = {\r\n        'costumeIndex': 'costume #',\r\n        'xpos': 'x position',\r\n        'ypos': 'y position',\r\n        'heading': 'direction',\r\n        'scale': 'size',\r\n        'backgroundIndex': 'background #',\r\n        'sceneName': 'background name',\r\n        'tempo': 'tempo',\r\n        'volume': 'volume',\r\n        'answer': 'answer',\r\n        'timer': 'timer',\r\n        'soundLevel': 'loudness',\r\n        'isLoud': 'loud?',\r\n        'xScroll': 'x scroll',\r\n        'yScroll': 'y scroll'\r\n      };\r\n      switch (this.cmd) {\r\n        case 'getVar:': return this.param;\r\n        case 'sensor:': return this.param + ' sensor value';\r\n        case 'sensorPressed': return 'sensor ' + this.param + '?';\r\n        case 'timeAndDate': return this.param;\r\n        case 'senseVideoMotion': return 'video ' + this.param;\r\n      }\r\n      return WATCHER_LABELS[this.cmd] || '';\r\n    }\r\n\r\n    setVisible(visible: boolean) {\r\n      super.setVisible(visible);\r\n      this.layout();\r\n    }\r\n\r\n    update() {\r\n      var value: string | number = 0;\r\n      if (!this.target) return;\r\n      switch (this.cmd) {\r\n        case 'answer':\r\n          value = this.stage.answer;\r\n          break;\r\n        case 'backgroundIndex':\r\n          value = this.stage.currentCostumeIndex + 1;\r\n          break;\r\n        case 'costumeIndex':\r\n          value = this.target.currentCostumeIndex + 1;\r\n          break;\r\n        case 'getVar:':\r\n          value = this.target.vars[this.param];\r\n          break;\r\n        case 'heading':\r\n          value = (this.target as P.core.Sprite).direction;\r\n          break;\r\n        case 'scale':\r\n          if (this.target.isSprite) {\r\n            value = (this.target as P.core.Sprite).scale * 100;\r\n          }\r\n          break;\r\n        case 'sceneName':\r\n          value = this.stage.getCostumeName();\r\n          break;\r\n        case 'senseVideoMotion':\r\n          // TODO\r\n          break;\r\n        case 'soundLevel':\r\n          if (this.stage.microphone) {\r\n            value = this.stage.microphone.getLoudness();\r\n          } else {\r\n            value = -1;\r\n          }\r\n          break;\r\n        case 'tempo':\r\n          value = this.stage.tempoBPM;\r\n          break;\r\n        case 'timeAndDate':\r\n          value = this.timeAndDate(this.param);\r\n          break;\r\n        case 'timer':\r\n          value = Math.round((this.stage.runtime.now() - this.stage.runtime.timerStart) / 100) / 10;\r\n          break;\r\n        case 'volume':\r\n          value = this.target.volume * 100;\r\n          break;\r\n        case 'xpos':\r\n          value = this.target.scratchX;\r\n          break;\r\n        case 'ypos':\r\n          value = this.target.scratchY;\r\n          break;\r\n      }\r\n      if (typeof value === 'number' && (value < 0.001 || value > 0.001)) {\r\n        value = Math.round(value * 1000) / 1000;\r\n      }\r\n      this.readout.textContent = '' + value;\r\n      if (this.slider) {\r\n        this.buttonWrap.style.transform = 'translate('+((+value || 0) - this.sliderMin) / (this.sliderMax - this.sliderMin)*100+'%,0)';\r\n      }\r\n    }\r\n\r\n    timeAndDate(format: any): number {\r\n      switch (format) {\r\n        case 'year':\r\n          return new Date().getFullYear();\r\n        case 'month':\r\n          return new Date().getMonth() + 1;\r\n        case 'date':\r\n          return new Date().getDate();\r\n        case 'day of week':\r\n          return new Date().getDay() + 1;\r\n        case 'hour':\r\n          return new Date().getHours();\r\n        case 'minute':\r\n          return new Date().getMinutes();\r\n        case 'second':\r\n          return new Date().getSeconds();\r\n      }\r\n      return 0;\r\n    }\r\n\r\n    layout() {\r\n      if (this.el) {\r\n        this.el.style.display = this.visible ? 'block' : 'none';\r\n        return;\r\n      }\r\n      if (!this.visible) return;\r\n\r\n      this.el = document.createElement('div');\r\n      this.el.dataset.watcher = '' + this.stage.allWatchers.indexOf(this);\r\n      this.el.style.whiteSpace = 'pre';\r\n      this.el.style.position = 'absolute';\r\n      this.el.style.left = this.el.style.top = '0';\r\n      this.el.style.transform = 'translate('+(this.x|0)/10+'em,'+(this.y|0)/10+'em)';\r\n      this.el.style.cursor = 'default';\r\n\r\n      if (this.mode === 2) {\r\n        this.el.appendChild(this.readout = document.createElement('div'));\r\n        this.readout.style.minWidth = (38/15)+'em';\r\n        this.readout.style.font = 'bold 1.5em/'+(19/15)+' sans-serif';\r\n        this.readout.style.height = (19/15)+'em';\r\n        this.readout.style.borderRadius = (4/15)+'em';\r\n        this.readout.style.margin = (3/15)+'em 0 0 0';\r\n        this.readout.style.padding = '0 '+(3/10)+'em';\r\n      } else {\r\n        this.el.appendChild(this.labelEl = document.createElement('div'));\r\n        this.el.appendChild(this.readout = document.createElement('div'));\r\n\r\n        this.el.style.border = '.1em solid rgb(148,145,145)';\r\n        this.el.style.borderRadius = '.4em';\r\n        this.el.style.background = 'rgb(193,196,199)';\r\n        this.el.style.padding = '.2em .6em .3em .5em';\r\n\r\n        this.labelEl.textContent = this.label;\r\n        // this.labelEl.style.marginTop = (1/11)+'em';\r\n        this.labelEl.style.font = 'bold 1.1em/1 sans-serif';\r\n        this.labelEl.style.display = 'inline-block';\r\n\r\n        this.labelEl.style.verticalAlign =\r\n        this.readout.style.verticalAlign = 'middle';\r\n\r\n        this.readout.style.minWidth = (37/10)+'em';\r\n        this.readout.style.padding = '0 '+(1/10)+'em';\r\n        this.readout.style.font = 'bold 1.0em/'+(13/10)+' sans-serif';\r\n        this.readout.style.height = (13/10)+'em';\r\n        this.readout.style.borderRadius = (4/10)+'em';\r\n        this.readout.style.marginLeft = (6/10)+'em';\r\n      }\r\n      this.readout.style.color = '#fff';\r\n      var f = 1 / (this.mode === 2 ? 15 : 10);\r\n      this.readout.style.border = f+'em solid #fff';\r\n      this.readout.style.boxShadow = 'inset '+f+'em '+f+'em '+f+'em rgba(0,0,0,.5), inset -'+f+'em -'+f+'em '+f+'em rgba(255,255,255,.5)';\r\n      this.readout.style.textAlign = 'center';\r\n      this.readout.style.background = this.color;\r\n      this.readout.style.display = 'inline-block';\r\n\r\n      if (this.mode === 3) {\r\n        this.el.appendChild(this.slider = document.createElement('div'));\r\n        this.slider.appendChild(this.buttonWrap = document.createElement('div'));\r\n        this.buttonWrap.appendChild(this.button = document.createElement('div'));\r\n\r\n        this.slider.style.height =\r\n        this.slider.style.borderRadius = '.5em';\r\n        this.slider.style.background = 'rgb(192,192,192)';\r\n        this.slider.style.margin = '.4em 0 .1em';\r\n        this.slider.style.boxShadow = 'inset .125em .125em .125em rgba(0,0,0,.5), inset -.125em -.125em .125em rgba(255,255,255,.5)';\r\n        this.slider.style.position = 'relative';\r\n        this.slider.style.pointerEvents = 'auto';\r\n        this.slider.dataset.slider = '';\r\n\r\n        this.slider.style.paddingRight =\r\n        this.button.style.width =\r\n        this.button.style.height =\r\n        this.button.style.borderRadius = '1.1em';\r\n        this.button.style.position = 'absolute';\r\n        this.button.style.left = '0';\r\n        this.button.style.top = '-.3em';\r\n        this.button.style.background = '#fff';\r\n        this.button.style.boxShadow = 'inset .3em .3em .2em -.2em rgba(255,255,255,.9), inset -.3em -.3em .2em -.2em rgba(0,0,0,.9), inset 0 0 0 .1em #777';\r\n        this.button.dataset.button = '';\r\n      }\r\n\r\n      this.stage.ui.appendChild(this.el);\r\n    }\r\n  }\r\n\r\n  export class Scratch2Stage extends P.core.Stage {\r\n    // Used to tell the compiler what scripts this sprite uses.\r\n    // TODO: should the compiler delete after use?\r\n    public scripts: any;\r\n\r\n    private dragging: any = {};\r\n    private defaultWatcherX = 10;\r\n    private defaultWatcherY = 10;\r\n\r\n    createVariableWatcher(target: P.core.Base, variableName: string) {\r\n      const x = this.defaultWatcherX;\r\n      const y = this.defaultWatcherY;\r\n\r\n      this.defaultWatcherY += 26;\r\n      if (this.defaultWatcherY >= 450) {\r\n        this.defaultWatcherY = 10;\r\n        this.defaultWatcherX += 150;\r\n      }\r\n\r\n      return new P.sb2.Scratch2VariableWatcher(this, target.name, {\r\n        cmd: 'getVar:',\r\n        param: variableName,\r\n        x,\r\n        y,\r\n      });\r\n    }\r\n\r\n    say(text: string, thinking?: boolean) {\r\n      // Stage cannot say things in Scratch 2.\r\n      return ++this.sayId;\r\n    }\r\n\r\n    updateBubble() {\r\n      // Stage cannot say things in Scratch 2.\r\n    }\r\n\r\n    watcherStart(id, t, e) {\r\n      var p = e.target;\r\n      while (p && p.dataset.watcher == null) p = p.parentElement;\r\n      if (!p) return;\r\n      var w = this.allWatchers[p.dataset.watcher] as P.sb2.Scratch2VariableWatcher;\r\n      this.dragging[id] = {\r\n        watcher: w,\r\n        offset: (e.target.dataset.button == null ? -w.button.offsetWidth / 2 | 0 : w.button.getBoundingClientRect().left - t.clientX) - w.slider.getBoundingClientRect().left\r\n      };\r\n    }\r\n    watcherMove(id, t, e) {\r\n      var d = this.dragging[id];\r\n      if (!d) return;\r\n      var w = d.watcher as P.sb2.Scratch2VariableWatcher;\r\n      var sw = w.slider.offsetWidth;\r\n      var bw = w.button.offsetWidth;\r\n      var value = w.sliderMin + Math.max(0, Math.min(1, (t.clientX + d.offset) / (sw - bw))) * (w.sliderMax - w.sliderMin);\r\n      w.target.vars[w.param] = w.isDiscrete ? Math.round(value) : Math.round(value * 100) / 100;\r\n      w.update();\r\n      e.preventDefault();\r\n    }\r\n    watcherEnd(id, t, e) {\r\n      this.watcherMove(id, t, e);\r\n      delete this.dragging[id];\r\n    }\r\n\r\n    ontouch(event: TouchEvent, touch: Touch) {\r\n      const target = event.target as HTMLElement;\r\n      if (target.dataset.button != null || target.dataset.slider != null) {\r\n        this.watcherStart(touch.identifier, touch, event);\r\n      }\r\n    }\r\n    onmousedown(e: MouseEvent) {\r\n      const target = e.target as HTMLElement;\r\n      if (target.dataset.button != null || target.dataset.slider != null) {\r\n        this.watcherStart('mouse', e, e);\r\n      }\r\n    }\r\n    onmousemove(e: MouseEvent) {\r\n      this.watcherMove('mouse', e, e);\r\n    }\r\n    onmouseup(e: MouseEvent) {\r\n      this.watcherEnd('mouse', e, e);\r\n    }\r\n  }\r\n\r\n  export class Scratch2Sprite extends P.core.Sprite {\r\n    public scripts: any;\r\n\r\n    _clone() {\r\n      return new Scratch2Sprite(this.stage);\r\n    }\r\n  }\r\n\r\n  // loads an image from a URL\r\n  export function loadImage(url): Promise<HTMLImageElement> {\r\n    hooks.newTask();\r\n\r\n    var image = new Image();\r\n    image.crossOrigin = 'anonymous';\r\n\r\n    return new Promise((resolve, reject) => {\r\n      image.onload = function() {\r\n        hooks.endTask();\r\n        resolve(image);\r\n      };\r\n      image.onerror = function(err) {\r\n        reject('Failed to load image: ' + image.src);\r\n      };\r\n      image.src = url;\r\n    });\r\n  }\r\n\r\n  // Loads a .sb2 file from an ArrayBuffer containing the .sb2 file\r\n  export function loadSB2Project(arrayBuffer) {\r\n    return JSZip.loadAsync(arrayBuffer)\r\n      .then((zip) => {\r\n        zipArchive = zip;\r\n        return zip.file('project.json').async('text');\r\n      })\r\n      .then((text: string) => {\r\n        const project = JSON.parse(text);\r\n        return loadProject(project);\r\n      });\r\n  }\r\n\r\n  // Loads a project on the scratch.mit.edu website from its project.json\r\n  export function loadProject(data) {\r\n    var children;\r\n    var stage;\r\n\r\n    return loadFonts()\r\n      .then(() => Promise.all<any>([\r\n        P.audio.loadSB2Soundbank(hooks),\r\n        loadArray(data.children, loadObject).then((c) => children = c),\r\n        loadBase(data, true).then((s) => stage = s),\r\n      ]))\r\n      .then(() => {\r\n        children = children.filter((i) => i);\r\n        children.forEach((c) => c.stage = stage);\r\n        var sprites = children.filter((i) => i instanceof Scratch2Sprite);\r\n        var watchers = children.filter((i) => i instanceof Scratch2VariableWatcher);\r\n\r\n        stage.children = sprites;\r\n        stage.allWatchers = watchers;\r\n        stage.allWatchers.forEach((w) => w.init());\r\n\r\n        P.sb2.compiler.compile(stage);\r\n        return stage;\r\n      });\r\n  }\r\n\r\n  export function loadBase(data, isStage = false) {\r\n    var costumes;\r\n    var sounds;\r\n\r\n    return Promise.all([\r\n      loadArray(data.costumes, loadCostume).then((c) => costumes = c),\r\n      loadArray(data.sounds, loadSound).then((s) => sounds = s),\r\n    ]).then(() => {\r\n      const variables = {};\r\n      if (data.variables) {\r\n        for (const variable of data.variables) {\r\n          if (variable.isPeristent) {\r\n            throw new Error('Cloud variables are not supported');\r\n          }\r\n          variables[variable.name] = variable.value;\r\n        }\r\n      }\r\n\r\n      const lists = {};\r\n      if (data.lists) {\r\n        for (const list of data.lists) {\r\n          if (list.isPeristent) {\r\n            throw new Error('Cloud lists are not supported');\r\n          }\r\n          lists[list.listName] = list.contents;\r\n        }\r\n      }\r\n\r\n      // Dirty hack to construct a target with a null stage\r\n      const object = new (isStage ? Scratch2Stage : Scratch2Sprite)(null!);\r\n\r\n      object.name = data.objName;\r\n      object.vars = variables;\r\n      object.lists = lists;\r\n      object.costumes = costumes;\r\n      object.currentCostumeIndex = data.currentCostumeIndex;\r\n      sounds.forEach((sound) => sound && object.addSound(sound));\r\n\r\n      if (isStage) {\r\n\r\n      } else {\r\n        const sprite = object as Scratch2Sprite;\r\n        sprite.scratchX = data.scratchX;\r\n        sprite.scratchY = data.scratchY;\r\n        sprite.direction = data.direction;\r\n        sprite.isDraggable = data.isDraggable;\r\n        sprite.rotationStyle = P.utils.parseRotationStyle(data.rotationStyle);\r\n        sprite.scale = data.scale;\r\n        sprite.visible = data.visible;\r\n      }\r\n\r\n      // We store the scripts on the Sprite so the compiler can find them easier\r\n      // TODO: to something different?\r\n      object.scripts = data.scripts || [];\r\n\r\n      return object;\r\n    });\r\n  }\r\n\r\n  // A weird mix of Array.map and Promise.all\r\n  export function loadArray(data, process) {\r\n    return Promise.all((data || []).map((i, ind) => process(i, ind)));\r\n  }\r\n\r\n  export function loadFonts(): Promise<void> {\r\n    return Promise.all([\r\n      promiseTask(P.utils.settled(P.fonts.loadWebFont('Donegal One'))),\r\n      promiseTask(P.utils.settled(P.fonts.loadWebFont('Gloria Hallelujah'))),\r\n      promiseTask(P.utils.settled(P.fonts.loadWebFont('Mystery Quest'))),\r\n      promiseTask(P.utils.settled(P.fonts.loadWebFont('Permanent Marker'))),\r\n      promiseTask(P.utils.settled(P.fonts.loadWebFont('Scratch'))),\r\n    ]).then(() => undefined);\r\n  }\r\n\r\n  export function loadObject(data) {\r\n    if (data.cmd) {\r\n      return loadVariableWatcher(data);\r\n    } else if (data.listName) {\r\n      // TODO: list watcher\r\n    } else {\r\n      return loadBase(data);\r\n    }\r\n  }\r\n\r\n  export function loadVariableWatcher(data) {\r\n    const targetName = data.target;\r\n    const watcher = new Scratch2VariableWatcher(null, targetName, data);\r\n    return watcher;\r\n  }\r\n\r\n  export function loadCostume(data, index) {\r\n    const promises = [\r\n      loadMD5(data.baseLayerMD5, data.baseLayerID)\r\n        .then((asset) => data.$image = asset)\r\n    ];\r\n    if (data.textLayerMD5) {\r\n      promises.push(loadMD5(data.textLayerMD5, data.textLayerID)\r\n        .then((asset) => data.$text = asset));\r\n    }\r\n    return Promise.all(promises)\r\n      .then((layers: any[]) => {\r\n        var image;\r\n        if (layers.length > 1) {\r\n          image = document.createElement('canvas');\r\n          const ctx = image.getContext('2d');\r\n          if (!ctx) {\r\n            throw new Error('Cannot get 2d rendering context loading costume ' + data.costumeName);\r\n          }\r\n          image.width = Math.max(layers[0].width, 1);\r\n          image.height = Math.max(layers[0].height, 1);\r\n          for (const layer of layers) {\r\n            ctx.drawImage(layer, 0, 0);\r\n          }\r\n        } else {\r\n          image = layers[0];\r\n        }\r\n\r\n        return new P.core.BitmapCostume(image, {\r\n          name: data.costumeName,\r\n          bitmapResolution: data.bitmapResolution,\r\n          rotationCenterX: data.rotationCenterX,\r\n          rotationCenterY: data.rotationCenterY,\r\n        });\r\n      });\r\n  }\r\n\r\n  export function loadSound(data): Promise<P.core.Sound | null> {\r\n    return new Promise((resolve, reject) => {\r\n      loadMD5(data.md5, data.soundID, true)\r\n        .then((buffer) => {\r\n          resolve(new P.core.Sound({\r\n            name: data.soundName,\r\n            buffer,\r\n          }));\r\n        })\r\n        .catch((err) => {\r\n          resolve(null);\r\n          console.warn('Could not load sound: ' + err);\r\n        });\r\n    });\r\n  }\r\n\r\n  export function patchSVG(svg, element) {\r\n    const FONTS: ObjectMap<string> = {\r\n      '': 'Helvetica',\r\n      Donegal: 'Donegal One',\r\n      Gloria: 'Gloria Hallelujah',\r\n      Marker: 'Permanent Marker',\r\n      Mystery: 'Mystery Quest'\r\n    };\r\n\r\n    const LINE_HEIGHTS: ObjectMap<number> = {\r\n      Helvetica: 1.13,\r\n      'Donegal One': 1.25,\r\n      'Gloria Hallelujah': 1.97,\r\n      'Permanent Marker': 1.43,\r\n      'Mystery Quest': 1.37\r\n    };\r\n\r\n    if (element.nodeType !== 1) return;\r\n    if (element.nodeName === 'text') {\r\n      // Correct fonts\r\n      var font = element.getAttribute('font-family') || '';\r\n      font = FONTS[font] || font;\r\n      if (font) {\r\n        element.setAttribute('font-family', font);\r\n        if (font === 'Helvetica') element.style.fontWeight = 'bold';\r\n      }\r\n      var size = +element.getAttribute('font-size');\r\n      if (!size) {\r\n        element.setAttribute('font-size', size = 18);\r\n      }\r\n      var bb = element.getBBox();\r\n      var x = 4 - .6 * element.transform.baseVal.consolidate().matrix.a;\r\n      var y = (element.getAttribute('y') - bb.y) * 1.1;\r\n      element.setAttribute('x', x);\r\n      element.setAttribute('y', y);\r\n      var lines = element.textContent.split('\\n');\r\n      if (lines.length > 1) {\r\n        element.textContent = lines[0];\r\n        var lineHeight = LINE_HEIGHTS[font] || 1;\r\n        for (var i = 1, l = lines.length; i < l; i++) {\r\n          var tspan = document.createElementNS(null, 'tspan');\r\n          tspan.textContent = lines[i];\r\n          tspan.setAttribute('x', '' + x);\r\n          tspan.setAttribute('y', '' + (y + size * i * lineHeight));\r\n          element.appendChild(tspan);\r\n        }\r\n      }\r\n    } else if ((element.hasAttribute('x') || element.hasAttribute('y')) && element.hasAttribute('transform')) {\r\n      element.setAttribute('x', 0);\r\n      element.setAttribute('y', 0);\r\n    }\r\n    [].forEach.call(element.childNodes, patchSVG.bind(null, svg));\r\n  }\r\n\r\n  export function loadSVG(source): Promise<HTMLCanvasElement | HTMLImageElement> {\r\n    // canvg needs and actual SVG element, not the source.\r\n    const parser = new DOMParser();\r\n    var doc = parser.parseFromString(source, 'image/svg+xml');\r\n    var svg = doc.documentElement as any;\r\n    if (!svg.style) {\r\n      doc = parser.parseFromString('<body>' + source, 'text/html');\r\n      svg = doc.querySelector('svg');\r\n    }\r\n    svg.style.visibility = 'hidden';\r\n    svg.style.position = 'absolute';\r\n    svg.style.left = '-10000px';\r\n    svg.style.top = '-10000px';\r\n    document.body.appendChild(svg);\r\n    const viewBox = svg.viewBox.baseVal;\r\n    if (viewBox && (viewBox.x || viewBox.y)) {\r\n      svg.width.baseVal.value = viewBox.width - viewBox.x;\r\n      svg.height.baseVal.value = viewBox.height - viewBox.y;\r\n      viewBox.x = 0;\r\n      viewBox.y = 0;\r\n      viewBox.width = 0;\r\n      viewBox.height = 0;\r\n    }\r\n    patchSVG(svg, svg);\r\n    document.body.removeChild(svg);\r\n    svg.style.visibility = svg.style.position = svg.style.left = svg.style.top = '';\r\n\r\n    // TODO: use native renderer\r\n    return new Promise<HTMLCanvasElement | HTMLImageElement>((resolve, reject) => {\r\n      const canvas = document.createElement('canvas');\r\n      canvg(canvas, new XMLSerializer().serializeToString(svg), {\r\n        ignoreMouse: true,\r\n        ignoreAnimation: true,\r\n        ignoreClear: true,\r\n        renderCallback: function() {\r\n          if (canvas.width === 0 || canvas.height === 0) {\r\n            resolve(new Image());\r\n            return;\r\n          }\r\n          resolve(canvas);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  export function loadMD5(hash: string, id: string, isAudio?: true): Promise<AudioBuffer>;\r\n  export function loadMD5(hash: string, id: string, isAudio?: false): Promise<HTMLImageElement | HTMLCanvasElement | null>;\r\n  export function loadMD5(hash: string, id: string, isAudio: boolean = false): Promise<HTMLImageElement | HTMLCanvasElement | AudioBuffer | null> {\r\n    if (zipArchive) {\r\n      var f = isAudio ? zipArchive.file(id + '.wav') : zipArchive.file(id + '.gif') || zipArchive.file(id + '.png') || zipArchive.file(id + '.jpg') || zipArchive.file(id + '.svg');\r\n      hash = f.name;\r\n    }\r\n\r\n    const ext = hash.split('.').pop();\r\n\r\n    if (ext === 'svg') {\r\n      if (zipArchive) {\r\n        return f!.async('text')\r\n          .then((text) => loadSVG(text));\r\n      } else {\r\n        return promiseTask(new P.IO.TextRequest(ASSET_URL + hash + '/get/').load())\r\n          .then((text) => loadSVG(text));\r\n      }\r\n    } else if (ext === 'wav') {\r\n      if (zipArchive) {\r\n        return f!.async('arrayBuffer')\r\n          .then((buffer) => P.audio.decodeAudio(buffer));\r\n      } else {\r\n        return promiseTask(new P.IO.ArrayBufferRequest(ASSET_URL + hash + '/get/').load())\r\n          .then((buffer) => P.audio.decodeAudio(buffer));\r\n      }\r\n    } else {\r\n      if (zipArchive) {\r\n        return new Promise((resolve, reject) => {\r\n          var image = new Image();\r\n          image.onload = function() {\r\n            resolve(image);\r\n          };\r\n          f.async('binarystring')\r\n            .then((data: string) => {\r\n              image.src = 'data:image/' + (ext === 'jpg' ? 'jpeg' : ext) + ';base64,' + btoa(data);\r\n            });\r\n        });\r\n      } else {\r\n        return loadImage(ASSET_URL + hash + '/get/');\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// Compiler for .sb2 projects\r\nnamespace P.sb2.compiler {\r\n  var LOG_PRIMITIVES;\r\n\r\n  // Implements a Scratch 2 procedure.\r\n  // Scratch 2 argument references just go by index, so its very simple.\r\n  export class Scratch2Procedure extends P.core.Procedure {\r\n    call(inputs) {\r\n      return inputs;\r\n    }\r\n  }\r\n\r\n  var EVENT_SELECTORS = [\r\n    'procDef',\r\n    'whenClicked',\r\n    'whenCloned',\r\n    'whenGreenFlag',\r\n    'whenIReceive',\r\n    'whenKeyPressed',\r\n    'whenSceneStarts',\r\n    'whenSensorGreaterThan' // TODO\r\n  ];\r\n\r\n  var compileScripts = function(object) {\r\n    for (var i = 0; i < object.scripts.length; i++) {\r\n      compileListener(object, object.scripts[i][2]);\r\n    }\r\n  };\r\n\r\n  var warnings;\r\n  var warn = function(message) {\r\n    warnings[message] = (warnings[message] || 0) + 1;\r\n  };\r\n\r\n  export var compileListener = function(object, script) {\r\n    if (!script[0] || EVENT_SELECTORS.indexOf(script[0][0]) === -1) return;\r\n\r\n    var nextLabel = function() {\r\n      return object.fns.length + fns.length;\r\n    };\r\n\r\n    var label = function() {\r\n      var id = nextLabel();\r\n      fns.push(source.length);\r\n      visual = 0;\r\n      return id;\r\n    };\r\n\r\n    var delay = function() {\r\n      source += 'return;\\n';\r\n      label();\r\n    };\r\n\r\n    var queue = function(id) {\r\n      source += 'queue(' + id + ');\\n';\r\n      source += 'return;\\n';\r\n    };\r\n\r\n    var forceQueue = function(id) {\r\n      source += 'forceQueue(' + id + ');\\n';\r\n      source += 'return;\\n';\r\n    };\r\n\r\n    var seq = function(script) {\r\n      if (!script) return;\r\n      for (var i = 0; i < script.length; i++) {\r\n        compile(script[i]);\r\n      }\r\n    };\r\n\r\n    var varRef = function(name) {\r\n      if (typeof name !== 'string') {\r\n        return 'getVars(' + val(name) + ')[' + val(name) + ']';\r\n      }\r\n      var o = object.stage.vars[name] !== undefined ? 'self' : 'S';\r\n      return o + '.vars[' + val(name) + ']';\r\n    };\r\n\r\n    var listRef = function(name) {\r\n      if (typeof name !== 'string') {\r\n        return 'getLists(' + val(name) + ')[' + val(name) + ']';\r\n      }\r\n      var o = object.stage.lists[name] !== undefined ? 'self' : 'S';\r\n      if (o === 'S' && !object.lists[name]) {\r\n        object.lists[name] = [];\r\n      }\r\n      return o + '.lists[' + val(name) + ']';\r\n    };\r\n\r\n    var param = function(name, usenum, usebool) {\r\n      if (typeof name !== 'string') {\r\n        throw new Error('Dynamic parameters are not supported');\r\n      }\r\n\r\n      if (!inputs) return '0';\r\n\r\n      var i = inputs.indexOf(name);\r\n      if (i === -1) {\r\n        return '0';\r\n      }\r\n\r\n      var t = types[i];\r\n      var kind =\r\n        t === '%n' || t === '%d' || t === '%c' ? 'num' :\r\n        t === '%b' ? 'bool' : '';\r\n\r\n      if (kind === 'num' && usenum) {\r\n        used[i] = true;\r\n        return 'C.numargs[' + i + ']';\r\n      }\r\n      if (kind === 'bool' && usebool) {\r\n        used[i] = true;\r\n        return 'C.boolargs[' + i + ']';\r\n      }\r\n\r\n      var v = 'C.args[' + i + ']';\r\n      if (usenum) return '(+' + v + ' || 0)';\r\n      if (usebool) return 'bool(' + v + ')';\r\n      return v;\r\n    };\r\n\r\n    var val2 = function(e) {\r\n      var v;\r\n      if (e[0] === 'costumeName') {\r\n\r\n        return 'S.getCostumeName()';\r\n\r\n      } else if (e[0] === 'sceneName') {\r\n\r\n        return 'self.getCostumeName()';\r\n\r\n      } else if (e[0] === 'readVariable') {\r\n\r\n        return varRef(e[1]);\r\n\r\n      } else if (e[0] === 'contentsOfList:') {\r\n\r\n        return 'contentsOfList(' + listRef(e[1]) + ')';\r\n\r\n      } else if (e[0] === 'getLine:ofList:') {\r\n\r\n        return 'getLineOfList(' + listRef(e[2]) + ', ' + val(e[1]) + ')';\r\n\r\n      } else if (e[0] === 'concatenate:with:') {\r\n\r\n        return '(\"\" + ' + val(e[1]) + ' + ' + val(e[2]) + ')';\r\n\r\n      } else if (e[0] === 'letter:of:') {\r\n\r\n        return '((\"\" + ' + val(e[2]) + ')[(' + num(e[1]) + ' | 0) - 1] || \"\")';\r\n\r\n      } else if (e[0] === 'answer') { /* Sensing */\r\n\r\n        return 'self.answer';\r\n\r\n      } else if (e[0] === 'getAttribute:of:') {\r\n\r\n        return 'attribute(' + val(e[1]) + ', ' + val(e[2]) + ')';\r\n\r\n      } else if (e[0] === 'getUserId') {\r\n\r\n        return '0';\r\n\r\n      } else if (e[0] === 'getUserName') {\r\n\r\n        return 'self.username';\r\n\r\n      } else {\r\n\r\n        warn('Undefined val: ' + e[0]);\r\n\r\n      }\r\n    };\r\n\r\n    var val = function(e, usenum?, usebool?) {\r\n      var v;\r\n\r\n      if (typeof e === 'number' || typeof e === 'boolean' || e === null) {\r\n\r\n        return '' + e;\r\n\r\n      } else if (typeof e === 'string') {\r\n\r\n        return '\"' + e\r\n          .replace(/\\\\/g, '\\\\\\\\')\r\n          .replace(/\\n/g, '\\\\n')\r\n          .replace(/\\r/g, '\\\\r')\r\n          .replace(/\"/g, '\\\\\"')\r\n          .replace(/\\{/g, '\\\\x7b')\r\n          .replace(/\\}/g, '\\\\x7d') + '\"';\r\n\r\n      } else if (e[0] === 'getParam') {\r\n\r\n        return param(e[1], usenum, usebool);\r\n\r\n      } else if ((v = numval(e)) != null || (v = boolval(e)) != null) {\r\n\r\n        return v;\r\n\r\n      } else {\r\n\r\n        v = val2(e);\r\n        if (usenum) return '(+' + v + ' || 0)';\r\n        if (usebool) return 'bool(' + v + ')';\r\n        return v;\r\n\r\n      }\r\n    };\r\n\r\n    var numval = function(e) {\r\n\r\n      if (e[0] === 'xpos') { /* Motion */\r\n\r\n        return 'S.scratchX';\r\n\r\n      } else if (e[0] === 'ypos') {\r\n\r\n        return 'S.scratchY';\r\n\r\n      } else if (e[0] === 'heading') {\r\n\r\n        return 'S.direction';\r\n\r\n      } else if (e[0] === 'costumeIndex') { /* Looks */\r\n\r\n        return '(S.currentCostumeIndex + 1)';\r\n\r\n      } else if (e[0] === 'backgroundIndex') {\r\n\r\n        return '(self.currentCostumeIndex + 1)';\r\n\r\n      } else if (e[0] === 'scale') {\r\n\r\n        return '(S.scale * 100)';\r\n\r\n      } else if (e[0] === 'volume') { /* Sound */\r\n\r\n        return '(S.volume * 100)';\r\n\r\n      } else if (e[0] === 'tempo') {\r\n\r\n        return 'self.tempoBPM';\r\n\r\n      } else if (e[0] === 'lineCountOfList:') { /* Data */\r\n\r\n        return listRef(e[1]) + '.length';\r\n\r\n      } else if (e[0] === '+') { /* Operators */\r\n\r\n        return '(' + num(e[1]) + ' + ' + num(e[2]) + ' || 0)';\r\n\r\n      } else if (e[0] === '-') {\r\n\r\n        return '(' + num(e[1]) + ' - ' + num(e[2]) + ' || 0)';\r\n\r\n      } else if (e[0] === '*') {\r\n\r\n        return '(' + num(e[1]) + ' * ' + num(e[2]) + ' || 0)';\r\n\r\n      } else if (e[0] === '/') {\r\n\r\n        return '(' + num(e[1]) + ' / ' + num(e[2]) + ' || 0)';\r\n\r\n      } else if (e[0] === 'randomFrom:to:') {\r\n\r\n        return 'random(' + num(e[1]) + ', ' + num(e[2]) + ')';\r\n\r\n      } else if (e[0] === 'abs') {\r\n\r\n        return 'Math.abs(' + num(e[1]) + ')';\r\n\r\n      } else if (e[0] === 'sqrt') {\r\n\r\n        return 'Math.sqrt(' + num(e[1]) + ')';\r\n\r\n      } else if (e[0] === 'stringLength:') {\r\n\r\n        return '(\"\" + ' + val(e[1]) + ').length';\r\n\r\n      } else if (e[0] === '%' || e[0] === '\\\\\\\\') {\r\n\r\n        return 'mod(' + num(e[1]) + ', ' + num(e[2]) + ')';\r\n\r\n      } else if (e[0] === 'rounded') {\r\n\r\n        return 'Math.round(' + num(e[1]) + ')';\r\n\r\n      } else if (e[0] === 'computeFunction:of:') {\r\n\r\n        if (typeof e[1] !== 'object') {\r\n          switch ('' + e[1]) {\r\n            case 'abs':\r\n              return 'Math.abs(' + num(e[2]) + ')';\r\n            case 'floor':\r\n              return 'Math.floor(' + num(e[2]) + ')';\r\n            case 'sqrt':\r\n              return 'Math.sqrt(' + num(e[2]) + ')';\r\n            case 'ceiling':\r\n              return 'Math.ceil(' + num(e[2]) + ')';\r\n            case 'cos':\r\n              return 'Math.cos(' + num(e[2]) + ' * Math.PI / 180)';\r\n            case 'sin':\r\n              return 'Math.sin(' + num(e[2]) + ' * Math.PI / 180)';\r\n            case 'tan':\r\n              return 'Math.tan(' + num(e[2]) + ' * Math.PI / 180)';\r\n            case 'asin':\r\n              return '(Math.asin(' + num(e[2]) + ') * 180 / Math.PI)';\r\n            case 'acos':\r\n              return '(Math.acos(' + num(e[2]) + ') * 180 / Math.PI)';\r\n            case 'atan':\r\n              return '(Math.atan(' + num(e[2]) + ') * 180 / Math.PI)';\r\n            case 'ln':\r\n              return 'Math.log(' + num(e[2]) + ')';\r\n            case 'log':\r\n              return '(Math.log(' + num(e[2]) + ') / Math.LN10)';\r\n            case 'e ^':\r\n              return 'Math.exp(' + num(e[2]) + ')';\r\n            case '10 ^':\r\n              return 'Math.exp(' + num(e[2]) + ' * Math.LN10)';\r\n          }\r\n          return '0';\r\n        }\r\n        return 'mathFunc(' + val(e[1]) + ', ' + num(e[2]) + ')';\r\n\r\n      } else if (e[0] === 'mouseX') { /* Sensing */\r\n\r\n        return 'self.mouseX';\r\n\r\n      } else if (e[0] === 'mouseY') {\r\n\r\n        return 'self.mouseY';\r\n\r\n      } else if (e[0] === 'timer') {\r\n\r\n        return '((runtime.now() - runtime.timerStart) / 1000)';\r\n\r\n      } else if (e[0] === 'distanceTo:') {\r\n\r\n        return 'S.distanceTo(' + val(e[1]) + ')';\r\n\r\n      } else if (e[0] === 'soundLevel') {\r\n\r\n        return 'self.microphone.getLoudness()';\r\n\r\n      } else if (e[0] === 'timestamp') {\r\n\r\n        return '((Date.now() - epoch) / 86400000)';\r\n\r\n      } else if (e[0] === 'timeAndDate') {\r\n\r\n        return 'timeAndDate(' + val(e[1]) + ')';\r\n\r\n      // } else if (e[0] === 'sensor:') {\r\n\r\n      }\r\n    };\r\n\r\n    var DIGIT = /\\d/;\r\n    var boolval = function(e) {\r\n\r\n      if (e[0] === 'list:contains:') { /* Data */\r\n\r\n        return 'listContains(' + listRef(e[1]) + ', ' + val(e[2]) + ')';\r\n\r\n      } else if (e[0] === '<' || e[0] === '>') { /* Operators */\r\n\r\n        var less: boolean;\r\n        let x;\r\n        let y;\r\n\r\n        if (typeof e[1] === 'string' && DIGIT.test(e[1]) || typeof e[1] === 'number') {\r\n          less = e[0] === '<';\r\n          x = e[1];\r\n          y = e[2];\r\n        } else if (typeof e[2] === 'string' && DIGIT.test(e[2]) || typeof e[2] === 'number') {\r\n          less = e[0] === '>';\r\n          x = e[2];\r\n          y = e[1];\r\n        }\r\n        var nx = +x;\r\n        if (x == null || nx !== nx) {\r\n          return '(compare(' + val(e[1]) + ', ' + val(e[2]) + ') === ' + (e[0] === '<' ? -1 : 1) + ')';\r\n        }\r\n        return (less! ? 'numLess' : 'numGreater') + '(' + nx + ', ' + val(y) + ')';\r\n\r\n      } else if (e[0] === '=') {\r\n\r\n        let x;\r\n        let y;\r\n        if (typeof e[1] === 'string' && DIGIT.test(e[1]) || typeof e[1] === 'number') {\r\n          x = e[1];\r\n          y = e[2];\r\n        } else if (typeof e[2] === 'string' && DIGIT.test(e[2]) || typeof e[2] === 'number') {\r\n          x = e[2];\r\n          y = e[1];\r\n        }\r\n        var nx = +x;\r\n        if (x == null || nx !== nx) {\r\n          return '(equal(' + val(e[1]) + ', ' + val(e[2]) + '))';\r\n        }\r\n        return '(numEqual(' + nx + ', ' + val(y) + '))';\r\n\r\n      } else if (e[0] === '&') {\r\n\r\n        return '(' + bool(e[1]) + ' && ' + bool(e[2]) + ')';\r\n\r\n      } else if (e[0] === '|') {\r\n\r\n        return '(' + bool(e[1]) + ' || ' + bool(e[2]) + ')';\r\n\r\n      } else if (e[0] === 'not') {\r\n\r\n        return '!' + bool(e[1]) + '';\r\n\r\n      } else if (e[0] === 'mousePressed') { /* Sensing */\r\n\r\n        return 'self.mousePressed';\r\n\r\n      } else if (e[0] === 'touching:') {\r\n\r\n        return 'S.touching(' + val(e[1]) + ')';\r\n\r\n      } else if (e[0] === 'touchingColor:') {\r\n\r\n        return 'S.touchingColor(' + val(e[1]) + ')';\r\n\r\n      } else if (e[0] === 'color:sees:') {\r\n\r\n        return 'S.colorTouchingColor(' + val(e[1]) + ', ' + val(e[2]) + ')';\r\n\r\n      } else if (e[0] === 'keyPressed:') {\r\n\r\n        var v = typeof e[1] === 'object' ?\r\n          'getKeyCode(' + val(e[1]) + ')' : val(P.runtime.getKeyCode(e[1]));\r\n        return '!!self.keys[' + v + ']';\r\n\r\n      // } else if (e[0] === 'isLoud') {\r\n\r\n      // } else if (e[0] === 'sensorPressed:') {\r\n\r\n      }\r\n    };\r\n\r\n    var bool = function(e) {\r\n      if (typeof e === 'boolean') {\r\n        return e;\r\n      }\r\n      if (typeof e === 'number' || typeof e === 'string') {\r\n        return +e !== 0 && e !== '' && e !== 'false';\r\n      }\r\n      var v = boolval(e);\r\n      return v != null ? v : val(e, false, true);\r\n    };\r\n\r\n    var num = function(e) {\r\n      if (typeof e === 'number') {\r\n        return e || 0;\r\n      }\r\n      if (typeof e === 'boolean' || typeof e === 'string') {\r\n        return +e || 0;\r\n      }\r\n      var v = numval(e);\r\n      return v != null ? v : val(e, true);\r\n    };\r\n\r\n    var beatHead = function(dur) {\r\n      source += 'save();\\n';\r\n      source += 'R.start = runtime.now();\\n';\r\n      source += 'R.duration = ' + num(dur) + ' * 60 / self.tempoBPM;\\n';\r\n      source += 'var first = true;\\n';\r\n    };\r\n\r\n    var beatTail = function() {\r\n      var id = label();\r\n      source += 'if (!R.sound) R.sound = { stopped: false };';\r\n      source += 'S.activeSounds.add(R.sound);\\n'\r\n      source += 'if ((runtime.now() - R.start < R.duration * 1000 || first) && !R.sound.stopped) {\\n';\r\n      source += '  var first;\\n';\r\n      forceQueue(id);\r\n      source += '}\\n';\r\n      source += 'S.activeSounds.delete(R.sound);';\r\n      source += 'restore();\\n';\r\n    };\r\n\r\n    var wait = function(dur) {\r\n      source += 'save();\\n';\r\n      source += 'R.start = runtime.now();\\n';\r\n      source += 'R.duration = ' + dur + ';\\n';\r\n      source += 'var first = true;\\n';\r\n\r\n      var id = label();\r\n      source += 'if (runtime.now() - R.start < R.duration * 1000 || first) {\\n';\r\n      source += '  var first;\\n';\r\n      forceQueue(id);\r\n      source += '}\\n';\r\n\r\n      source += 'restore();\\n';\r\n    };\r\n\r\n    var toHSLA = 'S.penColor.toHSLA();\\n';\r\n    toHSLA += 'S.penColor.a = 1;\\n';\r\n\r\n    var visual = 0;\r\n    var compile = function(block) {\r\n      if (LOG_PRIMITIVES) {\r\n        source += 'console.log(' + val(block[0]) + ');\\n';\r\n      }\r\n\r\n      if (['turnRight:', 'turnLeft:', 'heading:', 'pointTowards:', 'setRotationStyle', 'lookLike:', 'nextCostume', 'say:duration:elapsed:from:', 'say:', 'think:duration:elapsed:from:', 'think:', 'changeGraphicEffect:by:', 'setGraphicEffect:to:', 'filterReset', 'changeSizeBy:', 'setSizeTo:', 'comeToFront', 'goBackByLayers:'].indexOf(block[0]) !== -1) {\r\n        if (visual < 2) {\r\n          source += 'if (S.visible) VISUAL = true;\\n';\r\n          visual = 2;\r\n        } else if (P.config.debug) source += '/* visual: 2 */\\n';\r\n      } else if (['forward:', 'gotoX:y:', 'gotoSpriteOrMouse:', 'changeXposBy:', 'xpos:', 'changeYposBy:', 'ypos:', 'bounceOffEdge', 'glideSecs:toX:y:elapsed:from:'].indexOf(block[0]) !== -1) {\r\n        if (visual < 1) {\r\n          source += 'if (S.visible || S.isPenDown) VISUAL = true;\\n';\r\n          visual = 1;\r\n        } else if (P.config.debug) source += '/* visual: 1 */\\n';\r\n      } else if (['showBackground:', 'startScene', 'nextBackground', 'nextScene', 'startSceneAndWait', 'show', 'hide', 'putPenDown', 'stampCostume', 'showVariable:', 'hideVariable:', 'doAsk', 'setVolumeTo:', 'changeVolumeBy:', 'setTempoTo:', 'changeTempoBy:'].indexOf(block[0]) !== -1) {\r\n        if (visual < 3) {\r\n          source += 'VISUAL = true;\\n';\r\n          visual = 3;\r\n        } else if (P.config.debug) source += '/* visual: 3 */\\n';\r\n      }\r\n\r\n      if (block[0] === 'forward:') { /* Motion */\r\n\r\n        source += 'S.forward(' + num(block[1]) + ');\\n';\r\n\r\n      } else if (block[0] === 'turnRight:') {\r\n\r\n        source += 'S.setDirection(S.direction + ' + num(block[1]) + ');\\n';\r\n\r\n      } else if (block[0] === 'turnLeft:') {\r\n\r\n        source += 'S.setDirection(S.direction - ' + num(block[1]) + ');\\n';\r\n\r\n      } else if (block[0] === 'heading:') {\r\n\r\n        source += 'S.setDirection(' + num(block[1]) + ');\\n';\r\n\r\n      } else if (block[0] === 'pointTowards:') {\r\n\r\n        source += 'S.pointTowards(' + val(block[1]) + ');\\n';\r\n\r\n      } else if (block[0] === 'gotoX:y:') {\r\n\r\n        source += 'S.moveTo(' + num(block[1]) + ', ' + num(block[2]) + ');\\n';\r\n\r\n      } else if (block[0] === 'gotoSpriteOrMouse:') {\r\n\r\n        source += 'S.gotoObject(' + val(block[1]) + ');\\n';\r\n\r\n      } else if (block[0] === 'changeXposBy:') {\r\n\r\n        source += 'S.moveTo(S.scratchX + ' + num(block[1]) + ', S.scratchY);\\n';\r\n\r\n      } else if (block[0] === 'xpos:') {\r\n\r\n        source += 'S.moveTo(' + num(block[1]) + ', S.scratchY);\\n';\r\n\r\n      } else if (block[0] === 'changeYposBy:') {\r\n\r\n        source += 'S.moveTo(S.scratchX, S.scratchY + ' + num(block[1]) + ');\\n';\r\n\r\n      } else if (block[0] === 'ypos:') {\r\n\r\n        source += 'S.moveTo(S.scratchX, ' + num(block[1]) + ');\\n';\r\n\r\n      } else if (block[0] === 'bounceOffEdge') {\r\n\r\n        source += 'S.bounceOffEdge();\\n';\r\n\r\n      } else if (block[0] === 'setRotationStyle') {\r\n\r\n        source += 'S.rotationStyle = P.utils.parseRotationStyle(' + val(block[1]) + ');\\n';\r\n\r\n      } else if (block[0] === 'lookLike:') { /* Looks */\r\n\r\n        source += 'S.setCostume(' + val(block[1]) + ');\\n';\r\n\r\n      } else if (block[0] === 'nextCostume') {\r\n\r\n        source += 'S.showNextCostume();\\n';\r\n\r\n      } else if (block[0] === 'showBackground:' ||\r\n                 block[0] === 'startScene') {\r\n\r\n        source += 'self.setCostume(' + val(block[1]) + ');\\n';\r\n        source += 'var threads = sceneChange();\\n';\r\n        source += 'if (threads.indexOf(BASE) !== -1) {return;}\\n';\r\n\r\n      } else if (block[0] === 'nextBackground' ||\r\n                 block[0] === 'nextScene') {\r\n\r\n        source += 'S.showNextCostume();\\n';\r\n        source += 'var threads = sceneChange();\\n';\r\n        source += 'if (threads.indexOf(BASE) !== -1) {return;}\\n';\r\n\r\n      } else if (block[0] === 'startSceneAndWait') {\r\n\r\n        source += 'save();\\n';\r\n        source += 'self.setCostume(' + val(block[1]) + ');\\n';\r\n        source += 'R.threads = sceneChange();\\n';\r\n        source += 'if (R.threads.indexOf(BASE) !== -1) {return;}\\n';\r\n        var id = label();\r\n        source += 'if (!running(R.threads)) {\\n';\r\n        forceQueue(id);\r\n        source += '}\\n';\r\n        source += 'restore();\\n';\r\n\r\n      } else if (block[0] === 'say:duration:elapsed:from:') {\r\n\r\n        source += 'save();\\n';\r\n        source += 'R.id = S.say(' + val(block[1]) + ', false);\\n';\r\n        source += 'R.start = runtime.now();\\n';\r\n        source += 'R.duration = ' + num(block[2]) + ';\\n';\r\n\r\n        var id = label();\r\n        source += 'if (runtime.now() - R.start < R.duration * 1000) {\\n';\r\n        forceQueue(id);\r\n        source += '}\\n';\r\n\r\n        source += 'if (S.sayId === R.id) {\\n';\r\n        source += '  S.say(\"\");\\n';\r\n        source += '}\\n';\r\n        source += 'restore();\\n';\r\n\r\n      } else if (block[0] === 'say:') {\r\n\r\n        source += 'S.say(' + val(block[1]) + ', false);\\n';\r\n\r\n      } else if (block[0] === 'think:duration:elapsed:from:') {\r\n\r\n        source += 'save();\\n';\r\n        source += 'R.id = S.say(' + val(block[1]) + ', true);\\n';\r\n        source += 'R.start = runtime.now();\\n';\r\n        source += 'R.duration = ' + num(block[2]) + ';\\n';\r\n\r\n        var id = label();\r\n        source += 'if (runtime.now() - R.start < R.duration * 1000) {\\n';\r\n        forceQueue(id);\r\n        source += '}\\n';\r\n\r\n        source += 'if (S.sayId === R.id) {\\n';\r\n        source += '  S.say(\"\");\\n';\r\n        source += '}\\n';\r\n        source += 'restore();\\n';\r\n\r\n      } else if (block[0] === 'think:') {\r\n\r\n        source += 'S.say(' + val(block[1]) + ', true);\\n';\r\n\r\n      } else if (block[0] === 'changeGraphicEffect:by:') {\r\n\r\n        source += 'S.changeFilter(' + val(block[1]) + ', ' + num(block[2]) + ');\\n';\r\n\r\n      } else if (block[0] === 'setGraphicEffect:to:') {\r\n\r\n        source += 'S.setFilter(' + val(block[1]) + ', ' + num(block[2]) + ');\\n';\r\n\r\n      } else if (block[0] === 'filterReset') {\r\n\r\n        source += 'S.resetFilters();\\n';\r\n\r\n      } else if (block[0] === 'changeSizeBy:') {\r\n\r\n        source += 'var f = S.scale + ' + num(block[1]) + ' / 100;\\n';\r\n        source += 'S.scale = f < 0 ? 0 : f;\\n';\r\n\r\n      } else if (block[0] === 'setSizeTo:') {\r\n\r\n        source += 'var f = ' + num(block[1]) + ' / 100;\\n';\r\n        source += 'S.scale = f < 0 ? 0 : f;\\n';\r\n\r\n      } else if (block[0] === 'show') {\r\n\r\n        source += 'S.visible = true;\\n';\r\n        source += 'if (S.saying) S.updateBubble();\\n';\r\n\r\n      } else if (block[0] === 'hide') {\r\n\r\n        source += 'S.visible = false;\\n';\r\n        source += 'if (S.saying) S.updateBubble();\\n';\r\n\r\n      } else if (block[0] === 'comeToFront') {\r\n\r\n        source += 'var i = self.children.indexOf(S);\\n';\r\n        source += 'if (i !== -1) self.children.splice(i, 1);\\n';\r\n        source += 'self.children.push(S);\\n';\r\n\r\n      } else if (block[0] === 'goBackByLayers:') {\r\n\r\n        source += 'var i = self.children.indexOf(S);\\n';\r\n        source += 'if (i !== -1) {\\n';\r\n        source += '  self.children.splice(i, 1);\\n';\r\n        source += '  self.children.splice(Math.max(0, i - ' + num(block[1]) + '), 0, S);\\n';\r\n        source += '}\\n';\r\n\r\n      } else if (block[0] === 'setVideoState') {\r\n\r\n        source += 'switch (' + val(block[1]) + ') {';\r\n        source += '  case \"off\": self.showVideo(false); break;';\r\n        source += '  case \"on\": self.showVideo(true); break;';\r\n        source += '}';\r\n\r\n      // } else if (block[0] === 'setVideoTransparency') {\r\n\r\n      } else if (block[0] === 'playSound:') { /* Sound */\r\n\r\n        if (P.audio.context) {\r\n          source += 'var sound = S.getSound(' + val(block[1]) + ');\\n';\r\n          source += 'if (sound) startSound(sound);\\n';\r\n        }\r\n\r\n      } else if (block[0] === 'doPlaySoundAndWait') {\r\n\r\n        if (P.audio.context) {\r\n          source += 'var sound = S.getSound(' + val(block[1]) + ');\\n';\r\n          source += 'if (sound) {\\n';\r\n          source += '  save();\\n';\r\n          source += '  R.sound = playSound(sound);\\n';\r\n          source += '  S.activeSounds.add(R.sound);\\n';\r\n          source += '  R.start = runtime.now();\\n';\r\n          source += '  R.duration = sound.duration;\\n';\r\n          source += '  var first = true;\\n';\r\n          var id = label();\r\n          source += '  if ((runtime.now() - R.start < R.duration * 1000 || first) && !R.sound.stopped) {\\n';\r\n          source += '    var first;\\n';\r\n          forceQueue(id);\r\n          source += '  }\\n';\r\n          source += '  S.activeSounds.delete(R.sound);\\n';\r\n          source += '  restore();\\n';\r\n          source += '}\\n';\r\n        }\r\n\r\n      } else if (block[0] === 'stopAllSounds') {\r\n\r\n        if (P.audio.context) {\r\n          source += 'self.stopAllSounds();\\n';\r\n        }\r\n\r\n      // } else if (block[0] === 'drum:duration:elapsed:from:') {\r\n\r\n      } else if (block[0] === 'playDrum') {\r\n\r\n        beatHead(block[2]);\r\n        if (P.audio.context) {\r\n          source += 'R.sound = playSpan(DRUMS[Math.round(' + num(block[1]) + ') - 1] || DRUMS[2], 60, 10);\\n';\r\n        }\r\n        beatTail();\r\n\r\n      } else if (block[0] === 'rest:elapsed:from:') {\r\n\r\n        beatHead(block[1]);\r\n        beatTail();\r\n\r\n      } else if (block[0] === 'noteOn:duration:elapsed:from:') {\r\n\r\n        beatHead(block[2]);\r\n        if (P.audio.context) {\r\n          source += 'R.sound = playNote(' + num(block[1]) + ', R.duration);\\n';\r\n        }\r\n        beatTail();\r\n\r\n      // } else if (block[0] === 'midiInstrument:') {\r\n\r\n      } else if (block[0] === 'instrument:') {\r\n\r\n        source += 'S.instrument = Math.max(0, Math.min(INSTRUMENTS.length - 1, ' + num(block[1]) + ' - 1)) | 0;';\r\n\r\n      } else if (block[0] === 'changeVolumeBy:' || block[0] === 'setVolumeTo:') {\r\n\r\n        source += 'S.volume = Math.min(1, Math.max(0, ' + (block[0] === 'changeVolumeBy:' ? 'S.volume + ' : '') + num(block[1]) + ' / 100));\\n';\r\n        source += 'if (S.node) S.node.gain.value = S.volume;\\n';\r\n\r\n      } else if (block[0] === 'changeTempoBy:') {\r\n\r\n        source += 'self.tempoBPM += ' + num(block[1]) + ';\\n';\r\n\r\n      } else if (block[0] === 'setTempoTo:') {\r\n\r\n        source += 'self.tempoBPM = ' + num(block[1]) + ';\\n';\r\n\r\n      } else if (block[0] === 'clearPenTrails') { /* Pen */\r\n\r\n        source += 'self.clearPen();\\n';\r\n\r\n      } else if (block[0] === 'putPenDown') {\r\n\r\n        source += 'S.isPenDown = true;\\n';\r\n        source += 'S.dotPen();\\n';\r\n\r\n      } else if (block[0] === 'putPenUp') {\r\n\r\n        source += 'S.isPenDown = false;\\n';\r\n\r\n      } else if (block[0] === 'penColor:') {\r\n\r\n        source += 'S.setPenColor(' + num(block[1]) + ');\\n';\r\n\r\n      } else if (block[0] === 'setPenHueTo:') {\r\n\r\n        source += toHSLA;\r\n        source += 'S.penColor.x = ' + num(block[1]) + ' * 360 / 200;\\n';\r\n        source += 'S.penColor.y = 100;\\n';\r\n\r\n      } else if (block[0] === 'changePenHueBy:') {\r\n\r\n        source += toHSLA;\r\n        source += 'S.penColor.x += ' + num(block[1]) + ' * 360 / 200;\\n';\r\n        source += 'S.penColor.y = 100;\\n';\r\n\r\n      } else if (block[0] === 'setPenShadeTo:') {\r\n\r\n        source += toHSLA;\r\n        source += 'S.penColor.z = ' + num(block[1]) + ' % 200;\\n';\r\n        source += 'if (S.penColor.z < 0) S.penColor.z += 200;\\n';\r\n        source += 'S.penColor.y = 100;\\n';\r\n\r\n      } else if (block[0] === 'changePenShadeBy:') {\r\n\r\n        source += toHSLA;\r\n        source += 'S.penColor.z = (S.penColor.z + ' + num(block[1]) + ') % 200;\\n';\r\n        source += 'if (S.penColor.z < 0) S.penColor.z += 200;\\n';\r\n        source += 'S.penColor.y = 100;\\n';\r\n\r\n      } else if (block[0] === 'penSize:') {\r\n\r\n        source += 'var f = ' + num(block[1]) + ';\\n';\r\n        source += 'S.penSize = f < 1 ? 1 : f;\\n';\r\n\r\n      } else if (block[0] === 'changePenSizeBy:') {\r\n\r\n        source += 'var f = S.penSize + ' + num(block[1]) + ';\\n';\r\n        source += 'S.penSize = f < 1 ? 1 : f;\\n';\r\n\r\n      } else if (block[0] === 'stampCostume') {\r\n\r\n        source += 'S.stamp();\\n';\r\n\r\n      } else if (block[0] === 'setVar:to:') { /* Data */\r\n\r\n        source += varRef(block[1]) + ' = ' + val(block[2]) + ';\\n';\r\n\r\n      } else if (block[0] === 'changeVar:by:') {\r\n\r\n        var ref = varRef(block[1]);\r\n        source += ref + ' = (+' + ref + ' || 0) + ' + num(block[2]) + ';\\n';\r\n\r\n      } else if (block[0] === 'append:toList:') {\r\n\r\n        source += 'appendToList(' + listRef(block[2]) + ', ' + val(block[1]) + ');\\n';\r\n\r\n      } else if (block[0] === 'deleteLine:ofList:') {\r\n\r\n        source += 'deleteLineOfList(' + listRef(block[2]) + ', ' + val(block[1]) + ');\\n';\r\n\r\n      } else if (block[0] === 'insert:at:ofList:') {\r\n\r\n        source += 'insertInList(' + listRef(block[3]) + ', ' + val(block[2]) + ', '+ val(block[1]) + ');\\n';\r\n\r\n      } else if (block[0] === 'setLine:ofList:to:') {\r\n\r\n        source += 'setLineOfList(' + listRef(block[2]) + ', ' + val(block[1]) + ', '+ val(block[3]) + ');\\n';\r\n\r\n      } else if (block[0] === 'showVariable:' || block[0] === 'hideVariable:') {\r\n\r\n        var isShow = block[0] === 'showVariable:';\r\n        if (typeof block[1] !== 'string') {\r\n          throw new Error('Dynamic variables are not supported');\r\n        }\r\n        var o = object.vars[block[1]] !== undefined ? 'S' : 'self';\r\n        source += o + '.showVariable(' + val(block[1]) + ', ' + isShow + ');\\n';\r\n\r\n      // } else if (block[0] === 'showList:') {\r\n\r\n      // } else if (block[0] === 'hideList:') {\r\n\r\n      } else if (block[0] === 'broadcast:') { /* Control */\r\n\r\n        source += 'var threads = broadcast(' + val(block[1]) + ');\\n';\r\n        source += 'if (threads.indexOf(BASE) !== -1) {return;}\\n';\r\n\r\n      } else if (block[0] === 'call') {\r\n\r\n        if (P.config.debug && block[1] === 'phosphorus: debug') {\r\n          source += 'debugger;\\n';\r\n        } else {\r\n          source += 'call(S.procedures[' + val(block[1]) + '], ' + nextLabel() + ', [';\r\n          for (var i = 2; i < block.length; i++) {\r\n            if (i > 2) {\r\n              source += ', ';\r\n            }\r\n            source += val(block[i]);\r\n          }\r\n          source += ']);\\n';\r\n          delay();\r\n        }\r\n\r\n      } else if (block[0] === 'doBroadcastAndWait') {\r\n\r\n        source += 'save();\\n';\r\n        source += 'R.threads = broadcast(' + val(block[1]) + ');\\n';\r\n        source += 'if (R.threads.indexOf(BASE) !== -1) {return;}\\n';\r\n        var id = label();\r\n        source += 'if (running(R.threads)) {\\n';\r\n        forceQueue(id);\r\n        source += '}\\n';\r\n        source += 'restore();\\n';\r\n\r\n      } else if (block[0] === 'doForever') {\r\n\r\n        var id = label();\r\n        seq(block[1]);\r\n        forceQueue(id);\r\n\r\n      } else if (block[0] === 'doForeverIf') {\r\n\r\n        var id = label();\r\n\r\n        source += 'if (' + bool(block[1]) + ') {\\n';\r\n        seq(block[2]);\r\n        source += '}\\n';\r\n\r\n        forceQueue(id);\r\n\r\n      // } else if (block[0] === 'doForLoop') {\r\n\r\n      } else if (block[0] === 'doIf') {\r\n\r\n        source += 'if (' + bool(block[1]) + ') {\\n';\r\n        seq(block[2]);\r\n        source += '}\\n';\r\n\r\n      } else if (block[0] === 'doIfElse') {\r\n\r\n        source += 'if (' + bool(block[1]) + ') {\\n';\r\n        seq(block[2]);\r\n        source += '} else {\\n';\r\n        seq(block[3]);\r\n        source += '}\\n';\r\n\r\n      } else if (block[0] === 'doRepeat') {\r\n\r\n        source += 'save();\\n';\r\n        source += 'R.count = ' + num(block[1]) + ';\\n';\r\n\r\n        var id = label();\r\n\r\n        source += 'if (R.count >= 0.5) {\\n';\r\n        source += '  R.count -= 1;\\n';\r\n        seq(block[2]);\r\n        queue(id);\r\n        source += '} else {\\n';\r\n        source += '  restore();\\n';\r\n        source += '}\\n';\r\n\r\n      } else if (block[0] === 'doReturn') {\r\n\r\n        source += 'endCall();\\n';\r\n        source += 'return;\\n';\r\n\r\n      } else if (block[0] === 'doUntil') {\r\n\r\n        var id = label();\r\n        source += 'if (!' + bool(block[1]) + ') {\\n';\r\n        seq(block[2]);\r\n        queue(id);\r\n        source += '}\\n';\r\n\r\n      } else if (block[0] === 'doWhile') {\r\n\r\n        var id = label();\r\n        source += 'if (' + bool(block[1]) + ') {\\n';\r\n        seq(block[2]);\r\n        queue(id);\r\n        source += '}\\n';\r\n\r\n      } else if (block[0] === 'doWaitUntil') {\r\n\r\n        var id = label();\r\n        source += 'if (!' + bool(block[1]) + ') {\\n';\r\n        forceQueue(id);\r\n        source += '}\\n';\r\n\r\n      } else if (block[0] === 'glideSecs:toX:y:elapsed:from:') {\r\n\r\n        source += 'save();\\n';\r\n        source += 'R.start = runtime.now();\\n';\r\n        source += 'R.duration = ' + num(block[1]) + ';\\n';\r\n        source += 'R.baseX = S.scratchX;\\n';\r\n        source += 'R.baseY = S.scratchY;\\n';\r\n        source += 'R.deltaX = ' + num(block[2]) + ' - S.scratchX;\\n';\r\n        source += 'R.deltaY = ' + num(block[3]) + ' - S.scratchY;\\n';\r\n\r\n        var id = label();\r\n        source += 'var f = (runtime.now() - R.start) / (R.duration * 1000);\\n';\r\n        source += 'if (f > 1 || isNaN(f)) f = 1;\\n';\r\n        source += 'S.moveTo(R.baseX + f * R.deltaX, R.baseY + f * R.deltaY);\\n';\r\n\r\n        source += 'if (f < 1) {\\n';\r\n        forceQueue(id);\r\n        source += '}\\n';\r\n        source += 'restore();\\n';\r\n\r\n      } else if (block[0] === 'stopAll') {\r\n\r\n        source += 'runtime.stopAll();\\n';\r\n        source += 'return;\\n';\r\n\r\n      } else if (block[0] === 'stopScripts') {\r\n\r\n        source += 'switch (' + val(block[1]) + ') {\\n';\r\n        source += '  case \"all\":\\n';\r\n        source += '    runtime.stopAll();\\n';\r\n        source += '    return;\\n';\r\n        source += '  case \"this script\":\\n';\r\n        source += '    endCall();\\n';\r\n        source += '    return;\\n';\r\n        source += '  case \"other scripts in sprite\":\\n';\r\n        source += '  case \"other scripts in stage\":\\n';\r\n        source += '    S.stopSoundsExcept(BASE);\\n';\r\n        source += '    for (var i = 0; i < runtime.queue.length; i++) {\\n';\r\n        source += '      if (i !== THREAD && runtime.queue[i] && runtime.queue[i].sprite === S) {\\n';\r\n        source += '        runtime.queue[i] = undefined;\\n';\r\n        source += '      }\\n';\r\n        source += '    }\\n';\r\n        source += '    break;\\n';\r\n        source += '}\\n';\r\n\r\n      } else if (block[0] === 'wait:elapsed:from:') {\r\n\r\n        wait(num(block[1]));\r\n\r\n      } else if (block[0] === 'warpSpeed') {\r\n\r\n        source += 'WARP++;\\n';\r\n        seq(block[1]);\r\n        source += 'WARP--;\\n';\r\n\r\n      } else if (block[0] === 'createCloneOf') {\r\n\r\n        source += 'clone(' + val(block[1]) + ');\\n';\r\n\r\n      } else if (block[0] === 'deleteClone') {\r\n\r\n        source += 'if (S.isClone) {\\n';\r\n        source += '  S.remove();\\n';\r\n        source += '  var i = self.children.indexOf(S);\\n';\r\n        source += '  if (i !== -1) self.children.splice(i, 1);\\n';\r\n        source += '  for (var i = 0; i < runtime.queue.length; i++) {\\n';\r\n        source += '    if (runtime.queue[i] && runtime.queue[i].sprite === S) {\\n';\r\n        source += '      runtime.queue[i] = undefined;\\n';\r\n        source += '    }\\n';\r\n        source += '  }\\n';\r\n        source += '  return;\\n';\r\n        source += '}\\n';\r\n\r\n      } else if (block[0] === 'doAsk') { /* Sensing */\r\n\r\n        source += 'R.id = self.nextPromptId++;\\n';\r\n\r\n        var id = label();\r\n        source += 'if (self.promptId < R.id) {\\n';\r\n        forceQueue(id);\r\n        source += '}\\n';\r\n\r\n        source += 'S.ask(' + val(block[1]) + ');\\n';\r\n\r\n        var id = label();\r\n        source += 'if (self.promptId === R.id) {\\n';\r\n        forceQueue(id);\r\n        source += '}\\n';\r\n\r\n      } else if (block[0] === 'timerReset') {\r\n\r\n        source += 'runtime.timerStart = runtime.now();\\n';\r\n\r\n      } else {\r\n\r\n        warn('Undefined command: ' + block[0]);\r\n\r\n      }\r\n    };\r\n\r\n    var source = '';\r\n    var startfn = object.fns.length;\r\n    var fns = [0];\r\n\r\n    if (script[0][0] === 'procDef') {\r\n      var inputs = script[0][2];\r\n      var types = script[0][1].match(/%[snmdcb]/g) || [];\r\n      var used: boolean[] = [];\r\n    }\r\n\r\n    for (let i = 1; i < script.length; i++) {\r\n      compile(script[i]);\r\n    }\r\n\r\n    if (script[0][0] === 'procDef') {\r\n      let pre = '';\r\n      for (let i = types.length; i--;) {\r\n        // We know `used` is defined at this point, but typescript doesn't.\r\n        if (used![i]) {\r\n          const t = types[i];\r\n          if (t === '%d' || t === '%n' || t === '%c') {\r\n            pre += 'C.numargs[' + i + '] = +C.args[' + i + '] || 0;\\n';\r\n          } else if (t === '%b') {\r\n            pre += 'C.boolargs[' + i + '] = bool(C.args[' + i + ']);\\n';\r\n          }\r\n        }\r\n      }\r\n      source = pre + source;\r\n      for (let i = 1, l = fns.length; i < l; ++i) {\r\n        fns[i] += pre.length;\r\n      }\r\n      source += 'endCall();\\n';\r\n      source += 'return;\\n';\r\n    }\r\n\r\n    for (let i = 0; i < fns.length; i++) {\r\n      object.fns.push(P.runtime.createContinuation(source.slice(fns[i])));\r\n    }\r\n\r\n    var f = object.fns[startfn];\r\n\r\n    if (script[0][0] === 'whenClicked') {\r\n      object.listeners.whenClicked.push(f);\r\n    } else if (script[0][0] === 'whenGreenFlag') {\r\n      object.listeners.whenGreenFlag.push(f);\r\n    } else if (script[0][0] === 'whenCloned') {\r\n      object.listeners.whenCloned.push(f);\r\n    } else if (script[0][0] === 'whenIReceive') {\r\n      var key = script[0][1].toLowerCase();\r\n      (object.listeners.whenIReceive[key] || (object.listeners.whenIReceive[key] = [])).push(f);\r\n    } else if (script[0][0] === 'whenKeyPressed') {\r\n      if (script[0][1] === 'any') {\r\n        for (var i = 128; i--;) {\r\n          object.listeners.whenKeyPressed[i].push(f);\r\n        }\r\n      } else {\r\n        object.listeners.whenKeyPressed[P.runtime.getKeyCode(script[0][1])].push(f);\r\n      }\r\n    } else if (script[0][0] === 'whenSceneStarts') {\r\n      var key = script[0][1].toLowerCase();\r\n      (object.listeners.whenSceneStarts[key] || (object.listeners.whenSceneStarts[key] = [])).push(f);\r\n    } else if (script[0][0] === 'procDef') {\r\n      const warp = script[0][4];\r\n      object.procedures[script[0][1]] = new Scratch2Procedure(f, warp, inputs);\r\n    } else {\r\n      warn('Undefined event: ' + script[0][0]);\r\n    }\r\n\r\n    if (P.config.debug) {\r\n      var variant = script[0][0];\r\n      if (variant === 'procDef') {\r\n        variant += ':' + script[0][1];\r\n      }\r\n      console.log('compiled sb2 script', variant, source);\r\n    }\r\n  };\r\n\r\n  export function compile(stage) {\r\n    warnings = Object.create(null);\r\n\r\n    compileScripts(stage);\r\n    for (var i = 0; i < stage.children.length; i++) {\r\n      compileScripts(stage.children[i]);\r\n    }\r\n\r\n    for (var key in warnings) {\r\n      console.warn(key + (warnings[key] > 1 ? ' (repeated ' + warnings[key] + ' times)' : ''));\r\n    }\r\n  }\r\n}\r\n","/// <reference path=\"phosphorus.ts\" />\r\n/// <reference path=\"utils.ts\" />\r\n/// <reference path=\"core.ts\" />\r\n/// <reference path=\"fonts.ts\" />\r\n/// <reference path=\"config.ts\" />\r\n/// <reference path=\"runtime.ts\" />\r\n\r\n// Scratch 3 project loader and runtime objects\r\nnamespace P.sb3 {\r\n  // \"Scratch3*\" classes implement some part of the Scratch 3 runtime.\r\n  // \"SB3*\" interfaces are just types for Scratch 3 projects\r\n\r\n  /**\r\n   * The path to fetch remote assets from.\r\n   * Replace $md5ext with the md5sum and the format of the asset.\r\n   */\r\n  export const ASSETS_API = 'https://assets.scratch.mit.edu/internalapi/asset/$md5ext/get/';\r\n\r\n  interface SB3Project {\r\n    targets: SB3Target[];\r\n    monitors: SB3Watcher[];\r\n    meta: any;\r\n  }\r\n\r\n  export interface SB3Target {\r\n    name: string;\r\n    isStage: boolean;\r\n    sounds: SB3Sound[];\r\n    costumes: SB3Costume[];\r\n    draggable: boolean;\r\n    size: number;\r\n    direction: number;\r\n    visible: boolean;\r\n    x: number;\r\n    y: number;\r\n    currentCostume: number;\r\n    rotationStyle: string;\r\n    layerOrder: number;\r\n    lists: ObjectMap<SB3List>;\r\n    variables: ObjectMap<SB3Variable>;\r\n    blocks: ObjectMap<SB3Block>;\r\n    broadcasts: ObjectMap<string>;\r\n  }\r\n\r\n  interface SB3Costume {\r\n    /**\r\n     * The ID of the asset. Should be its md5sum.\r\n     * Example: \"b61b1077b0ea1931abee9dbbfa7903ff\"\r\n     */\r\n    assetId: string;\r\n    name: string;\r\n    /**\r\n     * \"Real pixels per image pixel\"\r\n     */\r\n    bitmapResolution: number;\r\n    /**\r\n     * The ID of the asset with its extension.\r\n     * Example: \"b61b1077b0ea1931abee9dbbfa7903ff.png\"\r\n     */\r\n    md5ext: string;\r\n    /**\r\n     * The format of the image.\r\n     * Usually \"png\" or \"svg\"\r\n     */\r\n    dataFormat: string;\r\n    rotationCenterX: number;\r\n    rotationCenterY: number;\r\n  }\r\n\r\n  interface SB3Sound {\r\n    assetId: string,\r\n    name: string;\r\n    dataFormat: string;\r\n    format: string;\r\n    rate: number;\r\n    sampleCount: number;\r\n    md5ext: string;\r\n  }\r\n\r\n  export interface SB3Block {\r\n    opcode: string;\r\n    topLevel: boolean;\r\n    inputs: ObjectMap<any>;\r\n    fields: ObjectMap<any>;\r\n    mutation: any;\r\n    parent: string | null;\r\n    next: string | null;\r\n  }\r\n\r\n  interface SB3Watcher {\r\n    spriteName: string | null;\r\n    visible: boolean;\r\n    id: string;\r\n    opcode: string;\r\n    mode: string;\r\n    params: any;\r\n    x: number;\r\n    y: number;\r\n    sliderMin?: number;\r\n    sliderMax?: number;\r\n    width?: number;\r\n    height?: number;\r\n    isDiscrete: boolean;\r\n  }\r\n\r\n  /**\r\n   * Tuple of name and initial value\r\n   */\r\n  type SB3List = [string, any[]];\r\n\r\n  /**\r\n   * Tuple of name and initial value\r\n   */\r\n  type SB3Variable = [string, any];\r\n\r\n  // Implements a Scratch 3 Stage.\r\n  export class Scratch3Stage extends P.core.Stage {\r\n    public sb3data: SB3Target;\r\n    public listIds: ObjectMap<string> = {};\r\n  }\r\n\r\n  // Implements a Scratch 3 Sprite.\r\n  export class Scratch3Sprite extends P.core.Sprite {\r\n    public sb3data: any;\r\n    public listIds: ObjectMap<string> = {};\r\n\r\n    _clone() {\r\n      return new Scratch3Sprite(this.stage);\r\n    }\r\n  }\r\n\r\n  export type Target = Scratch3Stage | Scratch3Sprite;\r\n\r\n  // Implements a Scratch 3 VariableWatcher.\r\n  // Adds Scratch 3-like styling\r\n  export class Scratch3VariableWatcher extends P.core.Watcher {\r\n    public id: string;\r\n    public opcode: string;\r\n    private mode: string;\r\n    public params: any;\r\n    private libraryEntry: P.sb3.compiler.WatchedValue;\r\n    private sliderMin: number;\r\n    private sliderMax: number;\r\n    private sliderStep: number;\r\n    private sliderInput: HTMLInputElement;\r\n    private containerEl: HTMLElement;\r\n    private valueEl: HTMLElement;\r\n\r\n    constructor(stage: Scratch3Stage, data: SB3Watcher) {\r\n      super(stage, data.spriteName || '');\r\n\r\n      // Unique ID\r\n      this.id = data.id;\r\n      // Operation code, similar to other parts of Scratch 3\r\n      this.opcode = data.opcode;\r\n      this.mode = data.mode;\r\n      // Watcher options, varies by opcode.\r\n      this.params = data.params;\r\n      // This opcode's watcherLibrary entry.\r\n      this.libraryEntry = P.sb3.compiler.watcherLibrary[this.opcode];\r\n\r\n      this.x = data.x;\r\n      this.y = data.y;\r\n      this.visible = typeof data.visible === 'boolean' ? data.visible : true;\r\n\r\n      this.sliderMin = data.sliderMin || 0;\r\n      this.sliderMax = data.sliderMax || 0;\r\n      // isDiscrete doesn't always exist\r\n      if (typeof data.isDiscrete !== 'undefined') {\r\n        this.sliderStep = data.isDiscrete ? 1 : 0.01;\r\n      } else {\r\n        this.sliderStep = 1;\r\n      }\r\n\r\n      // Mark ourselves as invalid if the opcode is not recognized.\r\n      if (!this.libraryEntry) {\r\n        console.warn('unknown watcher', this.opcode, this);\r\n        this.valid = false;\r\n      }\r\n    }\r\n\r\n    update() {\r\n      if (this.visible) {\r\n        const value = this.getValue();\r\n        // Value is only updated when the value has changed to reduce useless paints/reflows in some browsers.\r\n        if (this.valueEl.textContent !== value) {\r\n          this.valueEl.textContent = value;\r\n        }\r\n        if (this.sliderInput) {\r\n          this.sliderInput.value = value;\r\n        }\r\n      }\r\n    }\r\n\r\n    init() {\r\n      super.init();\r\n\r\n      // call init() if it exists\r\n      if (this.libraryEntry.init) {\r\n        this.libraryEntry.init(this);\r\n      }\r\n\r\n      this.updateLayout();\r\n    }\r\n\r\n    setVisible(visible: boolean) {\r\n      super.setVisible(visible);\r\n      this.updateLayout();\r\n    }\r\n\r\n    // Gets the label of the watcher.\r\n    // Will include the sprite's name if any.\r\n    // Example results are 'Sprite1: my variable' and 'timer'\r\n    getLabel() {\r\n      const label = this.libraryEntry.getLabel(this);\r\n      if (!this.target.isStage) {\r\n        return this.targetName + ': ' + label;\r\n      }\r\n      return label;\r\n    }\r\n\r\n    // Gets the value of the watcher as a string.\r\n    getValue() {\r\n      const value = this.libraryEntry.evaluate(this);\r\n      // Round off numbers to the 6th decimal\r\n      if (typeof value === 'number') {\r\n        return '' + (Math.round(value * 1e6) / 1e6);\r\n      }\r\n      return '' + value;\r\n    }\r\n\r\n    // Attempts to set the value of the watcher.\r\n    // Will silently fail if this watcher cannot be set.\r\n    setValue(value: number) {\r\n      // Not all opcodes have a set()\r\n      if (this.libraryEntry.set) {\r\n        this.libraryEntry.set(this, value);\r\n        this.update();\r\n      }\r\n    }\r\n\r\n    // Updates or creates the layout of the watcher.\r\n    updateLayout() {\r\n      // If the HTML element has already been created, them simply update the CSS display property.\r\n      if (this.containerEl) {\r\n        this.containerEl.style.display = this.visible ? 'flex' : 'none';\r\n        return;\r\n      }\r\n\r\n      if (!this.visible) {\r\n        return;\r\n      }\r\n\r\n      const container = document.createElement('div');\r\n      container.classList.add('s3-watcher-container');\r\n      container.dataset.opcode = this.opcode;\r\n      container.style.top = (this.y / 10) + 'em';\r\n      container.style.left = (this.x / 10) + 'em';\r\n\r\n      const value = document.createElement('div');\r\n      value.classList.add('s3-watcher-value');\r\n      value.textContent = this.getValue();\r\n\r\n      this.containerEl = container;\r\n      this.valueEl = value;\r\n      this.stage.ui.appendChild(container);\r\n\r\n      const mode = this.mode;\r\n\r\n      if (mode === 'large') {\r\n        container.classList.add('s3-watcher-large');\r\n        container.appendChild(value);\r\n      } else {\r\n        // mode is probably 'normal' or 'slider'\r\n        // if it's not, then 'normal' would be a good fallback anyways.\r\n\r\n        const row = document.createElement('div');\r\n        row.classList.add('s3-watcher-row');\r\n        row.classList.add('s3-watcher-row-normal');\r\n\r\n        const label = document.createElement('div');\r\n        label.classList.add('s3-watcher-label');\r\n        label.textContent = this.getLabel();\r\n\r\n        row.appendChild(label);\r\n        row.appendChild(value);\r\n\r\n        container.classList.add('s3-watcher-container-normal');\r\n        container.appendChild(row);\r\n\r\n        // 'slider' is a slight variation of 'normal', just with an extra slider row.\r\n        if (mode === 'slider') {\r\n          const slider = document.createElement('div');\r\n          slider.classList.add('s3-watcher-row-slider');\r\n\r\n          const input = document.createElement('input');\r\n          input.type = 'range';\r\n          input.min = '' + this.sliderMin;\r\n          input.max = '' + this.sliderMax;\r\n          input.step = '' + this.sliderStep;\r\n          input.value = this.getValue();\r\n          input.addEventListener('input', this.sliderChanged.bind(this));\r\n          this.sliderInput = input;\r\n\r\n          slider.appendChild(input);\r\n          container.appendChild(slider);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Handles slider input events.\r\n    sliderChanged(e: Event) {\r\n      const value = +(e.target as HTMLInputElement).value;\r\n      this.setValue(value);\r\n    }\r\n  }\r\n\r\n  export class ListWatcherRow {\r\n    public element: HTMLElement;\r\n    private indexEl: HTMLElement;\r\n    private valueEl: HTMLElement;\r\n    private value: any = '';\r\n    private index: any = -1;\r\n    private y: any = 0;\r\n    private visible: boolean = true;\r\n\r\n    constructor() {\r\n      this.element = document.createElement('div');\r\n      this.indexEl = document.createElement('div');\r\n      this.valueEl = document.createElement('div');\r\n      this.element.className = 's3-list-row';\r\n      this.indexEl.className = 's3-list-index';\r\n      this.valueEl.className = 's3-list-value';\r\n      this.element.appendChild(this.indexEl);\r\n      this.element.appendChild(this.valueEl);\r\n    }\r\n\r\n    /**\r\n     * Set the value of this row.\r\n     */\r\n    setValue(value: any) {\r\n      if (value !== this.value) {\r\n        this.value = value;\r\n        this.valueEl.textContent = value;\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Set the index of this row.\r\n     * @param index The *JavaScript* index of the row.\r\n     */\r\n    setIndex(index: number) {\r\n      if (index !== this.index) {\r\n        this.index = index;\r\n        this.indexEl.textContent = (index + 1).toString();\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Set the Y coordinate of this row.\r\n     */\r\n    setY(y: number) {\r\n      if (y !== this.y) {\r\n        this.y = y;\r\n        this.element.style.transform = 'translateY(' + y + 'px)';\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Set the visibility of this row.\r\n     */\r\n    setVisible(visible: boolean) {\r\n      if (this.visible !== visible) {\r\n        this.visible = visible;\r\n        this.element.style.display = visible ? '' : 'none';\r\n      }\r\n    }\r\n  }\r\n\r\n  const enum ScrollDirection {\r\n    Up, Down,\r\n  }\r\n  export class Scratch3ListWatcher extends P.core.Watcher {\r\n    private params: any;\r\n    private id: string;\r\n    private width: number;\r\n    private height: number;\r\n    private list: Scratch3List;\r\n    private containerEl: HTMLElement;\r\n    private topLabelEl: HTMLElement;\r\n    private bottomLabelEl: HTMLElement;\r\n    private middleContainerEl: HTMLElement;\r\n    private endpointEl: HTMLElement;\r\n    private contentEl: HTMLElement;\r\n    private rows: ListWatcherRow[] = [];\r\n    private firstUpdateComplete: boolean = false;\r\n    private _rowHeight: number = -1;\r\n    private scrollTop: number = 0;\r\n    private lastZoomLevel: number = 1;\r\n    private scrollAhead: number = 8;\r\n    private scrollBack: number = 3;\r\n    private scrollDirection: ScrollDirection = ScrollDirection.Down;\r\n    private _contentHeight: number = -1;\r\n\r\n    constructor(stage: Scratch3Stage, data: SB3Watcher) {\r\n      super(stage, data.spriteName || '');\r\n\r\n      this.id = data.id;\r\n      this.params = data.params;\r\n      this.x = data.x;\r\n      this.y = data.y;\r\n      this.visible = typeof data.visible === 'boolean' ? data.visible : true;\r\n      this.width = data.width || 100;\r\n      this.height = data.height || 200;\r\n    }\r\n\r\n    shouldUpdate() {\r\n      if (!this.visible) return false;\r\n      if (this.lastZoomLevel !== this.stage.zoom) return true;\r\n      if (!this.firstUpdateComplete) return true;\r\n      return this.list.modified;\r\n    }\r\n\r\n    update() {\r\n      if (!this.shouldUpdate()) {\r\n        return;\r\n      }\r\n\r\n      if (this.lastZoomLevel !== this.stage.zoom) {\r\n        this.contentEl.scrollTop *= this.stage.zoom / this.lastZoomLevel;\r\n      }\r\n      this.list.modified = false;\r\n      this.lastZoomLevel = this.stage.zoom;\r\n      this.firstUpdateComplete = true;\r\n\r\n      this.updateList();\r\n\r\n      const bottomLabelText = this.getBottomLabel();\r\n      if (this.bottomLabelEl.textContent !== bottomLabelText) {\r\n        this.bottomLabelEl.textContent = this.getBottomLabel();\r\n      }\r\n    }\r\n\r\n    updateList() {\r\n      const height = this.list.length * this.getRowHeight();\r\n      this.endpointEl.style.transform = 'translateY(' + (height * this.stage.zoom) + 'px)';\r\n\r\n      const topVisible = this.scrollTop;\r\n      const bottomVisible = topVisible + this.getContentHeight();\r\n\r\n      let startingIndex = Math.floor(topVisible / this.getRowHeight());\r\n      let endingIndex = Math.ceil(bottomVisible / this.getRowHeight());\r\n\r\n      if (this.scrollDirection === ScrollDirection.Down) {\r\n        startingIndex -= this.scrollBack;\r\n        endingIndex += this.scrollAhead;\r\n      } else {\r\n        startingIndex -= this.scrollAhead;\r\n        endingIndex += this.scrollBack;\r\n      }\r\n\r\n      if (startingIndex < 0) startingIndex = 0;\r\n      if (endingIndex > this.list.length - 1) endingIndex = this.list.length - 1;\r\n\r\n      // Sanity checks:\r\n      // Cap ourselves at 50 rows on screen.\r\n      if (endingIndex - startingIndex > 50) {\r\n        endingIndex = startingIndex + 50;\r\n      }\r\n\r\n      const visibleRows = endingIndex - startingIndex;\r\n      while (this.rows.length <= visibleRows) {\r\n        this.addRow();\r\n      }\r\n\r\n      for (var listIndex = startingIndex, rowIndex = 0; listIndex <= endingIndex; listIndex++, rowIndex++) {\r\n        let row = this.rows[rowIndex];\r\n        row.setIndex(listIndex);\r\n        row.setValue(this.list[listIndex]);\r\n        row.setY(listIndex * this._rowHeight * this.stage.zoom);\r\n        row.setVisible(true);\r\n      }\r\n      while (rowIndex < this.rows.length) {\r\n        this.rows[rowIndex].setVisible(false);\r\n        rowIndex++;\r\n      }\r\n    }\r\n\r\n    init() {\r\n      super.init();\r\n      const target = this.target as Target;\r\n      const listId = this.id;\r\n      const listName = target.listIds[listId];\r\n      if (!(listName in this.target.lists)) {\r\n        // Create the list if it doesn't exist.\r\n        // It might be better to mark ourselves as invalid instead, but this works just fine.\r\n        this.target.lists[listName] = createList();\r\n      }\r\n      this.list = this.target.lists[listName] as Scratch3List;\r\n      this.target.listWatchers[listName] = this;\r\n      this.updateLayout();\r\n    }\r\n\r\n    getTopLabel(): string {\r\n      if (this.target.isStage) {\r\n        return this.params.LIST;\r\n      }\r\n      return this.target.name + ': ' + this.params.LIST;\r\n    }\r\n    getBottomLabel(): string {\r\n      return 'length ' + this.list.length;\r\n    }\r\n\r\n    getContentHeight(): number {\r\n      if (this._contentHeight === -1) {\r\n        this._contentHeight = this.contentEl.offsetHeight;\r\n      }\r\n      return this._contentHeight;\r\n    }\r\n\r\n    getRowHeight(): number {\r\n      if (this._rowHeight === -1) {\r\n        // Space between each row, in pixels.\r\n        const PADDING = 2;\r\n        const row = this.addRow();\r\n        const height = row.element.offsetHeight;\r\n        this._rowHeight = height + PADDING;\r\n      }\r\n      return this._rowHeight;\r\n    }\r\n\r\n    addRow(): ListWatcherRow {\r\n      const row = new ListWatcherRow();\r\n      this.rows.push(row);\r\n      this.contentEl.appendChild(row.element);\r\n      return row;\r\n    }\r\n\r\n    updateLayout() {\r\n      if (!this.containerEl) {\r\n        this.createLayout();\r\n      }\r\n      this.containerEl.style.display = this.visible ? '' : 'none';\r\n    }\r\n\r\n    setVisible(visible: boolean) {\r\n      super.setVisible(visible);\r\n      this.updateLayout();\r\n    }\r\n\r\n    createLayout() {\r\n      this.containerEl = document.createElement('div');\r\n      this.topLabelEl = document.createElement('div');\r\n      this.bottomLabelEl = document.createElement('div');\r\n      this.middleContainerEl = document.createElement('div');\r\n      this.contentEl = document.createElement('div');\r\n\r\n      this.containerEl.style.top = (this.y / 10) + 'em';\r\n      this.containerEl.style.left = (this.x / 10) + 'em';\r\n      this.containerEl.style.height = (this.height / 10) + 'em';\r\n      this.containerEl.style.width = (this.width / 10) + 'em';\r\n      this.containerEl.classList.add('s3-list-container');\r\n\r\n      this.topLabelEl.textContent = this.getTopLabel();\r\n      this.topLabelEl.classList.add('s3-list-top-label');\r\n\r\n      this.bottomLabelEl.textContent = this.getBottomLabel();\r\n      this.bottomLabelEl.classList.add('s3-list-bottom-label');\r\n\r\n      this.middleContainerEl.classList.add('s3-list-content');\r\n\r\n      this.contentEl.classList.add('s3-list-rows');\r\n      this.contentEl.addEventListener('scroll', (e) => {\r\n        const scrollTop = this.contentEl.scrollTop / this.stage.zoom;\r\n        const scrollChange = this.scrollTop - scrollTop;\r\n        if (scrollChange < 0) {\r\n          this.scrollDirection = ScrollDirection.Down;\r\n        } else if (scrollChange > 0) {\r\n          this.scrollDirection = ScrollDirection.Up;\r\n        }\r\n        this.scrollTop = scrollTop;\r\n        this.updateList();\r\n      });\r\n\r\n      this.endpointEl = document.createElement('div');\r\n      this.endpointEl.className = 's3-list-endpoint';\r\n      this.contentEl.appendChild(this.endpointEl);\r\n\r\n      this.middleContainerEl.appendChild(this.contentEl);\r\n      this.containerEl.appendChild(this.topLabelEl);\r\n      this.containerEl.appendChild(this.middleContainerEl);\r\n      this.containerEl.appendChild(this.bottomLabelEl);\r\n      this.stage.ui.appendChild(this.containerEl);\r\n    }\r\n  }\r\n\r\n  // Implements a Scratch 3 procedure.\r\n  // Scratch 3 uses names as references for arguments (Scratch 2 uses indexes I believe)\r\n  export class Scratch3Procedure extends P.core.Procedure {\r\n    call(inputs: any[]) {\r\n      const args = {};\r\n      for (var i = 0; i < this.inputs.length; i++) {\r\n        args[this.inputs[i]] = inputs[i];\r\n      }\r\n      return args;\r\n    }\r\n  }\r\n\r\n  export interface Scratch3List extends Array<any> {\r\n    modified: boolean;\r\n  }\r\n\r\n  export function createList(): Scratch3List {\r\n    const list = [] as any as Scratch3List;\r\n    list.modified = false;\r\n    list.toString = function() {\r\n      var i = this.length;\r\n      while (i--) {\r\n        if (('' + this[i]).length !== 1) {\r\n          return this.join(' ');\r\n        }\r\n      }\r\n      return this.join('');\r\n    };\r\n    return list;\r\n  }\r\n\r\n  /**\r\n   * Patches and modifies an SVG element in-place to make it function properly in the forkphorus environment.\r\n   * Fixes fonts and viewBox.\r\n   */\r\n  function patchSVG(svg: SVGElement): void {\r\n    // Special treatment for the viewBox attribute\r\n    if (svg.hasAttribute('viewBox')) {\r\n      const viewBox = svg.getAttribute('viewBox')!.split(/ |,/).map((i) => +i);\r\n      if (viewBox.every((i) => !isNaN(i)) && viewBox.length === 4) {\r\n        const [ x, y, w, h ] = viewBox;\r\n        // Fix width/height to include the viewBox min x/y\r\n        svg.setAttribute('width', (w + x).toString());\r\n        svg.setAttribute('height', (h + y).toString());\r\n      } else {\r\n        console.warn('weird viewBox', svg.getAttribute('viewBox'));\r\n      }\r\n      svg.removeAttribute('viewBox');\r\n    }\r\n\r\n    const textElements = svg.querySelectorAll('text');\r\n    const usedFonts: string[] = [];\r\n    const addFont = (font: string) => {\r\n      if (usedFonts.indexOf(font) === -1) {\r\n        usedFonts.push(font);\r\n      }\r\n    };\r\n\r\n    for (var i = 0; i < textElements.length; i++) {\r\n      const el = textElements[i];\r\n      let fonts = (el.getAttribute('font-family') || '')\r\n        .split(',')\r\n        .map((i) => i.trim());\r\n      let found = false;\r\n      for (const family of fonts) {\r\n        if (P.fonts.scratch3[family]) {\r\n          found = true;\r\n          addFont(family);\r\n          break;\r\n        } else if (family === 'sans-serif') {\r\n          found = true;\r\n          // We let the system handle their respective 'sans-serif' fonts\r\n          // https://scratch.mit.edu/projects/319138929/\r\n          break;\r\n        }\r\n      }\r\n      if (!found) {\r\n        console.warn('unknown fonts', fonts);\r\n        const font = 'Sans Serif';\r\n        addFont(font);\r\n        el.setAttribute('font-family', font);\r\n      }\r\n    }\r\n\r\n    P.fonts.addFontRules(svg, usedFonts);\r\n  }\r\n\r\n  // Implements base SB3 loading logic.\r\n  // Needs to be extended to add file loading methods.\r\n  // Implementations are expected to set `this.projectData` to something before calling super.load()\r\n  export abstract class BaseSB3Loader {\r\n    protected projectData: SB3Project;\r\n    private totalTasks: number = 0;\r\n    private finishedTasks: number = 0;\r\n    private requests: XMLHttpRequest[] = [];\r\n    public aborted: boolean = false;\r\n    public onprogress = new P.utils.Slot<number>();\r\n\r\n    protected abstract getAsText(path: string): Promise<string>;\r\n    protected abstract getAsArrayBuffer(path: string): Promise<ArrayBuffer>;\r\n    protected abstract getAsImage(path: string, format: string): Promise<HTMLImageElement>;\r\n\r\n    getSVG(path: string): Promise<HTMLImageElement> {\r\n      return this.getAsText(path)\r\n        .then((source) => {\r\n          const parser = new DOMParser();\r\n          const doc = parser.parseFromString(source, 'image/svg+xml');\r\n          const svg = doc.documentElement as any;\r\n          patchSVG(svg);\r\n\r\n          return new Promise((resolve, reject) => {\r\n            const image = new Image();\r\n            image.onload = (e) => {\r\n              resolve(image);\r\n            };\r\n            image.onerror = (e) => {\r\n              reject(e);\r\n            };\r\n            image.src = 'data:image/svg+xml,' + encodeURIComponent(svg.outerHTML);\r\n          });\r\n        });\r\n    }\r\n\r\n    getBitmapImage(path: string, format: string): Promise<HTMLImageElement> {\r\n      return this.getAsImage(path, format);\r\n    }\r\n\r\n    loadCostume(data: SB3Costume, index: number): Promise<P.core.Costume> {\r\n      const path = data.assetId + '.' + data.dataFormat;\r\n      const costumeOptions = {\r\n        name: data.name,\r\n        bitmapResolution: data.bitmapResolution || 1,\r\n        rotationCenterX: data.rotationCenterX,\r\n        rotationCenterY: data.rotationCenterY,\r\n      };\r\n      if (data.dataFormat === 'svg') {\r\n        return this.getSVG(path)\r\n          .then((svg) => new P.core.VectorCostume(svg, costumeOptions));\r\n      } else {\r\n        return this.getBitmapImage(path, data.dataFormat)\r\n          .then((image) => new P.core.BitmapCostume(image, costumeOptions));\r\n      }\r\n    }\r\n\r\n    getAudioBuffer(path: string) {\r\n      return this.getAsArrayBuffer(path)\r\n        .then((buffer) => P.audio.decodeAudio(buffer))\r\n        .catch((err) => {\r\n          throw new Error(`Could not load audio: ${path} (${err})`);\r\n        });\r\n    }\r\n\r\n    loadSound(data: SB3Sound): Promise<P.core.Sound | null> {\r\n      return new Promise((resolve, reject) => {\r\n        this.getAudioBuffer(data.md5ext)\r\n          .then((buffer) => {\r\n            resolve(new P.core.Sound({\r\n              name: data.name,\r\n              buffer,\r\n            }))\r\n          })\r\n          .catch((err) => {\r\n            console.warn('Could not load sound: ' + err);\r\n            resolve(null);\r\n          });\r\n      });\r\n    }\r\n\r\n    loadWatcher(data: SB3Watcher, stage: Scratch3Stage): P.core.Watcher {\r\n      if (data.mode === 'list') {\r\n        return new Scratch3ListWatcher(stage, data);\r\n      }\r\n\r\n      return new Scratch3VariableWatcher(stage, data);\r\n    }\r\n\r\n    loadTarget(data: SB3Target): Promise<Target> {\r\n      // dirty hack for null stage\r\n      const target = new (data.isStage ? Scratch3Stage : Scratch3Sprite)(null as any);\r\n\r\n      for (const id of Object.keys(data.variables)) {\r\n        const variable = data.variables[id];\r\n        const name = variable[0];\r\n        const value = variable[1];\r\n        target.vars[name] = value;\r\n      }\r\n\r\n      for (const id of Object.keys(data.lists)) {\r\n        const list = data.lists[id];\r\n        const name = list[0];\r\n        const content = list[1];\r\n        // There are some cases where projects has multiple lists of the same name, different ID\r\n        // To avoid issues caused by that, we will give the first definition precedence over later definitions.\r\n        if (target.lists[name]) {\r\n          continue;\r\n        }\r\n        const scratchList = createList();\r\n        for (var i = 0; i < content.length; i++) {\r\n          scratchList[i] = content[i];\r\n        }\r\n        target.lists[name] = scratchList;\r\n        target.listIds[id] = name;\r\n      }\r\n\r\n      target.name = data.name;\r\n      target.currentCostumeIndex = data.currentCostume;\r\n      target.sb3data = data;\r\n\r\n      if (target.isStage) {\r\n\r\n      } else {\r\n        const sprite = target as Scratch3Sprite;\r\n        sprite.scratchX = data.x;\r\n        sprite.scratchY = data.y;\r\n        sprite.visible = data.visible;\r\n        sprite.direction = data.direction;\r\n        sprite.scale = data.size / 100;\r\n        sprite.isDraggable = data.draggable;\r\n        sprite.rotationStyle = P.utils.parseRotationStyle(data.rotationStyle);\r\n      }\r\n\r\n      const costumesPromise = Promise.all<P.core.Costume>(data.costumes.map((c: any, i: any) => this.loadCostume(c, i)));\r\n      const soundsPromise = Promise.all<P.core.Sound | null>(data.sounds.map((c) => this.loadSound(c)));\r\n\r\n      return Promise.all<P.core.Costume[], Array<P.core.Sound | null>>([costumesPromise, soundsPromise])\r\n        .then((result) => {\r\n          const costumes = result[0];\r\n          const sounds = result[1];\r\n\r\n          target.costumes = costumes;\r\n          sounds.forEach((sound) => sound && target.addSound(sound));\r\n\r\n          return target;\r\n        });\r\n    }\r\n\r\n    loadFonts() {\r\n      const promises: Promise<unknown>[] = [];\r\n      for (const family in P.fonts.scratch3) {\r\n        promises.push(this.promiseTask(P.utils.settled(P.fonts.loadLocalFont(family, P.fonts.scratch3[family]))));\r\n      }\r\n      return Promise.all(promises);\r\n    }\r\n\r\n    compileTargets(targets: Target[], stage: P.core.Stage): void {\r\n      if (P.config.debug) {\r\n        console.time('Scratch 3 compile');\r\n      }\r\n      for (const target of targets) {\r\n        const compiler = new P.sb3.compiler.Compiler(target);\r\n        compiler.compile();\r\n      }\r\n      if (P.config.debug) {\r\n        console.timeEnd('Scratch 3 compile');\r\n      }\r\n    }\r\n\r\n    load() {\r\n      if (!this.projectData) {\r\n        throw new Error('Project data is missing or invalid');\r\n      }\r\n      if (!Array.isArray(this.projectData.targets)) {\r\n        throw new Error('Invalid project data: missing targets');\r\n      }\r\n\r\n      const targets = this.projectData.targets;\r\n      // sort targets by their layerOrder to match how they will display\r\n      targets.sort((a, b) => a.layerOrder - b.layerOrder);\r\n\r\n      return this.loadFonts()\r\n        .then(() => Promise.all(targets.map((data) => this.loadTarget(data))))\r\n        .then((targets: any) => {\r\n          if (this.aborted) {\r\n            throw new Error('Loading aborting.');\r\n          }\r\n          const stage = targets.filter((i) => i.isStage)[0] as Scratch3Stage;\r\n          if (!stage) {\r\n            throw new Error('Project does not have a Stage');\r\n          }\r\n          const sprites = targets.filter((i) => i.isSprite) as Scratch3Sprite[];\r\n          sprites.forEach((sprite) => sprite.stage = stage);\r\n          stage.children = sprites;\r\n\r\n          stage.allWatchers = this.projectData.monitors\r\n            .map((data) => this.loadWatcher(data, stage))\r\n            .filter((i) => i && i.valid);\r\n          stage.allWatchers.forEach((watcher) => watcher.init());\r\n\r\n          this.compileTargets(targets, stage);\r\n\r\n          return stage;\r\n        });\r\n    }\r\n\r\n    abort() {\r\n      this.aborted = true;\r\n      for (const request of this.requests) {\r\n        request.abort();\r\n      }\r\n    }\r\n\r\n    newTask() {\r\n      if (this.aborted) {\r\n        throw new Error('Loading aborted.');\r\n      }\r\n      this.totalTasks++;\r\n      this.onprogress.emit(this.progress);\r\n    }\r\n\r\n    endTask() {\r\n      if (this.aborted) {\r\n        throw new Error('Loading aborted.');\r\n      }\r\n      this.finishedTasks++;\r\n      this.onprogress.emit(this.progress);\r\n    }\r\n\r\n    requestTask<T>(request: P.IO.XHRRequest<T>): Promise<T> {\r\n      this.requests.push(request.xhr);\r\n      return this.promiseTask(request.load());\r\n    }\r\n\r\n    promiseTask<T>(promise: Promise<T>): Promise<T> {\r\n      this.newTask();\r\n      return promise\r\n        .then((value) => {\r\n          this.endTask();\r\n          return value;\r\n        });\r\n    }\r\n\r\n    get progress() {\r\n      return this.finishedTasks / this.totalTasks || 0;\r\n    }\r\n  }\r\n\r\n  // Loads a .sb3 file\r\n  export class SB3FileLoader extends BaseSB3Loader {\r\n    private buffer: ArrayBuffer;\r\n    private zip: JSZip.Zip;\r\n\r\n    constructor(buffer: ArrayBuffer) {\r\n      super();\r\n      this.buffer = buffer;\r\n    }\r\n\r\n    getAsText(path: string) {\r\n      this.newTask();\r\n      return this.zip.file(path).async('text')\r\n        .then((response) => {\r\n          this.endTask();\r\n          return response;\r\n        });\r\n    }\r\n\r\n    getAsArrayBuffer(path: string) {\r\n      this.newTask();\r\n      return this.zip.file(path).async('arrayBuffer')\r\n        .then((response) => {\r\n          this.endTask();\r\n          return response;\r\n        });\r\n    }\r\n\r\n    getAsBase64(path: string) {\r\n      this.newTask();\r\n      return this.zip.file(path).async('base64')\r\n        .then((response) => {\r\n          this.endTask();\r\n          return response;\r\n        });\r\n    }\r\n\r\n    getAsImage(path: string, format: string) {\r\n      this.newTask();\r\n      return this.getAsBase64(path)\r\n        .then((imageData) => {\r\n          return new Promise<HTMLImageElement>((resolve, reject) => {\r\n            const image = new Image();\r\n            image.onload = () => {\r\n              this.endTask();\r\n              resolve(image);\r\n            };\r\n            image.onerror = (error) => {\r\n              reject('Failed to load image: ' + path + '.' + format);\r\n            };\r\n            image.src = 'data:image/' + format + ';base64,' + imageData;\r\n          });\r\n        });\r\n    }\r\n\r\n    load() {\r\n      return JSZip.loadAsync(this.buffer)\r\n        .then((data) => {\r\n          this.zip = data;\r\n          return this.getAsText('project.json');\r\n        })\r\n        .then((project) => {\r\n          this.projectData = JSON.parse(project);\r\n        })\r\n        .then(() => super.load());\r\n    }\r\n  }\r\n\r\n  // Loads a Scratch 3 project from the scratch.mit.edu website\r\n  // Uses either a loaded project.json or its ID\r\n  export class Scratch3Loader extends BaseSB3Loader {\r\n    private projectId: number | null;\r\n\r\n    constructor(idOrData: number | SB3Project) {\r\n      super();\r\n      if (typeof idOrData === 'object') {\r\n        this.projectData = idOrData;\r\n        this.projectId = null;\r\n      } else {\r\n        this.projectId = idOrData;\r\n      }\r\n    }\r\n\r\n    getAsText(path: string) {\r\n      return this.requestTask(new P.IO.TextRequest(ASSETS_API.replace('$md5ext', path)));\r\n    }\r\n\r\n    getAsArrayBuffer(path: string) {\r\n      return this.requestTask(new P.IO.ArrayBufferRequest(ASSETS_API.replace('$md5ext', path)));\r\n    }\r\n\r\n    getAsImage(path: string) {\r\n      this.newTask();\r\n      return new Promise<HTMLImageElement>((resolve, reject) => {\r\n        const image = new Image();\r\n        image.onload = () => {\r\n          this.endTask();\r\n          resolve(image);\r\n        };\r\n        image.onerror = (err) => {\r\n          reject('Failed to load image: ' + image.src);\r\n        };\r\n        image.crossOrigin = 'anonymous';\r\n        image.src = ASSETS_API.replace('$md5ext', path);\r\n      });\r\n    }\r\n\r\n    load() {\r\n      if (this.projectId) {\r\n        return this.requestTask(new P.IO.JSONRequest(P.config.PROJECT_API.replace('$id', '' + this.projectId)))\r\n          .then((data) => {\r\n            this.projectData = data;\r\n            return super.load();\r\n          });\r\n      } else {\r\n        return super.load();\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * The Scratch 3 compiler.\r\n */\r\nnamespace P.sb3.compiler {\r\n  import Fn = P.runtime.Fn;\r\n\r\n  /**\r\n   * Asserts at compile-time that a value is of the type `never`\r\n   */\r\n  function assertNever(i: never): never {\r\n    throw new Error('Compile-time assertNever failed.');\r\n  }\r\n\r\n  // IDs of native types\r\n  // https://github.com/LLK/scratch-vm/blob/36fe6378db930deb835e7cd342a39c23bb54dd72/src/serialization/sb3.js#L60-L79\r\n  const enum NativeTypes {\r\n    MATH_NUM = 4,\r\n    POSITIVE_NUM = 5,\r\n    WHOLE_NUM = 6,\r\n    INTEGER_NUM = 7,\r\n    ANGLE_NUM = 8,\r\n    COLOR_PICKER = 9,\r\n    TEXT = 10,\r\n    BROADCAST = 11,\r\n    VAR = 12,\r\n    LIST = 13,\r\n  }\r\n\r\n  /**\r\n   * JS code with an associated type.\r\n   * Returns the source when stringified, making the raw type safe to use in concatenation.\r\n   */\r\n  export class CompiledInput {\r\n    /**\r\n     * Whether this input could potentially be a number-like object at runtime.\r\n     * A value may be a potential number if:\r\n     *  - it is a number\r\n     *  - it is a boolean\r\n     *  - it is a string that represents a number or a boolean\r\n     */\r\n    public potentialNumber: boolean = true;\r\n\r\n    constructor(public source: string, public type: InputType) {\r\n\r\n    }\r\n\r\n    toString() {\r\n      return this.source;\r\n    }\r\n  }\r\n\r\n  // Shorter CompiledInput aliases\r\n  const stringInput = (v: string) => new CompiledInput(v, 'string');\r\n  const numberInput = (v: string) => new CompiledInput(v, 'number');\r\n  const booleanInput = (v: string) => new CompiledInput(v, 'boolean');\r\n  const anyInput = (v: string) => new CompiledInput(v, 'any');\r\n\r\n  /**\r\n   * A compiler for a statement.\r\n   * A statement is something like \"move ( ) steps\"\r\n   * @param util Use the methods of the utility class to write the body.\r\n   */\r\n  export type StatementCompiler = (util: StatementUtil) => void\r\n\r\n  /**\r\n   * A compiler for an input.\r\n   * An input is something like the \"10\" in \"move (10) steps\"\r\n   */\r\n  export type InputCompiler = (util: InputUtil) => CompiledInput;\r\n\r\n  /**\r\n   * A compiler for a hat block.\r\n   */\r\n  export interface HatCompiler {\r\n    /**\r\n     * The handler that is responsible for installing the compiled functions\r\n     */\r\n    handle(util: HatUtil): void;\r\n    /**\r\n     * Optionally make changes to the script's source before it is compiled away into functions.\r\n     */\r\n    postcompile?(compiler: Compiler, source: string, hat: SB3Block): string;\r\n    /**\r\n     * Optionally handle what happens before compilation begins.\r\n     */\r\n    precompile?(compiler: Compiler, hat: SB3Block): void;\r\n  };\r\n\r\n  export type InputType = 'string' | 'boolean' | 'number' | 'any' | 'list';\r\n\r\n  /**\r\n   * General block generation utilities.\r\n   */\r\n  export class BlockUtil {\r\n    constructor(public compiler: Compiler, public block: SB3Block) {\r\n\r\n    }\r\n\r\n    get target() {\r\n      return this.compiler.target;\r\n    }\r\n\r\n    get stage() {\r\n      return this.compiler.target.stage;\r\n    }\r\n\r\n    /**\r\n     * Compile an input, and give it a type.\r\n     */\r\n    getInput(name: string, type: InputType): CompiledInput {\r\n      return this.compiler.compileInput(this.block, name, type);\r\n    }\r\n\r\n    /**\r\n     * Compile a field. Results are unescaped strings and unsafe to include in a script.\r\n     */\r\n    getField(name: string): string {\r\n      return this.compiler.getField(this.block, name);\r\n    }\r\n\r\n    /**\r\n     * Get and sanitize a field.\r\n     */\r\n    fieldInput(name: string): CompiledInput {\r\n      return this.sanitizedInput(this.getField(name));\r\n    }\r\n\r\n    /**\r\n     * Sanitize an unescaped string into an input.\r\n     */\r\n    sanitizedInput(string: string): CompiledInput {\r\n      return this.compiler.sanitizedInput(string);\r\n    }\r\n\r\n    /**\r\n     * Sanitize an unescaped string for inclusion in a script.\r\n     */\r\n    sanitizedString(string: string): string {\r\n      return this.compiler.sanitizedString(string);\r\n    }\r\n\r\n    /**\r\n     * Gets a field's reference to a variable.\r\n     */\r\n    getVariableReference(field: string): string {\r\n      return this.compiler.getVariableReference(this.getField(field));\r\n    }\r\n\r\n    /**\r\n     * Gets a field's reference to a list.\r\n     */\r\n    getListReference(field: string): string {\r\n      return this.compiler.getListReference(this.getField(field));\r\n    }\r\n\r\n    /**\r\n     * Gets the scope of a field's reference to a variable.\r\n     */\r\n    getVariableScope(field: string): string {\r\n      return this.compiler.getVariableScope(this.getField(field));\r\n    }\r\n\r\n    /**\r\n     * Gets the scope of a field's reference to a list.\r\n     */\r\n    getListScope(field: string): string {\r\n      return this.compiler.getListScope(this.getField(field));\r\n    }\r\n\r\n    /**\r\n     * Forcibly converts JS to another type.\r\n     */\r\n    asType(input: string, type: InputType): string {\r\n      return this.compiler.asType(input, type)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * General statement generation utilities.\r\n   */\r\n  export class StatementUtil extends BlockUtil {\r\n    public content: string = '';\r\n    public substacksQueue: boolean = false;\r\n\r\n    /**\r\n     * Compile a substack.\r\n     */\r\n    getSubstack(name: string): string {\r\n      const labelsBefore = this.compiler.labelCount;\r\n      const substack = this.compiler.compileSubstackInput(this.block, name);\r\n      if (this.compiler.labelCount !== labelsBefore) {\r\n        this.substacksQueue = true;\r\n      }\r\n      return substack;\r\n    }\r\n\r\n    /**\r\n     * Gets the next label ID ready for use. The ID is unique and will cannot be reused.\r\n     */\r\n    claimNextLabel(): number {\r\n      return this.compiler.labelCount++;\r\n    }\r\n\r\n    /**\r\n     * Create a new label at this location. A label ID will be created if none is supplied.\r\n     */\r\n    addLabel(label?: number): number {\r\n      if (!label) {\r\n        label = this.claimNextLabel();\r\n      }\r\n      // We'll use special syntax to denote this spot as a label.\r\n      // It'll be cleaned up later in compilation.\r\n      // Interestingly, this is actually valid JavaScript, so cleanup isn't strictly necessary.\r\n      this.write(`{{${label}}}`);\r\n      return label;\r\n    }\r\n\r\n    /**\r\n     * Writes the queue() method to call a label.\r\n     */\r\n    queue(label: number): void {\r\n      this.writeLn(`queue(${label}); return;`);\r\n    }\r\n\r\n    /**\r\n     * Writes the forceQueue() method to call a label.\r\n     */\r\n    forceQueue(label: number): void {\r\n      this.writeLn(`forceQueue(${label}); return;`);\r\n    }\r\n\r\n    /**\r\n     * Writes an appropriate VISUAL check\r\n     */\r\n    visual(variant: 'drawing' | 'visible' | 'always'): void {\r\n      switch (variant) {\r\n        case 'drawing': this.writeLn('if (S.visible || S.isPenDown) VISUAL = true;'); break;\r\n        case 'visible': this.writeLn('if (S.visible) VISUAL = true;'); break;\r\n        case 'always': this.writeLn('VISUAL = true;'); break;\r\n        default: assertNever(variant);\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Update the speech bubble, if any.\r\n     */\r\n    updateBubble() {\r\n      this.writeLn('if (S.saying) S.updateBubble()');\r\n    }\r\n\r\n    /**\r\n     * Writes JS to pause the script for a known duration of time.\r\n     */\r\n    wait(seconds: string) {\r\n      this.writeLn('save();');\r\n      this.writeLn('R.start = runtime.now();');\r\n      this.writeLn(`R.duration = ${seconds}`);\r\n      this.writeLn('var first = true;');\r\n      const label = this.addLabel();\r\n      this.writeLn('if (runtime.now() - R.start < R.duration * 1000 || first) {');\r\n      this.writeLn('  var first;');\r\n      this.forceQueue(label);\r\n      this.writeLn('}');\r\n      this.writeLn('restore();');\r\n    }\r\n\r\n    /**\r\n     * Append to the content\r\n     */\r\n    write(content: string): void {\r\n      this.content += content;\r\n    }\r\n\r\n    /**\r\n     * Append to the content, followed by a newline.\r\n     */\r\n    writeLn(content: string): void {\r\n      this.content += content + '\\n';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * General input generation utilities.\r\n   */\r\n  export class InputUtil extends BlockUtil {\r\n    numberInput(v: string) { return numberInput(v); }\r\n    stringInput(v: string) { return stringInput(v); }\r\n    booleanInput(v: string) { return booleanInput(v); }\r\n    anyInput(v: string) { return anyInput(v); }\r\n  }\r\n\r\n  /**\r\n   * General hat handling utilities.\r\n   */\r\n  export class HatUtil extends BlockUtil {\r\n    constructor(compiler: Compiler, block: SB3Block, public startingFunction: Fn) {\r\n      super(compiler, block);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * A value that can be watched by a variable watcher.\r\n   */\r\n  export interface WatchedValue {\r\n    /**\r\n     * Initializes the watcher.\r\n     */\r\n    init?(watcher: P.sb3.Scratch3VariableWatcher): void;\r\n    /**\r\n     * Sets the value of the watcher to a new number.\r\n     */\r\n    set?(watcher: P.sb3.Scratch3VariableWatcher, value: number): void;\r\n    /**\r\n     * Evaluates the current value of the watcher. Called every visible frame.\r\n     */\r\n    evaluate(watcher: P.sb3.Scratch3VariableWatcher): any;\r\n    /**\r\n     * Determines the label to display in the watcher. Called once during initialization (after init)\r\n     */\r\n    getLabel(watcher: P.sb3.Scratch3VariableWatcher): string;\r\n  }\r\n\r\n  interface CompilerState {\r\n    isWarp: boolean;\r\n  }\r\n\r\n  // Block definitions\r\n  export const statementLibrary: ObjectMap<StatementCompiler> = Object.create(null);\r\n  export const inputLibrary: ObjectMap<InputCompiler> = Object.create(null);\r\n  export const hatLibrary: ObjectMap<HatCompiler> = Object.create(null);\r\n  export const watcherLibrary: ObjectMap<WatchedValue> = Object.create(null);\r\n\r\n  /**\r\n   * The new compiler for Scratch 3 projects.\r\n   */\r\n  export class Compiler {\r\n    /**\r\n     * The Stage or Sprite to compile.\r\n     */\r\n    public target: Target;\r\n    /**\r\n     * The raw .sb3 data for this target.\r\n     */\r\n    public data: SB3Target;\r\n    /**\r\n     * The blocks of this target.\r\n     */\r\n    public blocks: ObjectMap<SB3Block>;\r\n    /**\r\n     * Total number of labels created by this compiler.\r\n     */\r\n    public labelCount: number = 0;\r\n    public state: CompilerState;\r\n\r\n    constructor(target: Target) {\r\n      this.target = target;\r\n      this.data = target.sb3data;\r\n      this.blocks = this.data.blocks;\r\n    }\r\n\r\n    /**\r\n     * Gets the IDs of all hat blocks.\r\n     */\r\n    getHatBlocks(): string[] {\r\n      return Object.keys(this.blocks)\r\n        .filter((i) => this.blocks[i].topLevel);\r\n    }\r\n\r\n    /**\r\n     * Get the compiler for a statement\r\n     */\r\n    getStatementCompiler(opcode: string): StatementCompiler | null {\r\n      if (statementLibrary[opcode]) {\r\n        return statementLibrary[opcode];\r\n      }\r\n      return null;\r\n    }\r\n\r\n    /**\r\n     * Get the compiler for an input\r\n     */\r\n    getInputCompiler(opcode: string): InputCompiler | null {\r\n      if (inputLibrary[opcode]) {\r\n        return inputLibrary[opcode];\r\n      }\r\n      return null;\r\n    }\r\n\r\n    /**\r\n     * Get the compiler for a hat\r\n     */\r\n    getHatCompiler(opcode: string): HatCompiler | null {\r\n      if (hatLibrary[opcode]) {\r\n        return hatLibrary[opcode];\r\n      }\r\n      return null;\r\n    }\r\n\r\n    /**\r\n     * Gets the default value to use for a missing input.\r\n     */\r\n    getInputFallback(type: InputType): string {\r\n      switch (type) {\r\n        case 'number': return '0';\r\n        case 'boolean': return 'false';\r\n        case 'string': return '\"\"';\r\n        case 'any': return '\"\"';\r\n        case 'list': return '\"\"';\r\n      }\r\n      assertNever(type);\r\n    }\r\n\r\n    /**\r\n     * Applies type coercions to JS to forcibly change it's type.\r\n     */\r\n    asType(input: string, type: InputType): string {\r\n      switch (type) {\r\n        case 'string': return '(\"\" + ' + input + ')';\r\n        case 'number': return '(+' + input + ' || 0)';\r\n        case 'boolean': return 'bool(' + input + ')';\r\n        case 'any': return input;\r\n        case 'list': throw new Error(\"Converting to 'list' type is not something you're supposed to do\");\r\n      }\r\n      assertNever(type);\r\n    }\r\n\r\n    /**\r\n     * Converts a compiled input to another type, if necessary\r\n     */\r\n    convertInputType(input: CompiledInput, type: InputType): CompiledInput {\r\n      // If the types are already identical, no changes are necessary\r\n      if (input.type === type) {\r\n        return input;\r\n      }\r\n      // The 'any' type is a little bit special.\r\n      // When the input is of type 'list', we change the desired type to string to fix list stringification.\r\n      // In all other cases no action is necessary.\r\n      if (type === 'any') {\r\n        if (input.type === 'list') {\r\n          type = 'string';\r\n        } else {\r\n          return input;\r\n        }\r\n      }\r\n      return new CompiledInput(this.asType(input.source, type), type);\r\n    }\r\n\r\n    /**\r\n     * Sanitize a string into a CompiledInput\r\n     */\r\n    sanitizedInput(string: string): CompiledInput {\r\n      return stringInput(this.sanitizedString(string));\r\n    }\r\n\r\n    /**\r\n     * Sanitize a string for use in the runtime.\r\n     */\r\n    sanitizedString(string: string): string {\r\n      // Sometimes weird things happen and non-strings get passed around to here.\r\n      if (typeof string !== 'string') {\r\n        console.warn('sanitizedString got a non-string object', string);\r\n        string = string + '';\r\n      }\r\n      string = string\r\n        .replace(/\\\\/g, '\\\\\\\\')\r\n        .replace(/'/g, '\\\\\\'')\r\n        .replace(/\"/g, '\\\\\"')\r\n        .replace(/\\n/g, '\\\\n')\r\n        .replace(/\\r/g, '\\\\r')\r\n        .replace(/\\{/g, '\\\\x7b')\r\n        .replace(/\\}/g, '\\\\x7d');\r\n      return `\"${string}\"`;\r\n    }\r\n\r\n    /**\r\n     * Creates a sanitized block comment with the given contents.\r\n     */\r\n    sanitizedComment(content: string): string {\r\n      // just disallow the content from ending the comment, and everything should be fine.\r\n      content = content\r\n        .replace(/\\*\\//g, '');\r\n      return `/* ${content} */`;\r\n    }\r\n\r\n    /**\r\n     * Determines the runtime object that owns a variable in the runtime.\r\n     * The variable may be created if it cannot be found.\r\n     */\r\n    getVariableScope(name: string): string {\r\n      if (name in this.target.stage.vars) {\r\n        return 'self';\r\n      } else if (name in this.target.vars) {\r\n        return 'S';\r\n      } else {\r\n        // Create missing variables in the sprite scope.\r\n        this.target.vars[name] = 0;\r\n        return 'S';\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Determines the runtime object that owns a list in the runtime.\r\n     * The list may be created if it cannot be found.\r\n     */\r\n    getListScope(name: string): string {\r\n      if (name in this.target.stage.lists) {\r\n        return 'self';\r\n      } else if (name in this.target.lists) {\r\n        return 'S';\r\n      } else {\r\n        // Create missing lists in the sprite scope.\r\n        this.target.lists[name] = createList();\r\n        return 'S';\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Gets the runtime reference to a variable.\r\n     */\r\n    getVariableReference(name: string): string {\r\n      return `${this.getVariableScope(name)}.vars[${this.sanitizedString(name)}]`;\r\n    }\r\n\r\n    /**\r\n     * Gets the runtime reference to a list.\r\n     */\r\n    getListReference(name: string): string {\r\n      return `${this.getListScope(name)}.lists[${this.sanitizedString(name)}]`;\r\n    }\r\n\r\n    /**\r\n     * Determine if a string literal could potentially become a number at runtime.\r\n     * May return false positives.\r\n     * @see CompiledInput\r\n     */\r\n    isStringLiteralPotentialNumber(text: string) {\r\n      return /\\d|true|false|Infinity/.test(text);\r\n    }\r\n\r\n    /**\r\n     * Compile a native or primitive value.\r\n     */\r\n    compileNativeInput(native: any[], desiredType: InputType): CompiledInput {\r\n      const type = native[0];\r\n      switch (type) {\r\n        // These all function as numbers. I believe they are only differentiated so the editor can be more helpful.\r\n        case NativeTypes.MATH_NUM:\r\n        case NativeTypes.POSITIVE_NUM:\r\n        case NativeTypes.WHOLE_NUM:\r\n        case NativeTypes.INTEGER_NUM:\r\n        case NativeTypes.ANGLE_NUM: {\r\n          // [type, value]\r\n          const number = +native[1];\r\n          if (isNaN(number) || desiredType === 'string') {\r\n            return this.sanitizedInput(native[1]);\r\n          } else {\r\n            // It's important that we use number.toString() instead of native[1] to avoid invalid syntax\r\n            // For example the input \"0123\" represents the number \"123\", but including \"0123\" in JS will throw SyntaxErrors.\r\n            return numberInput(number.toString());\r\n          }\r\n        }\r\n\r\n        case NativeTypes.TEXT: {\r\n          // [type, value]\r\n          const value = native[1];\r\n          // Do not attempt any conversions if the desired type is string or if the value does not appear to be number-like\r\n          if (desiredType !== 'string' && /\\d/.test(value)) {\r\n            const number = +value;\r\n            // If the stringification of the number is not the same as the original value, do not convert.\r\n            // This fixes issues where the stringification is used instead of the number itself.\r\n            // For example the number \"0123\" will end up \"123\" so reading the first letter of \"0123\" would return 1 instead of 0\r\n            if (number.toString() === value) {\r\n              if (!isNaN(number)) {\r\n                return numberInput(number.toString());\r\n              }\r\n            }\r\n          }\r\n          const input = this.sanitizedInput(native[1] + '');\r\n          input.potentialNumber = this.isStringLiteralPotentialNumber(native[1]);\r\n          return input;\r\n        }\r\n\r\n        case NativeTypes.VAR:\r\n          // [type, name, id]\r\n          return anyInput(this.getVariableReference(native[1]));\r\n\r\n        case NativeTypes.LIST:\r\n          // [type, name, id]\r\n          return new CompiledInput(this.getListReference(native[1]), 'list');\r\n\r\n        case NativeTypes.BROADCAST:\r\n          // [type, name, id]\r\n          return this.sanitizedInput(native[1]);\r\n\r\n        case NativeTypes.COLOR_PICKER: {\r\n          // [type, color]\r\n          // Color is a value like \"#abcdef\"\r\n          const color = native[1];\r\n          const hex = color.substr(1);\r\n          // Ensure that it is actually a hex number.\r\n          if (/^[0-9a-f]{6,8}$/.test(hex)) {\r\n            return numberInput('0x' + hex);\r\n          } else {\r\n            this.warn('expected hex color code but got', hex);\r\n            return numberInput('0x0');\r\n          }\r\n        }\r\n\r\n        default:\r\n          this.warn('unknown native', type, native);\r\n          return stringInput('\"\"');\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Compile an input of a block, and do any necessary type coercions.\r\n     */\r\n    compileInput(parentBlock: SB3Block, inputName: string, type: InputType): CompiledInput {\r\n      // Handling when the block does not contain an input entry.\r\n      if (!parentBlock.inputs[inputName]) {\r\n        // This could be a sign of another issue, so log a warning.\r\n        this.warn('missing input', inputName);\r\n        return new CompiledInput(this.getInputFallback(type), type);\r\n      }\r\n\r\n      const input = parentBlock.inputs[inputName];\r\n\r\n      if (Array.isArray(input[1])) {\r\n        const native = input[1];\r\n        return this.convertInputType(this.compileNativeInput(native, type), type);\r\n      }\r\n\r\n      const inputBlockId = input[1];\r\n\r\n      // Handling null inputs where the input exists but is just empty.\r\n      // This is normal and happens very often.\r\n      if (!inputBlockId) {\r\n        return new CompiledInput(this.getInputFallback(type), type);\r\n      }\r\n\r\n      const inputBlock = this.blocks[inputBlockId];\r\n      const opcode = inputBlock.opcode;\r\n      const compiler = this.getInputCompiler(opcode);\r\n\r\n      // If we don't recognize this block, that's a problem.\r\n      if (!compiler) {\r\n        this.warn('unknown input', opcode, inputBlock);\r\n        return new CompiledInput(this.getInputFallback(type), type);\r\n      }\r\n\r\n      const util = new InputUtil(this, inputBlock);\r\n      let result = compiler(util);\r\n\r\n      if (P.config.debug) {\r\n        result.source = this.sanitizedComment(inputBlock.opcode) + result.source;\r\n      }\r\n\r\n      return this.convertInputType(result, type);\r\n    }\r\n\r\n    /**\r\n     * Get a field of a block.\r\n     */\r\n    getField(block: SB3Block, fieldName: string): string {\r\n      const value = block.fields[fieldName];\r\n      if (!value) {\r\n        // This could be a sign of another issue, so log a warning.\r\n        this.warn('missing field', fieldName);\r\n        return '';\r\n      }\r\n      return value[0];\r\n    }\r\n\r\n    /**\r\n     * Compile a script within a script.\r\n     */\r\n    compileSubstackInput(block: SB3Block, substackName: string): string {\r\n      // empty substacks are normal\r\n      if (!block.inputs[substackName]) {\r\n        return '';\r\n      }\r\n\r\n      const substack = block.inputs[substackName];\r\n      const type = substack[0];\r\n      const id = substack[1];\r\n\r\n      if (id === null) {\r\n        return '';\r\n      }\r\n\r\n      return this.compileStack(id);\r\n    }\r\n\r\n    /**\r\n     * Creates a fresh CompilerState\r\n     */\r\n    getNewState(): CompilerState {\r\n      return {\r\n        isWarp: false,\r\n      };\r\n    }\r\n\r\n    /**\r\n     * Compile an entire script from a starting block.\r\n     */\r\n    compileStack(startingBlock: string): string {\r\n      let script = '';\r\n      let block = this.blocks[startingBlock];\r\n\r\n      while (true) {\r\n        var opcode = block.opcode;\r\n        const compiler = this.getStatementCompiler(opcode);\r\n\r\n        if (P.config.debug) {\r\n          script += this.sanitizedComment(block.opcode);\r\n        }\r\n\r\n        if (compiler) {\r\n          const util = new StatementUtil(this, block);\r\n          compiler(util);\r\n          script += util.content;\r\n        } else {\r\n          script += '/* unknown statement */';\r\n          this.warn('unknown statement', opcode, block);\r\n        }\r\n\r\n        if (!block.next) {\r\n          break;\r\n        }\r\n        block = this.blocks[block.next];\r\n      }\r\n\r\n      return script;\r\n    }\r\n\r\n    /**\r\n     * Compile a hat block and its children.\r\n     * The hat handler will be used, and the scripts will be installed.\r\n     */\r\n    compileHat(hat: SB3Block): void {\r\n      const hatCompiler = this.getHatCompiler(hat.opcode);\r\n      if (!hatCompiler) {\r\n        // If a hat block is otherwise recognized as an input or statement, don't warn.\r\n        // Most projects have at least one of these \"dangling\" blocks.\r\n        if (!this.getInputCompiler(hat.opcode) && !this.getStatementCompiler(hat.opcode)) {\r\n          this.warn('unknown hat block', hat.opcode, hat);\r\n        }\r\n        return;\r\n      }\r\n\r\n      this.labelCount = this.target.fns.length;\r\n\r\n      const startingBlock = hat.next;\r\n      // Empty hats will be ignored\r\n      if (!startingBlock) {\r\n        return;\r\n      }\r\n\r\n      this.state = this.getNewState();\r\n\r\n      if (hatCompiler.precompile) {\r\n        hatCompiler.precompile(this, hat);\r\n      }\r\n\r\n      // There is always a label placed at the beginning of the script.\r\n      // If you're clever, you may be able to remove this at some point.\r\n      let script = `{{${this.labelCount++}}}`;\r\n      script += this.compileStack(startingBlock);\r\n\r\n      // If a block wants to do some changes to the script after script generation but before compilation, let it.\r\n      // TODO: should this happen after parseResult?\r\n      if (hatCompiler.postcompile) {\r\n        script = hatCompiler.postcompile(this, script, hat);\r\n      }\r\n\r\n      // Parse the script to search for labels, and remove the label metadata.\r\n      const parseResult = this.parseScript(script);\r\n      const parsedScript = parseResult.script;\r\n\r\n      const startFn = this.target.fns.length;\r\n      for (let label of Object.keys(parseResult.labels)) {\r\n        this.target.fns[label] = P.runtime.createContinuation(parsedScript.slice(parseResult.labels[label]));\r\n      }\r\n\r\n      const startingFn = this.target.fns[startFn];\r\n      const util = new HatUtil(this, hat, startingFn);\r\n      hatCompiler.handle(util);\r\n\r\n      if (P.config.debug) {\r\n        this.log(`[${this.target.name}] compiled sb3 script \"${hat.opcode}\"`, script, this.target);\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Parse a generated script for label locations, and remove redundant data.\r\n     */\r\n    parseScript(script: string): { labels: ObjectMap<number>, script: string; } {\r\n      const labels = {};\r\n      let index = 0;\r\n      let accumulator = 0;\r\n\r\n      while (true) {\r\n        const labelStart = script.indexOf('{{', index);\r\n        if (labelStart === -1) {\r\n          break;\r\n        }\r\n        const labelEnd = script.indexOf('}}', index);\r\n        const id = script.substring(labelStart + 2, labelEnd);\r\n        const length = labelEnd + 2 - labelStart;\r\n        accumulator += length;\r\n\r\n        labels[id] = labelEnd + 2 - accumulator;\r\n\r\n        index = labelEnd + 2;\r\n      }\r\n\r\n      // We don't **actually* have to remove the {{0}} labels (its technically valid JS),\r\n      // but it's probably a good idea.\r\n      const fixedScript = script.replace(/{{\\d+}}/g, '');\r\n\r\n      return {\r\n        labels,\r\n        script: fixedScript,\r\n      };\r\n    }\r\n\r\n    /**\r\n     * Log a warning\r\n     */\r\n    warn(...args: any[]) {\r\n      args.unshift('[sb3 compiler]');\r\n      console.warn.apply(console, args);\r\n    }\r\n\r\n    /**\r\n     * Log info\r\n     */\r\n    log(...args: any[]) {\r\n      args.unshift('[sb3 compiler]');\r\n      console.log.apply(console, args);\r\n    }\r\n\r\n    /**\r\n     * Compiles the scripts of the target with the current data.\r\n     */\r\n    compile(): void {\r\n      const hats = this.getHatBlocks();\r\n\r\n      for (const hatId of hats) {\r\n        const hat = this.blocks[hatId];\r\n        this.compileHat(hat);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Scratch 3 blocks.\r\n */\r\n(function() {\r\n  const statementLibrary = P.sb3.compiler.statementLibrary;\r\n  const inputLibrary = P.sb3.compiler.inputLibrary;\r\n  const hatLibrary = P.sb3.compiler.hatLibrary;\r\n  const watcherLibrary = P.sb3.compiler.watcherLibrary;\r\n\r\n  /* Statements */\r\n  statementLibrary['control_all_at_once'] = function(util) {\r\n    // https://github.com/LLK/scratch-vm/blob/bb42c0019c60f5d1947f3432038aa036a0fddca6/src/blocks/scratch3_control.js#L194-L199\r\n    const SUBSTACK = util.getSubstack('SUBSTACK');\r\n    util.write(SUBSTACK);\r\n  };\r\n  statementLibrary['control_clear_counter'] = function(util) {\r\n    util.writeLn('self.counter = 0;');\r\n  };\r\n  statementLibrary['control_create_clone_of'] = function(util) {\r\n    const CLONE_OPTION = util.getInput('CLONE_OPTION', 'any');\r\n    util.writeLn(`clone(${CLONE_OPTION});`);\r\n  };\r\n  statementLibrary['control_delete_this_clone'] = function(util) {\r\n    util.writeLn('if (S.isClone) {');\r\n    util.writeLn('  S.remove();');\r\n    util.writeLn('  var i = self.children.indexOf(S);');\r\n    util.writeLn('  if (i !== -1) self.children.splice(i, 1);');\r\n    util.writeLn('  for (var i = 0; i < runtime.queue.length; i++) {');\r\n    util.writeLn('    if (runtime.queue[i] && runtime.queue[i].sprite === S) {');\r\n    util.writeLn('      runtime.queue[i] = undefined;');\r\n    util.writeLn('    }');\r\n    util.writeLn('  }');\r\n    util.writeLn('  return;');\r\n    util.writeLn('}');\r\n  };\r\n  statementLibrary['control_forever'] = function(util) {\r\n    const SUBSTACK = util.getSubstack('SUBSTACK');\r\n    if (util.compiler.state.isWarp && !util.substacksQueue) {\r\n      util.writeLn('while (true) {');\r\n      util.write(SUBSTACK);\r\n      util.writeLn('}');\r\n    } else {\r\n      const label = util.addLabel();\r\n      util.write(SUBSTACK);\r\n      util.queue(label);\r\n    }\r\n  };\r\n  statementLibrary['control_if'] = function(util) {\r\n    const CONDITION = util.getInput('CONDITION', 'any');\r\n    const SUBSTACK = util.getSubstack('SUBSTACK');\r\n    util.writeLn(`if (${CONDITION}) {`);\r\n    util.write(SUBSTACK);\r\n    util.writeLn('}');\r\n  };\r\n  statementLibrary['control_if_else'] = function(util) {\r\n    const CONDITION = util.getInput('CONDITION', 'any');\r\n    const SUBSTACK = util.getSubstack('SUBSTACK');\r\n    const SUBSTACK2 = util.getSubstack('SUBSTACK2');\r\n    util.writeLn(`if (${CONDITION}) {`);\r\n    util.write(SUBSTACK);\r\n    util.writeLn('} else {');\r\n    util.write(SUBSTACK2);\r\n    util.writeLn('}');\r\n  };\r\n  statementLibrary['control_incr_counter'] = function(util) {\r\n    util.writeLn('self.counter++;');\r\n  };\r\n  statementLibrary['control_repeat'] = function(util) {\r\n    const TIMES = util.getInput('TIMES', 'any');\r\n    const SUBSTACK = util.getSubstack('SUBSTACK');\r\n    if (util.compiler.state.isWarp && !util.substacksQueue) {\r\n      util.writeLn('save();');\r\n      util.writeLn(`R.count = ${TIMES};`);\r\n      util.writeLn('while (R.count >= 0.5) {');\r\n      util.writeLn('  R.count -= 1;');\r\n      util.write(SUBSTACK);\r\n      util.writeLn('}');\r\n      util.writeLn('restore();');\r\n    } else {\r\n      util.writeLn('save();');\r\n      util.writeLn(`R.count = ${TIMES};`);\r\n      const label = util.addLabel();\r\n      util.writeLn('if (R.count >= 0.5) {');\r\n      util.writeLn('  R.count -= 1;');\r\n      util.write(SUBSTACK);\r\n      util.queue(label);\r\n      util.writeLn('} else {');\r\n      util.writeLn('  restore();');\r\n      util.writeLn('}');\r\n    }\r\n  };\r\n  statementLibrary['control_repeat_until'] = function(util) {\r\n    const CONDITION = util.getInput('CONDITION', 'boolean');\r\n    const SUBSTACK = util.getSubstack('SUBSTACK');\r\n    if (util.compiler.state.isWarp && !util.substacksQueue) {\r\n      util.writeLn(`while (!${CONDITION}) {`);\r\n      util.write(SUBSTACK);\r\n      util.writeLn('}');\r\n    } else {\r\n      const label = util.addLabel();\r\n      util.writeLn(`if (!${CONDITION}) {`);\r\n      util.write(SUBSTACK);\r\n      util.queue(label);\r\n      util.writeLn('}');\r\n    }\r\n  };\r\n  statementLibrary['control_stop'] = function(util) {\r\n    const STOP_OPTION = util.getField('STOP_OPTION');\r\n    switch (STOP_OPTION) {\r\n      case 'all':\r\n        util.writeLn('runtime.stopAll(); return;');\r\n        break;\r\n      case 'this script':\r\n        util.writeLn('endCall(); return;');\r\n        break;\r\n      case 'other scripts in sprite':\r\n      case 'other scripts in stage':\r\n        util.writeLn('S.stopSoundsExcept(BASE);');\r\n        util.writeLn('for (var i = 0; i < runtime.queue.length; i++) {');\r\n        util.writeLn('  if (i !== THREAD && runtime.queue[i] && runtime.queue[i].sprite === S) {');\r\n        util.writeLn('    runtime.queue[i] = undefined;');\r\n        util.writeLn('  }');\r\n        util.writeLn('}');\r\n        break;\r\n    }\r\n  };\r\n  statementLibrary['control_wait'] = function(util) {\r\n    const DURATION = util.getInput('DURATION', 'any');\r\n    util.writeLn('save();');\r\n    util.writeLn('R.start = runtime.now();');\r\n    util.writeLn(`R.duration = ${DURATION};`);\r\n    util.writeLn(`var first = true;`);\r\n    const label = util.addLabel();\r\n    util.writeLn('if (runtime.now() - R.start < R.duration * 1000 || first) {');\r\n    util.writeLn('  var first;');\r\n    util.forceQueue(label);\r\n    util.writeLn('}');\r\n    util.writeLn('restore();');\r\n  };\r\n  statementLibrary['control_wait_until'] = function(util) {\r\n    const CONDITION = util.getInput('CONDITION', 'boolean');\r\n    const label = util.addLabel();\r\n    util.writeLn(`if (!${CONDITION}) {`);\r\n    util.forceQueue(label);\r\n    util.writeLn('}');\r\n  };\r\n  statementLibrary['control_while'] = function(util) {\r\n    const CONDITION = util.getInput('CONDITION', 'boolean');\r\n    const SUBSTACK = util.getSubstack('SUBSTACK');\r\n    if (util.compiler.state.isWarp && !util.substacksQueue) {\r\n      util.writeLn(`while (${CONDITION}) {`);\r\n      util.write(SUBSTACK);\r\n      util.writeLn('}');\r\n    } else {\r\n      const label = util.addLabel();\r\n      util.writeLn(`if (${CONDITION}) {`);\r\n      util.write(SUBSTACK);\r\n      util.queue(label);\r\n      util.writeLn('}');\r\n    }\r\n  };\r\n  statementLibrary['data_addtolist'] = function(util) {\r\n    const LIST = util.getListReference('LIST');\r\n    const ITEM = util.getInput('ITEM', 'any');\r\n    util.writeLn(`watchedAppendToList(${LIST}, ${ITEM});`);\r\n  };\r\n  statementLibrary['data_changevariableby'] = function(util) {\r\n    const VARIABLE = util.getVariableReference('VARIABLE');\r\n    const VALUE = util.getInput('VALUE', 'number');\r\n    util.writeLn(`${VARIABLE} = (${util.asType(VARIABLE, 'number')} + ${VALUE});`);\r\n  };\r\n  statementLibrary['data_deletealloflist'] = function(util) {\r\n    const LIST = util.getListReference('LIST');\r\n    util.writeLn(`${LIST}.length = 0;`);\r\n  };\r\n  statementLibrary['data_deleteoflist'] = function(util) {\r\n    const LIST = util.getListReference('LIST');\r\n    const INDEX = util.getInput('INDEX', 'any');\r\n    util.writeLn(`watchedDeleteLineOfList(${LIST}, ${INDEX});`);\r\n  };\r\n  statementLibrary['data_hidelist'] = function(util) {\r\n    const LIST = util.sanitizedString(util.getField('LIST'));\r\n    const scope = util.getListScope('LIST');\r\n    util.writeLn(`${scope}.showList(${LIST}, false);`);\r\n  };\r\n  statementLibrary['data_hidevariable'] = function(util) {\r\n    const VARIABLE = util.sanitizedString(util.getField('VARIABLE'));\r\n    const scope = util.getVariableScope('VARIABLE');\r\n    util.writeLn(`${scope}.showVariable(${VARIABLE}, false);`);\r\n  };\r\n  statementLibrary['data_insertatlist'] = function(util) {\r\n    const LIST = util.getListReference('LIST');\r\n    const INDEX = util.getInput('INDEX', 'any');\r\n    const ITEM = util.getInput('ITEM', 'any');\r\n    util.writeLn(`watchedInsertInList(${LIST}, ${INDEX}, ${ITEM});`);\r\n  };\r\n  statementLibrary['data_replaceitemoflist'] = function(util) {\r\n    const LIST = util.getListReference('LIST');\r\n    const ITEM = util.getInput('ITEM', 'any');\r\n    const INDEX = util.getInput('INDEX', 'any');\r\n    util.writeLn(`watchedSetLineOfList(${LIST}, ${INDEX}, ${ITEM});`);\r\n  };\r\n  statementLibrary['data_setvariableto'] = function(util) {\r\n    const VARIABLE = util.getVariableReference('VARIABLE');\r\n    const VALUE = util.getInput('VALUE', 'any');\r\n    util.writeLn(`${VARIABLE} = ${VALUE};`);\r\n  };\r\n  statementLibrary['data_showlist'] = function(util) {\r\n    const LIST = util.sanitizedString(util.getField('LIST'));\r\n    const scope = util.getListScope('LIST');\r\n    util.writeLn(`${scope}.showList(${LIST}, true);`);\r\n  };\r\n  statementLibrary['data_showvariable'] = function(util) {\r\n    const VARIABLE = util.sanitizedString(util.getField('VARIABLE'));\r\n    const scope = util.getVariableScope('VARIABLE');\r\n    util.writeLn(`${scope}.showVariable(${VARIABLE}, true);`);\r\n  };\r\n  statementLibrary['motion_turnright'] = function(util) {\r\n    const DEGREES = util.getInput('DEGREES', 'number');\r\n    util.writeLn(`S.setDirection(S.direction + ${DEGREES});`);\r\n    util.visual('visible');\r\n  };\r\n  statementLibrary['looks_changeeffectby'] = function(util) {\r\n    const EFFECT = util.sanitizedString(util.getField('EFFECT')).toLowerCase();\r\n    const CHANGE = util.getInput('CHANGE', 'number');\r\n    util.writeLn(`S.changeFilter(${EFFECT}, ${CHANGE});`);\r\n    util.visual('visible');\r\n  };\r\n  statementLibrary['looks_changesizeby'] = function(util) {\r\n    const CHANGE = util.getInput('CHANGE', 'any');\r\n    util.writeLn(`var f = S.scale + ${CHANGE} / 100;`);\r\n    util.writeLn('S.scale = f < 0 ? 0 : f;');\r\n    util.visual('visible');\r\n  };\r\n  statementLibrary['looks_cleargraphiceffects'] = function(util) {\r\n    util.writeLn('S.resetFilters();');\r\n    util.visual('visible');\r\n  };\r\n  statementLibrary['looks_goforwardbackwardlayers'] = function(util) {\r\n    const FORWARD_BACKWARD = util.getField('FORWARD_BACKWARD');\r\n    const NUM = util.getInput('NUM', 'number');\r\n    util.writeLn('var i = self.children.indexOf(S);');\r\n    util.writeLn('if (i !== -1) {');\r\n    util.writeLn('  self.children.splice(i, 1);');\r\n    if (FORWARD_BACKWARD === 'forward') {\r\n      util.writeLn(`  self.children.splice(Math.min(self.children.length - 1, i + ${NUM}), 0, S);`);\r\n    } else {\r\n      util.writeLn(`  self.children.splice(Math.max(0, i - ${NUM}), 0, S);`);\r\n    }\r\n    util.writeLn('}');\r\n  };\r\n  statementLibrary['looks_gotofrontback'] = function(util) {\r\n    const FRONT_BACK = util.getField('FRONT_BACK');\r\n    util.writeLn('var i = self.children.indexOf(S);');\r\n    util.writeLn('if (i !== -1) self.children.splice(i, 1);');\r\n    if (FRONT_BACK === 'front') {\r\n      util.writeLn('self.children.push(S);');\r\n    } else {\r\n      util.writeLn('self.children.unshift(S);');\r\n    }\r\n  };\r\n  statementLibrary['looks_hide'] = function(util) {\r\n    util.visual('visible');\r\n    util.writeLn('S.visible = false;');\r\n    util.updateBubble();\r\n  };\r\n  statementLibrary['looks_nextbackdrop'] = function(util) {\r\n    util.writeLn('self.showNextCostume();');\r\n    util.visual('always');\r\n    util.writeLn('var threads = backdropChange();');\r\n    util.writeLn('if (threads.indexOf(BASE) !== -1) {return;}');\r\n  };\r\n  statementLibrary['looks_nextcostume'] = function(util) {\r\n    util.writeLn('S.showNextCostume();');\r\n    util.visual('visible');\r\n  };\r\n  statementLibrary['looks_say'] = function(util) {\r\n    const MESSAGE = util.getInput('MESSAGE', 'any');\r\n    util.writeLn(`S.say(${MESSAGE}, false);`);\r\n  };\r\n  statementLibrary['looks_sayforsecs'] = function(util) {\r\n    const MESSAGE = util.getInput('MESSAGE', 'any');\r\n    const SECS = util.getInput('SECS', 'number');\r\n    util.writeLn('save();');\r\n    util.writeLn(`R.id = S.say(${MESSAGE}, false);`);\r\n    util.writeLn('R.start = runtime.now();');\r\n    util.writeLn(`R.duration = ${SECS};`);\r\n    const label = util.addLabel();\r\n    util.writeLn('if (runtime.now() - R.start < R.duration * 1000) {');\r\n    util.forceQueue(label);\r\n    util.writeLn('}');\r\n    util.writeLn('if (S.sayId === R.id) {');\r\n    util.writeLn('  S.say(\"\");');\r\n    util.writeLn('}');\r\n    util.writeLn('restore();');\r\n    util.visual('visible');\r\n  };\r\n  statementLibrary['looks_seteffectto'] = function(util) {\r\n    const EFFECT = util.sanitizedString(util.getField('EFFECT')).toLowerCase();\r\n    const VALUE = util.getInput('VALUE', 'number');\r\n    util.writeLn(`S.setFilter(${EFFECT}, ${VALUE});`);\r\n    util.visual('visible');\r\n  };\r\n  statementLibrary['looks_setsizeto'] = function(util) {\r\n    const SIZE = util.getInput('SIZE', 'number');\r\n    util.writeLn(`S.scale = Math.max(0, ${SIZE} / 100);`)\r\n    util.visual('visible');\r\n  };\r\n  statementLibrary['looks_show'] = function(util) {\r\n    util.writeLn('S.visible = true;');\r\n    util.visual('always');\r\n    util.updateBubble();\r\n  };\r\n  statementLibrary['looks_switchbackdropto'] = function(util) {\r\n    const BACKDROP = util.getInput('BACKDROP', 'any');\r\n    util.writeLn(`self.setCostume(${BACKDROP});`);\r\n    util.visual('always');\r\n    util.writeLn('var threads = backdropChange();');\r\n    util.writeLn('if (threads.indexOf(BASE) !== -1) {return;}');\r\n  };\r\n  statementLibrary['looks_switchcostumeto'] = function(util) {\r\n    const COSTUME = util.getInput('COSTUME', 'any');\r\n    util.writeLn(`S.setCostume(${COSTUME});`);\r\n    util.visual('visible');\r\n  };\r\n  statementLibrary['looks_think'] = function(util) {\r\n    const MESSAGE = util.getInput('MESSAGE', 'any');\r\n    util.writeLn(`S.say(${MESSAGE}, true);`);\r\n    util.visual('visible');\r\n  };\r\n  statementLibrary['looks_thinkforsecs'] = function(util) {\r\n    const MESSAGE = util.getInput('MESSAGE', 'any');\r\n    const SECS = util.getInput('SECS', 'number');\r\n    util.writeLn('save();');\r\n    util.writeLn(`R.id = S.say(${MESSAGE}, true);`);\r\n    util.writeLn('R.start = runtime.now();');\r\n    util.writeLn(`R.duration = ${SECS};`);\r\n    const label = util.addLabel();\r\n    util.writeLn('if (runtime.now() - R.start < R.duration * 1000) {');\r\n    util.forceQueue(label);\r\n    util.writeLn('}');\r\n    util.writeLn('if (S.sayId === R.id) {');\r\n    util.writeLn('  S.say(\"\");');\r\n    util.writeLn('}');\r\n    util.writeLn('restore();');\r\n    util.visual('visible');\r\n  };\r\n  statementLibrary['motion_changexby'] = function(util) {\r\n    const DX = util.getInput('DX', 'number');\r\n    util.writeLn(`S.moveTo(S.scratchX + ${DX}, S.scratchY);`);\r\n    util.visual('drawing');\r\n  };\r\n  statementLibrary['motion_changeyby'] = function(util) {\r\n    const DY = util.getInput('DY', 'number');\r\n    util.writeLn(`S.moveTo(S.scratchX, S.scratchY + ${DY});`);\r\n    util.visual('drawing');\r\n  };\r\n  statementLibrary['motion_glidesecstoxy'] = function(util) {\r\n    const SECS = util.getInput('SECS', 'any');\r\n    const X = util.getInput('X', 'any');\r\n    const Y = util.getInput('Y', 'any');\r\n    util.visual('drawing');\r\n    util.writeLn('save();');\r\n    util.writeLn('R.start = runtime.now();');\r\n    util.writeLn(`R.duration = ${SECS};`);\r\n    util.writeLn('R.baseX = S.scratchX;');\r\n    util.writeLn('R.baseY = S.scratchY;');\r\n    util.writeLn(`R.deltaX = ${X} - S.scratchX;`);\r\n    util.writeLn(`R.deltaY = ${Y} - S.scratchY;`);\r\n    const label = util.addLabel();\r\n    util.writeLn('var f = (runtime.now() - R.start) / (R.duration * 1000);');\r\n    util.writeLn('if (f > 1 || isNaN(f)) f = 1;');\r\n    util.writeLn('S.moveTo(R.baseX + f * R.deltaX, R.baseY + f * R.deltaY);');\r\n    util.writeLn('if (f < 1) {');\r\n    util.forceQueue(label);\r\n    util.writeLn('}');\r\n    util.writeLn('restore();');\r\n  };\r\n  statementLibrary['motion_glideto'] = function(util) {\r\n    const SECS = util.getInput('SECS', 'any');\r\n    const TO = util.getInput('TO', 'any');\r\n    util.visual('drawing');\r\n    util.writeLn('save();');\r\n    util.writeLn('R.start = runtime.now();');\r\n    util.writeLn(`R.duration = ${SECS};`);\r\n    util.writeLn('R.baseX = S.scratchX;');\r\n    util.writeLn('R.baseY = S.scratchY;');\r\n    util.writeLn(`var to = self.getPosition(${TO});`);\r\n    util.writeLn('if (to) {');\r\n    util.writeLn('  R.deltaX = to.x - S.scratchX;');\r\n    util.writeLn('  R.deltaY = to.y - S.scratchY;');\r\n    const label = util.addLabel();\r\n    util.writeLn('  var f = (runtime.now() - R.start) / (R.duration * 1000);');\r\n    util.writeLn('  if (f > 1 || isNaN(f)) f = 1;');\r\n    util.writeLn('  S.moveTo(R.baseX + f * R.deltaX, R.baseY + f * R.deltaY);');\r\n    util.writeLn('  if (f < 1) {');\r\n    util.forceQueue(label);\r\n    util.writeLn('  }');\r\n    util.writeLn('  restore();');\r\n    util.writeLn('}');\r\n  };\r\n  statementLibrary['motion_goto'] = function(util) {\r\n    const TO = util.getInput('TO', 'any');\r\n    util.writeLn(`S.gotoObject(${TO});`);\r\n    util.visual('drawing');\r\n  };\r\n  statementLibrary['motion_gotoxy'] = function(util) {\r\n    const X = util.getInput('X', 'number');\r\n    const Y = util.getInput('Y', 'number');\r\n    util.writeLn(`S.moveTo(${X}, ${Y});`);\r\n    util.visual('drawing');\r\n  };\r\n  statementLibrary['motion_ifonedgebounce'] = function(util) {\r\n    // TODO: set visual if bounced\r\n    util.writeLn('S.bounceOffEdge();');\r\n  };\r\n  statementLibrary['motion_movesteps'] = function(util) {\r\n    const STEPS = util.getInput('STEPS', 'number');\r\n    util.writeLn(`S.forward(${STEPS});`);\r\n    util.visual('drawing');\r\n  };\r\n  statementLibrary['motion_pointindirection'] = function(util) {\r\n    const DIRECTION = util.getInput('DIRECTION', 'number');\r\n    util.visual('visible');\r\n    util.writeLn(`S.setDirection(${DIRECTION});`);\r\n  };\r\n  statementLibrary['motion_pointtowards'] = function(util) {\r\n    const TOWARDS = util.getInput('TOWARDS', 'any');\r\n    util.writeLn(`S.pointTowards(${TOWARDS});`);\r\n    util.visual('visible');\r\n  };\r\n  statementLibrary['motion_setrotationstyle'] = function(util) {\r\n    const STYLE = P.utils.parseRotationStyle(util.getField('STYLE'));\r\n    util.writeLn(`S.rotationStyle = ${STYLE};`);\r\n    util.visual('visible');\r\n  };\r\n  statementLibrary['motion_setx'] = function(util) {\r\n    const X = util.getInput('X', 'number');\r\n    util.writeLn(`S.moveTo(${X}, S.scratchY);`);\r\n    util.visual('drawing');\r\n  };\r\n  statementLibrary['motion_sety'] = function(util) {\r\n    const Y = util.getInput('Y', 'number');\r\n    util.writeLn(`S.moveTo(S.scratchX, ${Y});`);\r\n    util.visual('drawing');\r\n  };\r\n  statementLibrary['motion_turnleft'] = function(util) {\r\n    const DEGREES = util.getInput('DEGREES', 'number');\r\n    util.writeLn(`S.setDirection(S.direction - ${DEGREES});`);\r\n    util.visual('visible');\r\n  };\r\n  statementLibrary['music_changeTempo'] = function(util) {\r\n    const TEMPO = util.getInput('TEMPO', 'number');\r\n    util.writeLn(`self.tempoBPM += ${TEMPO};`)\r\n  };\r\n  statementLibrary['music_setTempo'] = function(util) {\r\n    const TEMPO = util.getInput('TEMPO', 'number');\r\n    util.writeLn(`self.tempoBPM = ${TEMPO};`)\r\n  };\r\n  statementLibrary['sound_changeeffectby'] = function(util) {\r\n    const EFFECT = util.sanitizedString(util.getField('EFFECT'));\r\n    const VALUE = util.getInput('VALUE', 'number');\r\n    util.writeLn(`S.changeSoundFilter(${EFFECT}, ${VALUE});`);\r\n  };\r\n  statementLibrary['sound_changevolumeby'] = function(util) {\r\n    const VOLUME = util.getInput('VOLUME', 'number');\r\n    util.writeLn(`S.volume = Math.max(0, Math.min(1, S.volume + ${VOLUME} / 100));`);\r\n    util.writeLn('if (S.node) S.node.gain.value = S.volume;');\r\n  };\r\n  statementLibrary['sound_cleareffects'] = function(util) {\r\n    util.writeLn('S.resetSoundFilters();');\r\n  };\r\n  statementLibrary['sound_play'] = function(util) {\r\n    const SOUND_MENU = util.getInput('SOUND_MENU', 'any');\r\n    if (P.audio.context) {\r\n      util.writeLn(`var sound = S.getSound(${SOUND_MENU});`);\r\n      util.writeLn('if (sound) startSound(sound);');\r\n    }\r\n  };\r\n  statementLibrary['sound_playuntildone'] = function(util) {\r\n    const SOUND_MENU = util.getInput('SOUND_MENU', 'any');\r\n    if (P.audio.context) {\r\n      util.writeLn(`var sound = S.getSound(${SOUND_MENU});`);\r\n      util.writeLn('if (sound) {');\r\n      util.writeLn('  save();');\r\n      util.writeLn('  R.sound = playSound(sound);');\r\n      util.writeLn('  S.activeSounds.add(R.sound);')\r\n      util.writeLn('  R.start = runtime.now();');\r\n      util.writeLn('  R.duration = sound.duration;');\r\n      util.writeLn('  var first = true;');\r\n      const label = util.addLabel();\r\n      util.writeLn('  if ((runtime.now() - R.start < R.duration * 1000 || first) && !R.sound.stopped) {');\r\n      util.writeLn('    var first;');\r\n      util.forceQueue(label);\r\n      util.writeLn('  }');\r\n      util.writeLn('  S.activeSounds.delete(R.sound);');\r\n      util.writeLn('  restore();');\r\n      util.writeLn('}');\r\n    }\r\n  };\r\n  statementLibrary['sound_seteffectto'] = function(util) {\r\n    const EFFECT = util.sanitizedString(util.getField('EFFECT'));\r\n    const VALUE = util.getInput('VALUE', 'number');\r\n    util.writeLn(`S.setSoundFilter(${EFFECT}, ${VALUE});`);\r\n  };\r\n  statementLibrary['sound_setvolumeto'] = function(util) {\r\n    const VOLUME = util.getInput('VOLUME', 'number');\r\n    util.writeLn(`S.volume = Math.max(0, Math.min(1, ${VOLUME} / 100));`);\r\n    util.writeLn('if (S.node) S.node.gain.value = S.volume;');\r\n  };\r\n  statementLibrary['sound_stopallsounds'] = function(util) {\r\n    if (P.audio.context) {\r\n      util.writeLn('self.stopAllSounds();');\r\n    }\r\n  };\r\n  statementLibrary['event_broadcast'] = function(util) {\r\n    const BROADCAST_INPUT = util.getInput('BROADCAST_INPUT', 'any');\r\n    util.writeLn(`var threads = broadcast(${BROADCAST_INPUT});`);\r\n    util.writeLn('if (threads.indexOf(BASE) !== -1) {return;}');\r\n  };\r\n  statementLibrary['event_broadcastandwait'] = function(util) {\r\n    const BROADCAST_INPUT = util.getInput('BROADCAST_INPUT', 'any');\r\n    util.writeLn('save();');\r\n    util.writeLn(`R.threads = broadcast(${BROADCAST_INPUT});`);\r\n    util.writeLn('if (R.threads.indexOf(BASE) !== -1) {return;}');\r\n    const label = util.addLabel();\r\n    util.writeLn('if (running(R.threads)) {');\r\n    util.forceQueue(label);\r\n    util.writeLn('}');\r\n    util.writeLn('restore();');\r\n  };\r\n  statementLibrary['pen_changePenColorParamBy'] = function(util) {\r\n    const COLOR_PARAM = util.getInput('COLOR_PARAM', 'string');\r\n    const VALUE = util.getInput('VALUE', 'number');\r\n    util.writeLn(`S.penColor.changeParam(${COLOR_PARAM}, ${VALUE});`);\r\n  };\r\n  statementLibrary['pen_changePenHueBy'] = function(util) {\r\n    // This is an old pen hue block, which functions differently from the new one.\r\n    const HUE = util.getInput('HUE', 'number');\r\n    util.writeLn('S.penColor.toHSLA();');\r\n    util.writeLn(`S.penColor.x += ${HUE} * 360 / 200;`);\r\n    util.writeLn('S.penColor.y = 100;');\r\n  };\r\n  statementLibrary['pen_changePenShadeBy'] = function(util) {\r\n    const SHADE = util.getInput('SHADE', 'number');\r\n    util.writeLn('S.penColor.toHSLA();');\r\n    util.writeLn(`S.penColor.z = (S.penColor.z + ${SHADE}) % 200;`);\r\n    util.writeLn('if (S.penColor.z < 0) S.penColor.z += 200;');\r\n    util.writeLn('S.penColor.y = 100;');\r\n  };\r\n  statementLibrary['pen_changePenSizeBy'] = function(util) {\r\n    const SIZE = util.getInput('SIZE', 'number');\r\n    util.writeLn(`S.penSize = Math.max(1, S.penSize + ${SIZE});`);\r\n  };\r\n  statementLibrary['pen_clear'] = function(util) {\r\n    util.writeLn('self.clearPen();');\r\n    util.visual('always');\r\n  };\r\n  statementLibrary['pen_penDown'] = function(util) {\r\n    util.writeLn('S.isPenDown = true;');\r\n    util.writeLn('S.dotPen();');\r\n    util.visual('always');\r\n  };\r\n  statementLibrary['pen_penUp'] = function(util) {\r\n    // TODO: determine visual variant\r\n    // definitely not 'always' or 'visible', might be a 'if (S.isPenDown)'\r\n    util.writeLn('S.isPenDown = false;');\r\n  };\r\n  statementLibrary['pen_setPenColorParamTo'] = function(util) {\r\n    const COLOR_PARAM = util.getInput('COLOR_PARAM', 'string');\r\n    const VALUE = util.getInput('VALUE', 'number');\r\n    util.writeLn(`S.penColor.setParam(${COLOR_PARAM}, ${VALUE});`);\r\n  };\r\n  statementLibrary['pen_setPenColorToColor'] = function(util) {\r\n    const COLOR = util.getInput('COLOR', 'any');\r\n    util.writeLn(`S.setPenColor(${COLOR});`);\r\n  };\r\n  statementLibrary['pen_setPenHueToNumber'] = function(util) {\r\n    // This is an old pen hue block, which functions differently from the new one.\r\n    const HUE = util.getInput('HUE', 'number');\r\n    util.writeLn('S.penColor.toHSLA();');\r\n    util.writeLn(`S.penColor.x = ${HUE} * 360 / 200;`);\r\n    util.writeLn('S.penColor.y = 100;');\r\n  };\r\n  statementLibrary['pen_setPenShadeToNumber'] = function(util) {\r\n    const SHADE = util.getInput('SHADE', 'number');\r\n    util.writeLn('S.penColor.toHSLA();');\r\n    util.writeLn(`S.penColor.z = ${SHADE} % 200;`);\r\n    util.writeLn('if (S.penColor.z < 0) S.penColor.z += 200;');\r\n    util.writeLn('S.penColor.y = 100;');\r\n  };\r\n  statementLibrary['pen_setPenSizeTo'] = function(util) {\r\n    const SIZE = util.getInput('SIZE', 'number');\r\n    util.writeLn(`S.penSize = Math.max(1, ${SIZE});`);\r\n  };\r\n  statementLibrary['pen_stamp'] = function(util) {\r\n    util.writeLn('S.stamp();');\r\n    util.visual('always');\r\n  };\r\n  statementLibrary['procedures_call'] = function(util) {\r\n    const mutation = util.block.mutation;\r\n    const name = mutation.proccode;\r\n\r\n    if (P.config.debug && name === 'forkphorus:debugger;') {\r\n      util.writeLn('/* forkphorus debugger */ debugger;');\r\n      return;\r\n    }\r\n\r\n    const label = util.claimNextLabel();\r\n    util.write(`call(S.procedures[${util.sanitizedString(name)}], ${label}, [`);\r\n\r\n    // The mutation has a stringified JSON list of input IDs... it's weird.\r\n    const inputNames = JSON.parse(mutation.argumentids);\r\n    for (const inputName of inputNames) {\r\n      util.write(`${util.getInput(inputName, 'any')}, `);\r\n    }\r\n\r\n    util.writeLn(']); return;');\r\n    util.addLabel(label);\r\n  };\r\n  statementLibrary['sensing_askandwait'] = function(util) {\r\n    const QUESTION = util.getInput('QUESTION', 'string');\r\n\r\n    util.writeLn('R.id = self.nextPromptId++;');\r\n    const label1 = util.addLabel();\r\n    util.writeLn('if (self.promptId < R.id) {');\r\n    util.forceQueue(label1);\r\n    util.writeLn('}');\r\n\r\n    util.writeLn(`S.ask(${QUESTION});`);\r\n    const label2 = util.addLabel();\r\n    util.writeLn('if (self.promptId === R.id) {')\r\n    util.forceQueue(label2);\r\n    util.writeLn('}');\r\n    util.writeLn('S.say(\"\");');\r\n\r\n    util.visual('always');\r\n  };\r\n  statementLibrary['sensing_resettimer'] = function(util) {\r\n    util.writeLn('runtime.timerStart = runtime.now();');\r\n  };\r\n  statementLibrary['sensing_setdragmode'] = function(util) {\r\n    const DRAG_MODE = util.getField('DRAG_MODE');\r\n    if (DRAG_MODE === 'draggable') {\r\n      util.writeLn('S.isDraggable = true;');\r\n    } else {\r\n      util.writeLn('S.isDraggable = false;');\r\n    }\r\n  };\r\n  statementLibrary['speech2text_listenAndWait'] = function(util) {\r\n    util.stage.initSpeech2Text();\r\n    util.writeLn('if (self.speech2text) {');\r\n    util.writeLn('  save();');\r\n    util.writeLn('  self.speech2text.startListen();');\r\n    util.writeLn('  R.id = self.speech2text.id();');\r\n    const label = util.addLabel();\r\n    util.writeLn('  if (self.speech2text.id() === R.id) {')\r\n    util.forceQueue(label);\r\n    util.writeLn('  }');\r\n    util.writeLn('  self.speech2text.endListen();');\r\n    util.writeLn('  restore();');\r\n    util.writeLn('}');\r\n  };\r\n  statementLibrary['videoSensing_videoToggle'] = function(util) {\r\n    const VIDEO_STATE = util.getInput('VIDEO_STATE', 'string');\r\n    util.writeLn(`switch (${VIDEO_STATE}) {`);\r\n    util.writeLn('  case \"off\": self.showVideo(false); break;');\r\n    util.writeLn('  case \"on\": self.showVideo(true); break;');\r\n    util.writeLn('}');\r\n  };\r\n\r\n  // Legacy no-ops\r\n  // https://github.com/LLK/scratch-vm/blob/bb42c0019c60f5d1947f3432038aa036a0fddca6/src/blocks/scratch3_motion.js#L19\r\n  // https://github.com/LLK/scratch-vm/blob/bb42c0019c60f5d1947f3432038aa036a0fddca6/src/blocks/scratch3_looks.js#L248\r\n  const noopStatement = (util: P.sb3.compiler.StatementUtil) => util.writeLn('/* noop */');\r\n  statementLibrary['motion_align_scene'] = noopStatement;\r\n  statementLibrary['motion_scroll_right'] = noopStatement;\r\n  statementLibrary['motion_scroll_up'] = noopStatement;\r\n  statementLibrary['looks_changestretchby'] = noopStatement;\r\n  statementLibrary['looks_hideallsprites'] = noopStatement;\r\n  statementLibrary['looks_setstretchto'] = noopStatement;\r\n\r\n  /* Inputs */\r\n  inputLibrary['argument_reporter_boolean'] = function(util) {\r\n    const VALUE = util.sanitizedString(util.getField('VALUE'));\r\n    return util.booleanInput(util.asType(`C.args[${VALUE}]`, 'boolean'));\r\n  };\r\n  inputLibrary['argument_reporter_string_number'] = function(util) {\r\n    const VALUE = util.sanitizedString(util.getField('VALUE'));\r\n    return util.anyInput(`C.args[${VALUE}]`);\r\n  };\r\n  inputLibrary['control_create_clone_of_menu'] = function(util) {\r\n    return util.fieldInput('CLONE_OPTION');\r\n  };\r\n  inputLibrary['control_get_counter'] = function(util) {\r\n    return util.numberInput('self.counter');\r\n  };\r\n  inputLibrary['data_itemoflist'] = function(util) {\r\n    const LIST = util.getListReference('LIST');\r\n    const INDEX = util.getInput('INDEX', 'any');\r\n    return util.anyInput(`getLineOfList(${LIST}, ${INDEX})`);\r\n  };\r\n  inputLibrary['data_itemnumoflist'] = function(util) {\r\n    const LIST = util.getListReference('LIST');\r\n    const ITEM = util.getInput('ITEM', 'any');\r\n    return util.numberInput(`listIndexOf(${LIST}, ${ITEM})`);\r\n  };\r\n  inputLibrary['data_lengthoflist'] = function(util) {\r\n    const LIST = util.getListReference('LIST');\r\n    return util.numberInput(`${LIST}.length`);\r\n  };\r\n  inputLibrary['data_listcontainsitem'] = function(util) {\r\n    const LIST = util.getListReference('LIST');\r\n    const ITEM = util.getInput('ITEM', 'any');\r\n    return util.booleanInput(`listContains(${LIST}, ${ITEM})`);\r\n  };\r\n  inputLibrary['looks_backdropnumbername'] = function(util) {\r\n    const NUMBER_NAME = util.getField('NUMBER_NAME');\r\n    if (NUMBER_NAME === 'number') {\r\n      return util.numberInput('(self.currentCostumeIndex + 1)');\r\n    } else {\r\n      return util.stringInput('self.costumes[self.currentCostumeIndex].name');\r\n    }\r\n  };\r\n  inputLibrary['looks_backdrops'] = function(util) {\r\n    return util.fieldInput('BACKDROP');\r\n  };\r\n  inputLibrary['looks_costume'] = function(util) {\r\n    return util.fieldInput('COSTUME');\r\n  };\r\n  inputLibrary['looks_costumenumbername'] = function(util) {\r\n    const NUMBER_NAME = util.getField('NUMBER_NAME');\r\n    if (NUMBER_NAME === 'number') {\r\n      return util.numberInput('(S.currentCostumeIndex + 1)');\r\n    } else {\r\n      return util.stringInput('S.costumes[S.currentCostumeIndex].name');\r\n    }\r\n  };\r\n  inputLibrary['looks_size'] = function(util) {\r\n    return util.numberInput('(S.scale * 100)');\r\n  };\r\n  inputLibrary['makeymakey_menu_KEY'] = function(util) {\r\n    return util.fieldInput('KEY');\r\n  };\r\n  inputLibrary['makeymakey_menu_SEQUENCE'] = function(util) {\r\n    return util.fieldInput('SEQUENCE');\r\n  };\r\n  inputLibrary['matrix'] = function(util) {\r\n    return util.fieldInput('MATRIX');\r\n  };\r\n  inputLibrary['motion_direction'] = function(util) {\r\n    return util.numberInput('S.direction');\r\n  };\r\n  inputLibrary['motion_glideto_menu'] = function(util) {\r\n    return util.fieldInput('TO');\r\n  };\r\n  inputLibrary['motion_goto_menu'] = function(util) {\r\n    return util.fieldInput('TO');\r\n  };\r\n  inputLibrary['motion_pointtowards_menu'] = function(util) {\r\n    return util.fieldInput('TOWARDS');\r\n  };\r\n  inputLibrary['motion_xposition'] = function(util) {\r\n    return util.numberInput('S.scratchX');\r\n  };\r\n  inputLibrary['motion_yposition'] = function(util) {\r\n    return util.numberInput('S.scratchY');\r\n  };\r\n  inputLibrary['music_getTempo'] = function(util) {\r\n    return util.numberInput('self.tempoBPM');\r\n  };\r\n  inputLibrary['operator_add'] = function(util) {\r\n    const NUM1 = util.getInput('NUM1', 'number');\r\n    const NUM2 = util.getInput('NUM2', 'number');\r\n    return util.numberInput(`(${NUM1} + ${NUM2} || 0)`);\r\n  };\r\n  inputLibrary['operator_and'] = function(util) {\r\n    const OPERAND1 = util.getInput('OPERAND1', 'any');\r\n    const OPERAND2 = util.getInput('OPERAND2', 'any');\r\n    return util.booleanInput(`(${OPERAND1} && ${OPERAND2})`);\r\n  };\r\n  inputLibrary['operator_contains'] = function(util) {\r\n    const STRING1 = util.getInput('STRING1', 'string');\r\n    const STRING2 = util.getInput('STRING2', 'string');\r\n    return util.booleanInput(`stringContains(${STRING1}, ${STRING2})`);\r\n  };\r\n  inputLibrary['operator_divide'] = function(util) {\r\n    const NUM1 = util.getInput('NUM1', 'number');\r\n    const NUM2 = util.getInput('NUM2', 'number');\r\n    return util.numberInput(`(${NUM1} / ${NUM2} || 0)`);\r\n  };\r\n  inputLibrary['operator_equals'] = function(util) {\r\n    const OPERAND1 = util.getInput('OPERAND1', 'any');\r\n    const OPERAND2 = util.getInput('OPERAND2', 'any');\r\n    // If we know at compile-time that either input cannot be a number, we will use the faster strEqual\r\n    if (!OPERAND1.potentialNumber || !OPERAND2.potentialNumber) {\r\n      return util.booleanInput(`strEqual(${OPERAND1}, ${OPERAND2})`);\r\n    }\r\n    if (P.config.experimentalOptimizations) {\r\n      // If we know at compile-time that an input is going to be a number, we will use the faster numEqual method.\r\n      // The first argument to numEqual must be a number, the other will be converted if necessary.\r\n      if (OPERAND1.type === 'number') {\r\n        return util.booleanInput(`numEqual(${OPERAND1}, ${OPERAND2})`);\r\n      }\r\n      if (OPERAND2.type === 'number') {\r\n        return util.booleanInput(`numEqual(${OPERAND2}, ${OPERAND1})`);\r\n      }\r\n    }\r\n    return util.booleanInput(`equal(${OPERAND1}, ${OPERAND2})`);\r\n  };\r\n  inputLibrary['operator_gt'] = function(util) {\r\n    const OPERAND1 = util.getInput('OPERAND1', 'any');\r\n    const OPERAND2 = util.getInput('OPERAND2', 'any');\r\n    // TODO: use numGreater?\r\n    return util.booleanInput(`(compare(${OPERAND1}, ${OPERAND2}) === 1)`);\r\n  };\r\n  inputLibrary['operator_join'] = function(util) {\r\n    const STRING1 = util.getInput('STRING1', 'string');\r\n    const STRING2 = util.getInput('STRING2', 'string');\r\n    return util.stringInput(`(${STRING1} + ${STRING2})`)\r\n  };\r\n  inputLibrary['operator_length'] = function(util) {\r\n    const STRING = util.getInput('STRING', 'string');\r\n    // TODO: parenthesis important?\r\n    return util.numberInput(`(${STRING}).length`);\r\n  };\r\n  inputLibrary['operator_letter_of'] = function(util) {\r\n    const STRING = util.getInput('STRING', 'string');\r\n    const LETTER = util.getInput('LETTER', 'number');\r\n    return util.stringInput(`((${STRING})[(${LETTER} | 0) - 1] || \"\")`);\r\n  };\r\n  inputLibrary['operator_lt'] = function(util) {\r\n    const OPERAND1 = util.getInput('OPERAND1', 'any');\r\n    const OPERAND2 = util.getInput('OPERAND2', 'any');\r\n    // TODO: use numLess?\r\n    return util.booleanInput(`(compare(${OPERAND1}, ${OPERAND2}) === -1)`);\r\n  };\r\n  inputLibrary['operator_mathop'] = function(util) {\r\n    const OPERATOR = util.getField('OPERATOR');\r\n    const NUM = util.getInput('NUM', 'number');\r\n\r\n    switch (OPERATOR) {\r\n      case 'abs':\r\n        return util.numberInput(`Math.abs(${NUM})`);\r\n      case 'floor':\r\n        return util.numberInput(`Math.floor(${NUM})`);\r\n      case 'sqrt':\r\n        return util.numberInput(`Math.sqrt(${NUM})`);\r\n      case 'ceiling':\r\n        return util.numberInput(`Math.ceil(${NUM})`);\r\n      case 'cos':\r\n        return util.numberInput(`(Math.round(Math.cos(${NUM} * Math.PI / 180) * 1e10) / 1e10)`);\r\n      case 'sin':\r\n        return util.numberInput(`(Math.round(Math.sin(${NUM} * Math.PI / 180) * 1e10) / 1e10)`);\r\n      case 'tan':\r\n        return util.numberInput(`Math.tan(${NUM} * Math.PI / 180)`);\r\n      case 'asin':\r\n        return util.numberInput(`(Math.asin(${NUM}) * 180 / Math.PI)`)\r\n      case 'acos':\r\n        return util.numberInput(`(Math.acos(${NUM}) * 180 / Math.PI)`)\r\n      case 'atan':\r\n        return util.numberInput(`(Math.atan(${NUM}) * 180 / Math.PI)`)\r\n      case 'ln':\r\n        return util.numberInput(`Math.log(${NUM})`);\r\n      case 'log':\r\n        return util.numberInput(`(Math.log(${NUM}) / Math.LN10)`);\r\n      case 'e ^':\r\n        return util.numberInput(`Math.exp(${NUM})`);\r\n      case '10 ^':\r\n        return util.numberInput(`Math.pow(10, ${NUM})`);\r\n      default:\r\n        return util.numberInput('0');\r\n    }\r\n  };\r\n  inputLibrary['operator_mod'] = function(util) {\r\n    const NUM1 = util.getInput('NUM1', 'number');\r\n    const NUM2 = util.getInput('NUM2', 'number');\r\n    return util.numberInput(`mod(${NUM1}, ${NUM2})`);\r\n  };\r\n  inputLibrary['operator_multiply'] = function(util) {\r\n    const NUM1 = util.getInput('NUM1', 'number');\r\n    const NUM2 = util.getInput('NUM2', 'number');\r\n    return util.numberInput(`(${NUM1} * ${NUM2} || 0)`);\r\n  };\r\n  inputLibrary['operator_not'] = function(util) {\r\n    const OPERAND = util.getInput('OPERAND', 'any');\r\n    return util.booleanInput(`!${OPERAND}`);\r\n  };\r\n  inputLibrary['operator_or'] = function(util) {\r\n    const OPERAND1 = util.getInput('OPERAND1', 'any');\r\n    const OPERAND2 = util.getInput('OPERAND2', 'any');\r\n    return util.booleanInput(`(${OPERAND1} || ${OPERAND2})`);\r\n  };\r\n  inputLibrary['operator_random'] = function(util) {\r\n    const FROM = util.getInput('FROM', 'string');\r\n    const TO = util.getInput('TO', 'string');\r\n    return util.numberInput(`random(${FROM}, ${TO})`);\r\n  };\r\n  inputLibrary['operator_round'] = function(util) {\r\n    const NUM = util.getInput('NUM', 'number');\r\n    return util.numberInput(`Math.round(${NUM})`);\r\n  };\r\n  inputLibrary['operator_subtract'] = function(util) {\r\n    const NUM1 = util.getInput('NUM1', 'number');\r\n    const NUM2 = util.getInput('NUM2', 'number');\r\n    return util.numberInput(`(${NUM1} - ${NUM2} || 0)`);\r\n  };\r\n  inputLibrary['pen_menu_colorParam'] = function(util) {\r\n    return util.fieldInput('colorParam');\r\n  };\r\n  inputLibrary['sensing_answer'] = function(util) {\r\n    return util.stringInput('self.answer');\r\n  };\r\n  inputLibrary['sensing_coloristouchingcolor'] = function(util) {\r\n    const COLOR = util.getInput('COLOR', 'any');\r\n    const COLOR2 = util.getInput('COLOR2', 'any');\r\n    return util.booleanInput(`S.colorTouchingColor(${COLOR}, ${COLOR2})`);\r\n  };\r\n  inputLibrary['sensing_current'] = function(util) {\r\n    const CURRENTMENU = util.getField('CURRENTMENU').toLowerCase();\r\n    switch (CURRENTMENU) {\r\n      case 'year': return util.numberInput('new Date().getFullYear()');\r\n      case 'month': return util.numberInput('(new Date().getMonth() + 1)');\r\n      case 'date': return util.numberInput('new Date().getDate()');\r\n      case 'dayofweek': return util.numberInput('(new Date().getDay() + 1)');\r\n      case 'hour': return util.numberInput('new Date().getHours()');\r\n      case 'minute': return util.numberInput('new Date().getMinutes()');\r\n      case 'second': return util.numberInput('new Date().getSeconds()');\r\n    }\r\n    return util.numberInput('0');\r\n  };\r\n  inputLibrary['sensing_dayssince2000'] = function(util) {\r\n    return util.numberInput('((Date.now() - epoch) / 86400000)');\r\n  };\r\n  inputLibrary['sensing_distanceto'] = function(util) {\r\n    const DISTANCETOMENU = util.getInput('DISTANCETOMENU', 'any');\r\n    return util.numberInput(`S.distanceTo(${DISTANCETOMENU})`);\r\n  };\r\n  inputLibrary['sensing_distancetomenu'] = function(util) {\r\n    return util.fieldInput('DISTANCETOMENU');\r\n  };\r\n  inputLibrary['sensing_keyoptions'] = function(util) {\r\n    return util.fieldInput('KEY_OPTION');\r\n  };\r\n  inputLibrary['sensing_keypressed'] = function(util) {\r\n    const KEY_OPTION = util.getInput('KEY_OPTION', 'string');\r\n    // note: sb2 compiler can optimize out getKeyCode calls, but sb3 compiler can't because KEY_OPTION might be dynamic\r\n    return util.booleanInput(`!!self.keys[P.runtime.getKeyCode(${KEY_OPTION})]`);\r\n  };\r\n  inputLibrary['sensing_loud'] = function(util) {\r\n    util.stage.initLoudness();\r\n    return util.booleanInput('(self.microphone.getLoudness() > 10)');\r\n  };\r\n  inputLibrary['sensing_loudness'] = function(util) {\r\n    util.stage.initLoudness();\r\n    return util.numberInput('self.microphone.getLoudness()');\r\n  };\r\n  inputLibrary['sensing_mousedown'] = function(util) {\r\n    return util.booleanInput('self.mousePressed');\r\n  };\r\n  inputLibrary['sensing_mousex'] = function(util) {\r\n    return util.numberInput('self.mouseX');\r\n  };\r\n  inputLibrary['sensing_mousey'] = function(util) {\r\n    return util.numberInput('self.mouseY');\r\n  };\r\n  inputLibrary['sensing_of'] = function(util) {\r\n    const PROPERTY = util.sanitizedString(util.getField('PROPERTY'));\r\n    const OBJECT = util.getInput('OBJECT', 'string');\r\n    return util.anyInput(`attribute(${PROPERTY}, ${OBJECT})`);\r\n  };\r\n  inputLibrary['sensing_of_object_menu'] = function(util) {\r\n    return util.fieldInput('OBJECT');\r\n  };\r\n  inputLibrary['sensing_timer'] = function(util) {\r\n    return util.numberInput('((runtime.now() - runtime.timerStart) / 1000)');\r\n  };\r\n  inputLibrary['sensing_touchingcolor'] = function(util) {\r\n    const COLOR = util.getInput('COLOR', 'any');\r\n    return util.booleanInput(`S.touchingColor(${COLOR})`);\r\n  };\r\n  inputLibrary['sensing_touchingobject'] = function(util) {\r\n    const TOUCHINGOBJECTMENU = util.getInput('TOUCHINGOBJECTMENU', 'string');\r\n    return util.booleanInput(`S.touching(${TOUCHINGOBJECTMENU})`);\r\n  };\r\n  inputLibrary['sensing_touchingobjectmenu'] = function(util) {\r\n    return util.fieldInput('TOUCHINGOBJECTMENU');\r\n  };\r\n  inputLibrary['sound_sounds_menu'] = function(util) {\r\n    return util.fieldInput('SOUND_MENU');\r\n  };\r\n  inputLibrary['sensing_username'] = function(util) {\r\n    return util.stringInput('self.username');\r\n  };\r\n  inputLibrary['sound_volume'] = function(util) {\r\n    return util.numberInput('(S.volume * 100)');\r\n  };\r\n  inputLibrary['speech2text_getSpeech'] = function(util) {\r\n    util.stage.initSpeech2Text();\r\n    return util.stringInput('(self.speech2text ? self.speech2text.speech : \"\")');\r\n  };\r\n  inputLibrary['videoSensing_menu_VIDEO_STATE'] = function(util) {\r\n    return util.fieldInput('VIDEO_STATE');\r\n  };\r\n\r\n  // Legacy no-ops\r\n  // https://github.com/LLK/scratch-vm/blob/bb42c0019c60f5d1947f3432038aa036a0fddca6/src/blocks/scratch3_sensing.js#L74\r\n  // https://github.com/LLK/scratch-vm/blob/bb42c0019c60f5d1947f3432038aa036a0fddca6/src/blocks/scratch3_motion.js#L42-L43\r\n  const noopInput = (util: P.sb3.compiler.InputUtil) => util.anyInput('undefined');\r\n  inputLibrary['motion_yscroll'] = noopInput;\r\n  inputLibrary['motion_xscroll'] = noopInput;\r\n  inputLibrary['sensing_userid'] = noopInput;\r\n\r\n  /* Hats */\r\n  hatLibrary['control_start_as_clone'] = {\r\n    handle(util) {\r\n      util.target.listeners.whenCloned.push(util.startingFunction);\r\n    },\r\n  };\r\n  hatLibrary['event_whenbackdropswitchesto'] = {\r\n    handle(util) {\r\n      const BACKDROP = util.getField('BACKDROP');\r\n      if (!util.target.listeners.whenBackdropChanges[BACKDROP]) {\r\n        util.target.listeners.whenBackdropChanges[BACKDROP] = [];\r\n      }\r\n      util.target.listeners.whenBackdropChanges[BACKDROP].push(util.startingFunction);\r\n    },\r\n  };\r\n  hatLibrary['event_whenbroadcastreceived'] = {\r\n    handle(util) {\r\n      const BROADCAST_OPTION = util.getField('BROADCAST_OPTION').toLowerCase();\r\n      if (!util.target.listeners.whenIReceive[BROADCAST_OPTION]) {\r\n        util.target.listeners.whenIReceive[BROADCAST_OPTION] = [];\r\n      }\r\n      util.target.listeners.whenIReceive[BROADCAST_OPTION].push(util.startingFunction);\r\n    },\r\n  };\r\n  hatLibrary['event_whenflagclicked'] = {\r\n    handle(util) {\r\n      util.target.listeners.whenGreenFlag.push(util.startingFunction);\r\n    },\r\n  };\r\n  hatLibrary['event_whenkeypressed'] = {\r\n    handle(util) {\r\n      const KEY_OPTION = util.getField('KEY_OPTION');\r\n      if (KEY_OPTION === 'any') {\r\n        for (var i = 128; i--;) {\r\n          util.target.listeners.whenKeyPressed[i].push(util.startingFunction);\r\n        }\r\n      } else {\r\n        util.target.listeners.whenKeyPressed[P.runtime.getKeyCode(KEY_OPTION)].push(util.startingFunction);\r\n      }\r\n    },\r\n  };\r\n  hatLibrary['event_whenstageclicked'] = {\r\n    handle(util) {\r\n      util.target.listeners.whenClicked.push(util.startingFunction);\r\n    },\r\n  };\r\n  hatLibrary['event_whenthisspriteclicked'] = {\r\n    handle(util) {\r\n      util.target.listeners.whenClicked.push(util.startingFunction);\r\n    },\r\n  };\r\n  hatLibrary['makeymakey_whenMakeyKeyPressed'] = {\r\n    handle(util) {\r\n      const KEY = util.getInput('KEY', 'string');\r\n      try {\r\n        const value = P.runtime.scopedEval(KEY.source);\r\n        var keycode = P.runtime.getKeyCode(value);\r\n      } catch (e) {\r\n        util.compiler.warn('makeymakey key generation error', e);\r\n        return;\r\n      }\r\n      if (keycode === 'any') {\r\n        for (var i = 128; i--;) {\r\n          util.target.listeners.whenKeyPressed[i].push(util.startingFunction);\r\n        }\r\n      } else {\r\n        util.target.listeners.whenKeyPressed[keycode].push(util.startingFunction);\r\n      }\r\n    },\r\n  };\r\n  hatLibrary['makeymakey_whenCodePressed'] = {\r\n    handle(util) {\r\n      const SEQUENCE = util.getInput('SEQUENCE', 'string');\r\n      try {\r\n        var sequence = P.runtime.scopedEval(SEQUENCE.source);\r\n      } catch (e) {\r\n        util.compiler.warn('makeymakey sequence generation error', e);\r\n        return;\r\n      }\r\n      const ARROWS = ['up', 'down', 'left', 'right'];\r\n      const keys = sequence.toLowerCase().split(' ')\r\n        .map((key) => {\r\n          if (ARROWS.indexOf(key) > -1) {\r\n            return P.runtime.getKeyCode(key + ' arrow');\r\n          } else {\r\n            return P.runtime.getKeyCode(key);\r\n          }\r\n        });\r\n      const targetFunction = util.startingFunction;\r\n      let sequenceIndex = 0;\r\n      for (let key = 128; key--;) {\r\n        util.target.listeners.whenKeyPressed[key].push(function() {\r\n          const expectedKey = keys[sequenceIndex];\r\n          if (key !== expectedKey) {\r\n            sequenceIndex = 0;\r\n          } else {\r\n            sequenceIndex++;\r\n            if (sequenceIndex === keys.length) {\r\n              sequenceIndex = 0;\r\n              targetFunction();\r\n            }\r\n          }\r\n        });\r\n      }\r\n    },\r\n  };\r\n  hatLibrary['procedures_definition'] = {\r\n    handle(util) {\r\n      // TODO: HatUtil helpers for this\r\n\r\n      const customBlockId = util.block.inputs.custom_block[1];\r\n      const mutation = util.compiler.blocks[customBlockId].mutation;\r\n\r\n      const proccode = mutation.proccode;\r\n      // Warp is either a boolean or a string representation of that boolean for some reason.\r\n      const warp = typeof mutation.warp === 'string' ? mutation.warp === 'true' : mutation.warp;\r\n      // It's a stringified JSON array.\r\n      const argumentNames = JSON.parse(mutation.argumentnames);\r\n\r\n      const procedure = new P.sb3.Scratch3Procedure(util.startingFunction, warp, argumentNames);\r\n      util.target.procedures[proccode] = procedure;\r\n    },\r\n    postcompile(compiler, source, hat) {\r\n      return source + 'endCall(); return;\\n';\r\n    },\r\n    precompile(compiler, hat) {\r\n      const customBlockId = hat.inputs.custom_block[1];\r\n      const mutation = compiler.blocks[customBlockId].mutation;\r\n      const warp = typeof mutation.warp === 'string' ? mutation.warp === 'true' : mutation.warp;\r\n      if (warp) {\r\n        compiler.state.isWarp = true;\r\n      }\r\n    },\r\n  };\r\n  hatLibrary['speech2text_whenIHearHat'] = {\r\n    handle(util) {\r\n      util.stage.initSpeech2Text();\r\n      if (util.stage.speech2text) {\r\n        const PHRASE = util.getInput('PHRASE', 'string');\r\n        const phraseFunction = `return ${PHRASE}`;\r\n        util.stage.speech2text.addHat({\r\n          target: util.target,\r\n          startingFunction: util.startingFunction,\r\n          phraseFunction: P.runtime.createContinuation(phraseFunction),\r\n        });\r\n      }\r\n    },\r\n  };\r\n\r\n  /* Watchers */\r\n  watcherLibrary['data_variable'] = {\r\n    init(watcher) {\r\n      const name = watcher.params.VARIABLE;\r\n      watcher.target.watchers[name] = watcher;\r\n    },\r\n    set(watcher, value) {\r\n      const name = watcher.params.VARIABLE;\r\n      watcher.target.vars[name] = value;\r\n    },\r\n    evaluate(watcher) {\r\n      const name = watcher.params.VARIABLE;\r\n      return watcher.target.vars[name];\r\n    },\r\n    getLabel(watcher) {\r\n      return watcher.params.VARIABLE;\r\n    },\r\n  };\r\n  watcherLibrary['looks_backdropnumbername'] = {\r\n    evaluate(watcher) {\r\n      const target = watcher.stage;\r\n      const param = watcher.params.NUMBER_NAME;\r\n      if (param === 'number') {\r\n        return target.currentCostumeIndex + 1;\r\n      } else {\r\n        return target.costumes[target.currentCostumeIndex].name;\r\n      }\r\n    },\r\n    getLabel(watcher) {\r\n      return 'backdrop ' + watcher.params.NUMBER_NAME;\r\n    },\r\n  };\r\n  watcherLibrary['looks_costumenumbername'] = {\r\n    evaluate(watcher) {\r\n      const target = watcher.target;\r\n      const param = watcher.params.NUMBER_NAME;\r\n      if (param === 'number') {\r\n        return target.currentCostumeIndex + 1;\r\n      } else {\r\n        return target.costumes[target.currentCostumeIndex].name;\r\n      }\r\n    },\r\n    getLabel(watcher) {\r\n      return 'costume ' + watcher.params.NUMBER_NAME;\r\n    },\r\n  };\r\n  watcherLibrary['looks_size'] = {\r\n    evaluate(watcher) { return P.core.isSprite(watcher.target) ? watcher.target.scale * 100 : 100; },\r\n    getLabel() { return 'size'; },\r\n  };\r\n  watcherLibrary['motion_direction'] = {\r\n    evaluate(watcher) { return P.core.isSprite(watcher.target) ? watcher.target.direction : 0; },\r\n    getLabel() { return 'direction'; },\r\n  };\r\n  watcherLibrary['motion_xposition'] = {\r\n    evaluate(watcher) { return watcher.target.scratchX; },\r\n    getLabel() { return 'x position'; },\r\n  };\r\n  watcherLibrary['motion_yposition'] = {\r\n    evaluate(watcher) { return watcher.target.scratchY; },\r\n    getLabel() { return 'y position'; },\r\n  };\r\n  watcherLibrary['music_getTempo'] = {\r\n    evaluate(watcher) { return watcher.stage.tempoBPM; },\r\n    getLabel() { return 'Music: tempo'; },\r\n  };\r\n  watcherLibrary['sensing_answer'] = {\r\n    evaluate(watcher) { return watcher.stage.answer; },\r\n    getLabel() { return 'answer'; },\r\n  };\r\n  watcherLibrary['sensing_current'] = {\r\n    evaluate(watcher) {\r\n      const param = watcher.params.CURRENTMENU.toLowerCase();\r\n      switch (param) {\r\n        case 'year': return new Date().getFullYear();\r\n        case 'month': return new Date().getMonth() + 1;\r\n        case 'date': return new Date().getDate();\r\n        case 'dayofweek': return new Date().getDay() + 1;\r\n        case 'hour': return new Date().getHours();\r\n        case 'minute': return new Date().getMinutes();\r\n        case 'second': return new Date().getSeconds();\r\n      }\r\n      return 0;\r\n    },\r\n    getLabel(watcher) {\r\n      const param = watcher.params.CURRENTMENU.toLowerCase();\r\n      // all expected params except DAYOFWEEK can just be lowercased and used directly\r\n      if (param === 'dayofweek') {\r\n        return 'day of week';\r\n      }\r\n      return param;\r\n    }\r\n  };\r\n  watcherLibrary['sensing_loudness'] = {\r\n    init(watcher) {\r\n      watcher.stage.initLoudness();\r\n    },\r\n    evaluate(watcher) {\r\n      if (watcher.stage.microphone) {\r\n        return watcher.stage.microphone.getLoudness();\r\n      } else {\r\n        return -1;\r\n      }\r\n    },\r\n    getLabel() { return 'loudness'; },\r\n  };\r\n  watcherLibrary['sensing_timer'] = {\r\n    evaluate(watcher) {\r\n      return (watcher.stage.runtime.now() - watcher.stage.runtime.timerStart) / 1000;\r\n    },\r\n    getLabel() { return 'timer'; },\r\n  };\r\n  watcherLibrary['sensing_username'] = {\r\n    evaluate(watcher) { return watcher.stage.username; },\r\n    getLabel() { return 'username'; },\r\n  };\r\n  watcherLibrary['sound_volume'] = {\r\n    evaluate(watcher) { return watcher.target.volume * 100; },\r\n    getLabel() { return 'volume'; },\r\n  };\r\n  watcherLibrary['speech2text_getSpeech'] = {\r\n    init(watcher) {\r\n      watcher.stage.initSpeech2Text();\r\n    },\r\n    evaluate(watcher) {\r\n      if (watcher.stage.speech2text) {\r\n        return watcher.stage.speech2text.speech;\r\n      }\r\n      return '';\r\n    },\r\n    getLabel(watcher) { return 'Speech to text: speech'; },\r\n  };\r\n}());\r\n","/// <reference path=\"../phosphorus.ts\" />\r\n\r\nnamespace P.ext {\r\n  export abstract class Extension {\r\n    public stage: P.core.Stage;\r\n\r\n    constructor(stage: P.core.Stage) {\r\n      this.stage = stage;\r\n    }\r\n\r\n    /**\r\n     * Delete this extension.\r\n     */\r\n    destroy() {\r\n\r\n    }\r\n\r\n    /**\r\n     * Called when the project is started or resumed\r\n     */\r\n    onstart() {\r\n\r\n    }\r\n\r\n    /**\r\n     * Called when the project is paused\r\n     */\r\n    onpause() {\r\n\r\n    }\r\n  }\r\n}\r\n","/// <reference path=\"extension.ts\" />\r\n\r\n/*!\r\nParts of this file (microphone.ts) are derived from https://github.com/LLK/scratch-audio/blob/develop/src/Loudness.js\r\n*/\r\n\r\nnamespace P.ext.microphone {\r\n  const enum MicrophoneState {\r\n    Disconnected = 0,\r\n    Connected = 1,\r\n    Connecting = 2,\r\n    Error = 3,\r\n  }\r\n\r\n  interface MicrophoneData {\r\n    source: MediaStreamAudioSourceNode;\r\n    stream: MediaStream;\r\n    analyzer: AnalyserNode;\r\n    dataArray: Float32Array;\r\n    lastValue: number;\r\n    lastCheck: number;\r\n  }\r\n\r\n  let microphone: MicrophoneData | null = null;\r\n  let state: MicrophoneState = MicrophoneState.Disconnected;\r\n\r\n  // The loudness will be cached for this long, in milliseconds.\r\n  // getLoudness() has side effects (such as affecting smoothing) so a cache is needed.\r\n  const CACHE_TIME = 1000 / 30;\r\n\r\n  /**\r\n   * Begin the process of connecting to the microphone.\r\n   */\r\n  function connect() {\r\n    if (state !== MicrophoneState.Disconnected) {\r\n      return;\r\n    }\r\n    if (!P.audio.context) {\r\n      console.warn('Cannot connect to microphone without audio context.');\r\n      state = MicrophoneState.Error;\r\n      return;\r\n    }\r\n\r\n    state = MicrophoneState.Connecting;\r\n    navigator.mediaDevices.getUserMedia({audio: true})\r\n      .then((mediaStream) => {\r\n        const source = P.audio.context!.createMediaStreamSource(mediaStream);\r\n        const analyzer = P.audio.context!.createAnalyser();\r\n        source.connect(analyzer);\r\n        microphone = {\r\n          source: source,\r\n          stream: mediaStream,\r\n          analyzer,\r\n          dataArray: new Float32Array(analyzer.fftSize),\r\n          lastValue: -1,\r\n          lastCheck: 0,\r\n        };\r\n        state = MicrophoneState.Connected;\r\n      })\r\n    .catch((err) => {\r\n      console.warn('Cannot connect to microphone: ' + err);\r\n      state = MicrophoneState.Error;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Re-initializes the analyser node.\r\n   * This is necessary due to (what seems to be) a bug in Chrome.\r\n   */\r\n  function reinitAnalyser() {\r\n    if (!microphone) {\r\n      throw new Error('Microphone not connected; cannot re-init something that does not exist!')\r\n    }\r\n\r\n    // For some reason all analyser nodes stop working in Chrome after doing suspend() on the AudioContext\r\n    // getFloatTimeDomainData() will always return the same data, which isn't any good.\r\n    // This will fix that by creating a new analyser instead of re-using one.\r\n    const analyzer = P.audio.context!.createAnalyser();\r\n    microphone.source.disconnect();\r\n    microphone.source.connect(analyzer);\r\n    microphone.analyzer = analyzer;\r\n\r\n    // It's possible fftSize might change with this new analyser\r\n    if (microphone.dataArray.length !== analyzer.fftSize) {\r\n      microphone.dataArray = new Float32Array(analyzer.fftSize);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @returns The volume level from 0-100 or -1 if the microphone is not active.\r\n   */\r\n  function getLoudness(): number {\r\n    if (microphone === null) {\r\n      connect();\r\n      return -1;\r\n    }\r\n    if (!microphone.stream.active) {\r\n      return -1;\r\n    }\r\n\r\n    if (Date.now() - microphone.lastCheck < CACHE_TIME) {\r\n      return microphone.lastValue;\r\n    }\r\n\r\n    microphone.analyzer.getFloatTimeDomainData(microphone.dataArray);\r\n    let sum = 0;\r\n    for (let i = 0; i < microphone.dataArray.length; i++){\r\n      sum += Math.pow(microphone.dataArray[i], 2);\r\n    }\r\n    let rms = Math.sqrt(sum / microphone.dataArray.length);\r\n    if (microphone.lastValue !== -1) {\r\n      rms = Math.max(rms, microphone.lastValue * 0.6);\r\n    }\r\n    microphone.lastValue = rms;\r\n\r\n    rms *= 1.63;\r\n    rms = Math.sqrt(rms);\r\n    rms = Math.round(rms * 100);\r\n    rms = Math.min(rms, 100);\r\n\r\n    return rms;\r\n  }\r\n\r\n  export class MicrophoneExtension extends P.ext.Extension {\r\n    getLoudness() {\r\n      return getLoudness();\r\n    }\r\n\r\n    onstart() {\r\n      if (microphone) {\r\n        reinitAnalyser();\r\n      }\r\n    }\r\n  }\r\n}\r\n","/// <reference path=\"extension.ts\" />\r\n\r\nnamespace P.ext.speech2text {\r\n  // Currently only Chrome supports SpeechRecognition with the webkit prefix.\r\n  var SpeechRecognition = window.SpeechRecognition || (window as any).webkitSpeechRecognition || (window as any).mozSpeechRecognition || (window as any).msSpeechRecognition;\r\n\r\n  let supported: null | boolean = null;\r\n  export function isSupported(): boolean {\r\n    if (supported === null) {\r\n      supported = typeof SpeechRecognition !== 'undefined';\r\n      if (!supported) {\r\n        console.warn('Speech to text is not supported in this browser. (https://developer.mozilla.org/en-US/docs/Web/API/SpeechRecognition)');\r\n      }\r\n    }\r\n    return supported;\r\n  }\r\n\r\n  interface SpeechToTextHat {\r\n    target: P.core.Base;\r\n    startingFunction: P.runtime.Fn;\r\n    phraseFunction: () => any;\r\n  }\r\n\r\n  export class SpeechToTextExtension extends P.ext.Extension {\r\n    public speech: string = '';\r\n\r\n    private recognition: SpeechRecognition;\r\n    private lastResultIndex: number;\r\n    private listeners: number = 0;\r\n    private overlayElement: HTMLElement;\r\n    private hats: SpeechToTextHat[] = [];\r\n\r\n    constructor(stage: P.core.Stage) {\r\n      super(stage);\r\n      this.initRecognition();\r\n      this.initOverlay();\r\n    }\r\n\r\n    private initRecognition() {\r\n      this.recognition = new SpeechRecognition();\r\n      this.recognition.lang = 'en-US';\r\n      this.recognition.continuous = true;\r\n      this.recognition.onresult = (event) => this.onresult(event);\r\n      this.recognition.onerror = (event) => {\r\n        // Abort is expected when this extension is destroyed.\r\n        if (event.error !== 'aborted') {\r\n          console.error('speech2text error', event);\r\n        }\r\n      };\r\n      this.recognition.onend = () => {\r\n        console.warn('speech2text disconnected, reconnecting');\r\n        this.initRecognition();\r\n      };\r\n      this.recognition.start();\r\n    }\r\n\r\n    private initOverlay() {\r\n      if (this.overlayElement) {\r\n        throw new Error('initializing overlay twice');\r\n      }\r\n\r\n      const container = document.createElement('div');\r\n      container.className = 'speech2text-container';\r\n\r\n      const indicator = document.createElement('div');\r\n      indicator.className = 'speech2text-indicator';\r\n\r\n      const animation = document.createElement('div');\r\n      animation.className = 'speech2text-animation';\r\n\r\n      container.appendChild(animation);\r\n      container.appendChild(indicator);\r\n\r\n      this.stage.ui.appendChild(container);\r\n      this.overlayElement = container;\r\n    }\r\n\r\n    private onresult(event: SpeechRecognitionEvent) {\r\n      this.lastResultIndex = event.resultIndex;\r\n      const lastResult = event.results[event.resultIndex];\r\n      const message = lastResult[0];\r\n      const transcript = message.transcript.trim();\r\n      // Only update the speech value when someone is actually listening\r\n      if (this.listeners !== 0) {\r\n        this.speech = transcript;\r\n      }\r\n      // Trigger our hat blocks, if any.\r\n      for (const hat of this.hats) {\r\n        const target = hat.target;\r\n        const phraseFunction = hat.phraseFunction;\r\n        const startingFunction = hat.startingFunction;\r\n        const value = this.stage.runtime.evaluateExpression(target, phraseFunction);\r\n        if (value === transcript) {\r\n          this.stage.runtime.startThread(target, startingFunction);\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Add a new hat block listener\r\n     */\r\n    addHat(hat: SpeechToTextHat) {\r\n      this.hats.push(hat);\r\n    }\r\n\r\n    /**\r\n     * Should be called at the start of \"listen and wait\"\r\n     */\r\n    startListen() {\r\n      this.listeners++;\r\n      this.overlayElement.setAttribute('listening', '');\r\n    }\r\n\r\n    /**\r\n     * Should be called at the end of \"listen and wait\"\r\n     */\r\n    endListen() {\r\n      this.listeners--;\r\n      if (this.listeners === 0) {\r\n        this.overlayElement.removeAttribute('listening');\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Delete this extension.\r\n     */\r\n    destroy() {\r\n      this.recognition.abort();\r\n    }\r\n\r\n    /**\r\n     * Get the ID of the current message.\r\n     */\r\n    id() {\r\n      return this.lastResultIndex;\r\n    }\r\n  }\r\n}"]}